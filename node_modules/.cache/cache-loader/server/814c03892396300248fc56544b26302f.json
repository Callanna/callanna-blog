{"remainingRequest":"/Users/pro/Documents/WebWork/GitHub/Callanna-iBlog/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/pro/Documents/WebWork/GitHub/Callanna-iBlog/.nuxt/auth/storage.js","dependencies":[{"path":"/Users/pro/Documents/WebWork/GitHub/Callanna-iBlog/.nuxt/auth/storage.js","mtime":1598705829981},{"path":"/Users/pro/Documents/WebWork/GitHub/Callanna-iBlog/node_modules/cache-loader/dist/cjs.js","mtime":1583743859870},{"path":"/Users/pro/Documents/WebWork/GitHub/Callanna-iBlog/node_modules/babel-loader/lib/index.js","mtime":1578715241550}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgeyBwYXJzZSBhcyBwYXJzZUNvb2tpZSwgc2VyaWFsaXplIGFzIHNlcmlhbGl6ZUNvb2tpZSB9IGZyb20gJ2Nvb2tpZSc7CmltcG9ydCB7IGlzVW5zZXQsIGlzU2V0LCBkZWNvZGVWYWx1ZSwgZW5jb2RlVmFsdWUsIGdldFByb3AgfSBmcm9tICcuL3V0aWxpdGllcyc7CmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0b3JhZ2UgewogIGNvbnN0cnVjdG9yKGN0eCwgb3B0aW9ucykgewogICAgdGhpcy5jdHggPSBjdHg7CiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zOwoKICAgIHRoaXMuX2luaXRTdGF0ZSgpOwogIH0gLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gVW5pdmVyc2FsCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgoKICBzZXRVbml2ZXJzYWwoa2V5LCB2YWx1ZSkgewogICAgLy8gVW5zZXQgbnVsbCwgdW5kZWZpbmVkCiAgICBpZiAoaXNVbnNldCh2YWx1ZSkpIHsKICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlVW5pdmVyc2FsKGtleSk7CiAgICB9IC8vIExvY2FsIHN0YXRlCgoKICAgIHRoaXMuc2V0U3RhdGUoa2V5LCB2YWx1ZSk7IC8vIENvb2tpZXMKCiAgICB0aGlzLnNldENvb2tpZShrZXksIHZhbHVlKTsgLy8gTG9jYWwgU3RvcmFnZQoKICAgIHRoaXMuc2V0TG9jYWxTdG9yYWdlKGtleSwgdmFsdWUpOwogICAgcmV0dXJuIHZhbHVlOwogIH0KCiAgZ2V0VW5pdmVyc2FsKGtleSkgewogICAgLy8gTG9jYWwgc3RhdGUKICAgIGxldCB2YWx1ZSA9IHRoaXMuZ2V0U3RhdGUoa2V5KTsgLy8gQ29va2llcwoKICAgIGlmIChpc1Vuc2V0KHZhbHVlKSkgewogICAgICB2YWx1ZSA9IHRoaXMuZ2V0Q29va2llKGtleSk7CiAgICB9IC8vIExvY2FsIFN0b3JhZ2UKCgogICAgaWYgKGlzVW5zZXQodmFsdWUpKSB7CiAgICAgIHZhbHVlID0gdGhpcy5nZXRMb2NhbFN0b3JhZ2Uoa2V5KTsKICAgIH0KCiAgICByZXR1cm4gdmFsdWU7CiAgfQoKICBzeW5jVW5pdmVyc2FsKGtleSwgZGVmYXVsdFZhbHVlKSB7CiAgICBsZXQgdmFsdWUgPSB0aGlzLmdldFVuaXZlcnNhbChrZXkpOwoKICAgIGlmIChpc1Vuc2V0KHZhbHVlKSAmJiBpc1NldChkZWZhdWx0VmFsdWUpKSB7CiAgICAgIHZhbHVlID0gZGVmYXVsdFZhbHVlOwogICAgfQoKICAgIGlmIChpc1NldCh2YWx1ZSkpIHsKICAgICAgdGhpcy5zZXRVbml2ZXJzYWwoa2V5LCB2YWx1ZSk7CiAgICB9CgogICAgcmV0dXJuIHZhbHVlOwogIH0KCiAgcmVtb3ZlVW5pdmVyc2FsKGtleSkgewogICAgdGhpcy5yZW1vdmVTdGF0ZShrZXkpOwogICAgdGhpcy5yZW1vdmVMb2NhbFN0b3JhZ2Uoa2V5KTsKICAgIHRoaXMucmVtb3ZlQ29va2llKGtleSk7CiAgfSAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAvLyBMb2NhbCBzdGF0ZSAocmVhY3RpdmUpCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgoKICBfaW5pdFN0YXRlKCkgewogICAgLy8gUHJpdmF0ZSBzdGF0ZSBpcyBzdWl0YWJsZSB0byBrZWVwIGluZm9ybWF0aW9uIG5vdCBiZWluZyBleHBvc2VkIHRvIFZ1ZXggc3RvcmUKICAgIC8vIFRoaXMgaGVscHMgcHJldmVudCBzdGVhbGluZyB0b2tlbiBmcm9tIFNTUiByZXNwb25zZSBIVE1MCiAgICBWdWUuc2V0KHRoaXMsICdfc3RhdGUnLCB7fSk7IC8vIFVzZSB2dWV4IGZvciBsb2NhbCBzdGF0ZSdzIGlmIHBvc3NpYmxlCgogICAgdGhpcy5fdXNlVnVleCA9IHRoaXMub3B0aW9ucy52dWV4ICYmIHRoaXMuY3R4LnN0b3JlOwoKICAgIGlmICh0aGlzLl91c2VWdWV4KSB7CiAgICAgIGNvbnN0IHN0b3JlTW9kdWxlID0gewogICAgICAgIG5hbWVzcGFjZWQ6IHRydWUsCiAgICAgICAgc3RhdGU6ICgpID0+IHRoaXMub3B0aW9ucy5pbml0aWFsU3RhdGUsCiAgICAgICAgbXV0YXRpb25zOiB7CiAgICAgICAgICBTRVQoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgICAgICAgVnVlLnNldChzdGF0ZSwgcGF5bG9hZC5rZXksIHBheWxvYWQudmFsdWUpOwogICAgICAgICAgfQoKICAgICAgICB9CiAgICAgIH07CiAgICAgIHRoaXMuY3R4LnN0b3JlLnJlZ2lzdGVyTW9kdWxlKHRoaXMub3B0aW9ucy52dWV4Lm5hbWVzcGFjZSwgc3RvcmVNb2R1bGUsIHsKICAgICAgICBwcmVzZXJ2ZVN0YXRlOiBCb29sZWFuKHRoaXMuY3R4LnN0b3JlLnN0YXRlW3RoaXMub3B0aW9ucy52dWV4Lm5hbWVzcGFjZV0pCiAgICAgIH0pOwogICAgICB0aGlzLnN0YXRlID0gdGhpcy5jdHguc3RvcmUuc3RhdGVbdGhpcy5vcHRpb25zLnZ1ZXgubmFtZXNwYWNlXTsKICAgIH0gZWxzZSB7CiAgICAgIFZ1ZS5zZXQodGhpcywgJ3N0YXRlJywge30pOwogICAgfQogIH0KCiAgc2V0U3RhdGUoa2V5LCB2YWx1ZSkgewogICAgaWYgKGtleVswXSA9PT0gJ18nKSB7CiAgICAgIFZ1ZS5zZXQodGhpcy5fc3RhdGUsIGtleSwgdmFsdWUpOwogICAgfSBlbHNlIHsKICAgICAgaWYgKHRoaXMuX3VzZVZ1ZXgpIHsKICAgICAgICB0aGlzLmN0eC5zdG9yZS5jb21taXQodGhpcy5vcHRpb25zLnZ1ZXgubmFtZXNwYWNlICsgJy9TRVQnLCB7CiAgICAgICAgICBrZXksCiAgICAgICAgICB2YWx1ZQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIFZ1ZS5zZXQodGhpcy5zdGF0ZSwga2V5LCB2YWx1ZSk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gdmFsdWU7CiAgfQoKICBnZXRTdGF0ZShrZXkpIHsKICAgIGlmIChrZXlbMF0gIT09ICdfJykgewogICAgICByZXR1cm4gdGhpcy5zdGF0ZVtrZXldOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHRoaXMuX3N0YXRlW2tleV07CiAgICB9CiAgfQoKICB3YXRjaFN0YXRlKGtleSwgZm4pIHsKICAgIGlmICh0aGlzLl91c2VWdWV4KSB7CiAgICAgIHJldHVybiB0aGlzLmN0eC5zdG9yZS53YXRjaChzdGF0ZSA9PiBnZXRQcm9wKHN0YXRlW3RoaXMub3B0aW9ucy52dWV4Lm5hbWVzcGFjZV0sIGtleSksIGZuKTsKICAgIH0KICB9CgogIHJlbW92ZVN0YXRlKGtleSkgewogICAgdGhpcy5zZXRTdGF0ZShrZXksIHVuZGVmaW5lZCk7CiAgfSAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAvLyBMb2NhbCBzdG9yYWdlCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgoKICBzZXRMb2NhbFN0b3JhZ2Uoa2V5LCB2YWx1ZSkgewogICAgLy8gVW5zZXQgbnVsbCwgdW5kZWZpbmVkCiAgICBpZiAoaXNVbnNldCh2YWx1ZSkpIHsKICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlTG9jYWxTdG9yYWdlKGtleSk7CiAgICB9CgogICAgaWYgKHR5cGVvZiBsb2NhbFN0b3JhZ2UgPT09ICd1bmRlZmluZWQnIHx8ICF0aGlzLm9wdGlvbnMubG9jYWxTdG9yYWdlKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBjb25zdCBfa2V5ID0gdGhpcy5vcHRpb25zLmxvY2FsU3RvcmFnZS5wcmVmaXggKyBrZXk7CgogICAgdHJ5IHsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oX2tleSwgZW5jb2RlVmFsdWUodmFsdWUpKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuaWdub3JlRXhjZXB0aW9ucykgewogICAgICAgIHRocm93IGU7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gdmFsdWU7CiAgfQoKICBnZXRMb2NhbFN0b3JhZ2Uoa2V5KSB7CiAgICBpZiAodHlwZW9mIGxvY2FsU3RvcmFnZSA9PT0gJ3VuZGVmaW5lZCcgfHwgIXRoaXMub3B0aW9ucy5sb2NhbFN0b3JhZ2UpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGNvbnN0IF9rZXkgPSB0aGlzLm9wdGlvbnMubG9jYWxTdG9yYWdlLnByZWZpeCArIGtleTsKCiAgICBjb25zdCB2YWx1ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKF9rZXkpOwogICAgcmV0dXJuIGRlY29kZVZhbHVlKHZhbHVlKTsKICB9CgogIHJlbW92ZUxvY2FsU3RvcmFnZShrZXkpIHsKICAgIGlmICh0eXBlb2YgbG9jYWxTdG9yYWdlID09PSAndW5kZWZpbmVkJyB8fCAhdGhpcy5vcHRpb25zLmxvY2FsU3RvcmFnZSkgewogICAgICByZXR1cm47CiAgICB9CgogICAgY29uc3QgX2tleSA9IHRoaXMub3B0aW9ucy5sb2NhbFN0b3JhZ2UucHJlZml4ICsga2V5OwoKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKF9rZXkpOwogIH0gLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gQ29va2llcwogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCiAgZ2V0Q29va2llcygpIHsKICAgIGNvbnN0IGNvb2tpZVN0ciA9IHByb2Nlc3MuY2xpZW50ID8gZG9jdW1lbnQuY29va2llIDogdGhpcy5jdHgucmVxLmhlYWRlcnMuY29va2llOwogICAgcmV0dXJuIHBhcnNlQ29va2llKGNvb2tpZVN0ciB8fCAnJykgfHwge307CiAgfQoKICBzZXRDb29raWUoa2V5LCB2YWx1ZSwgb3B0aW9ucyA9IHt9KSB7CiAgICBpZiAoIXRoaXMub3B0aW9ucy5jb29raWUgfHwgcHJvY2Vzcy5zZXJ2ZXIgJiYgIXRoaXMuY3R4LnJlcykgewogICAgICByZXR1cm47CiAgICB9CgogICAgY29uc3QgX2tleSA9IHRoaXMub3B0aW9ucy5jb29raWUucHJlZml4ICsga2V5OwoKICAgIGNvbnN0IF9vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5vcHRpb25zLmNvb2tpZS5vcHRpb25zLCBvcHRpb25zKTsKCiAgICBjb25zdCBfdmFsdWUgPSBlbmNvZGVWYWx1ZSh2YWx1ZSk7IC8vIFVuc2V0IG51bGwsIHVuZGVmaW5lZAoKCiAgICBpZiAoaXNVbnNldCh2YWx1ZSkpIHsKICAgICAgX29wdGlvbnMubWF4QWdlID0gLTE7CiAgICB9IC8vIEFjY2VwdCBleHBpcmVzIGFzIGEgbnVtYmVyIGZvciBqcy1jb29raWUgY29tcGF0aWJsaXR5CgoKICAgIGlmICh0eXBlb2YgX29wdGlvbnMuZXhwaXJlcyA9PT0gJ251bWJlcicpIHsKICAgICAgX29wdGlvbnMuZXhwaXJlcyA9IG5ldyBEYXRlKG5ldyBEYXRlKCkgKiAxICsgX29wdGlvbnMuZXhwaXJlcyAqIDg2NGUrNSk7CiAgICB9CgogICAgY29uc3Qgc2VyaWFsaXplZENvb2tpZSA9IHNlcmlhbGl6ZUNvb2tpZShfa2V5LCBfdmFsdWUsIF9vcHRpb25zKTsKCiAgICBpZiAocHJvY2Vzcy5jbGllbnQpIHsKICAgICAgLy8gU2V0IGluIGJyb3dzZXIKICAgICAgZG9jdW1lbnQuY29va2llID0gc2VyaWFsaXplZENvb2tpZTsKICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5zZXJ2ZXIgJiYgdGhpcy5jdHgucmVzKSB7CiAgICAgIC8vIFNlbmQgU2V0LUNvb2tpZSBoZWFkZXIgZnJvbSBzZXJ2ZXIgc2lkZQogICAgICBjb25zdCBwcmV2Q29va2llcyA9IHRoaXMuY3R4LnJlcy5nZXRIZWFkZXIoJ1NldC1Db29raWUnKTsKICAgICAgdGhpcy5jdHgucmVzLnNldEhlYWRlcignU2V0LUNvb2tpZScsIFtdLmNvbmNhdChwcmV2Q29va2llcywgc2VyaWFsaXplZENvb2tpZSkuZmlsdGVyKHYgPT4gdikpOwogICAgfQoKICAgIHJldHVybiB2YWx1ZTsKICB9CgogIGdldENvb2tpZShrZXkpIHsKICAgIGlmICghdGhpcy5vcHRpb25zLmNvb2tpZSB8fCBwcm9jZXNzLnNlcnZlciAmJiAhdGhpcy5jdHgucmVxKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBjb25zdCBfa2V5ID0gdGhpcy5vcHRpb25zLmNvb2tpZS5wcmVmaXggKyBrZXk7CgogICAgY29uc3QgY29va2llcyA9IHRoaXMuZ2V0Q29va2llcygpOwogICAgY29uc3QgdmFsdWUgPSBjb29raWVzW19rZXldID8gZGVjb2RlVVJJQ29tcG9uZW50KGNvb2tpZXNbX2tleV0pIDogdW5kZWZpbmVkOwogICAgcmV0dXJuIGRlY29kZVZhbHVlKHZhbHVlKTsKICB9CgogIHJlbW92ZUNvb2tpZShrZXksIG9wdGlvbnMpIHsKICAgIHRoaXMuc2V0Q29va2llKGtleSwgdW5kZWZpbmVkLCBvcHRpb25zKTsKICB9Cgp9"},{"version":3,"sources":["/Users/pro/Documents/WebWork/GitHub/Callanna-iBlog/.nuxt/auth/storage.js"],"names":["Vue","parse","parseCookie","serialize","serializeCookie","isUnset","isSet","decodeValue","encodeValue","getProp","Storage","constructor","ctx","options","_initState","setUniversal","key","value","removeUniversal","setState","setCookie","setLocalStorage","getUniversal","getState","getCookie","getLocalStorage","syncUniversal","defaultValue","removeState","removeLocalStorage","removeCookie","set","_useVuex","vuex","store","storeModule","namespaced","state","initialState","mutations","SET","payload","registerModule","namespace","preserveState","Boolean","_state","commit","watchState","fn","watch","undefined","localStorage","_key","prefix","setItem","e","ignoreExceptions","getItem","removeItem","getCookies","cookieStr","process","client","document","cookie","req","headers","server","res","_options","Object","assign","_value","maxAge","expires","Date","serializedCookie","prevCookies","getHeader","setHeader","concat","filter","v","cookies","decodeURIComponent"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport { parse as parseCookie, serialize as serializeCookie } from 'cookie'\nimport { isUnset, isSet, decodeValue, encodeValue, getProp } from './utilities'\n\nexport default class Storage {\n  constructor (ctx, options) {\n    this.ctx = ctx\n    this.options = options\n\n    this._initState()\n  }\n\n  // ------------------------------------\n  // Universal\n  // ------------------------------------\n\n  setUniversal (key, value) {\n    // Unset null, undefined\n    if (isUnset(value)) {\n      return this.removeUniversal(key)\n    }\n\n    // Local state\n    this.setState(key, value)\n\n    // Cookies\n    this.setCookie(key, value)\n\n    // Local Storage\n    this.setLocalStorage(key, value)\n\n    return value\n  }\n\n  getUniversal (key) {\n    // Local state\n    let value = this.getState(key)\n\n    // Cookies\n    if (isUnset(value)) {\n      value = this.getCookie(key)\n    }\n\n    // Local Storage\n    if (isUnset(value)) {\n      value = this.getLocalStorage(key)\n    }\n\n    return value\n  }\n\n  syncUniversal (key, defaultValue) {\n    let value = this.getUniversal(key)\n\n    if (isUnset(value) && isSet(defaultValue)) {\n      value = defaultValue\n    }\n\n    if (isSet(value)) {\n      this.setUniversal(key, value)\n    }\n\n    return value\n  }\n\n  removeUniversal (key) {\n    this.removeState(key)\n    this.removeLocalStorage(key)\n    this.removeCookie(key)\n  }\n\n  // ------------------------------------\n  // Local state (reactive)\n  // ------------------------------------\n\n  _initState () {\n    // Private state is suitable to keep information not being exposed to Vuex store\n    // This helps prevent stealing token from SSR response HTML\n    Vue.set(this, '_state', {})\n\n    // Use vuex for local state's if possible\n    this._useVuex = this.options.vuex && this.ctx.store\n\n    if (this._useVuex) {\n      const storeModule = {\n        namespaced: true,\n        state: () => this.options.initialState,\n        mutations: {\n          SET (state, payload) {\n            Vue.set(state, payload.key, payload.value)\n          }\n        }\n      }\n\n      this.ctx.store.registerModule(this.options.vuex.namespace, storeModule, {\n        preserveState: Boolean(this.ctx.store.state[this.options.vuex.namespace])\n      })\n\n      this.state = this.ctx.store.state[this.options.vuex.namespace]\n    } else {\n      Vue.set(this, 'state', {})\n    }\n  }\n\n  setState (key, value) {\n    if (key[0] === '_') {\n      Vue.set(this._state, key, value)\n    } else {\n      if (this._useVuex) {\n        this.ctx.store.commit(this.options.vuex.namespace + '/SET', {\n          key,\n          value\n        })\n      } else {\n        Vue.set(this.state, key, value)\n      }\n    }\n\n    return value\n  }\n\n  getState (key) {\n    if (key[0] !== '_') {\n      return this.state[key]\n    } else {\n      return this._state[key]\n    }\n  }\n\n  watchState (key, fn) {\n    if (this._useVuex) {\n      return this.ctx.store.watch(\n        state => getProp(state[this.options.vuex.namespace], key),\n        fn\n      )\n    }\n  }\n\n  removeState (key) {\n    this.setState(key, undefined)\n  }\n\n  // ------------------------------------\n  // Local storage\n  // ------------------------------------\n\n  setLocalStorage (key, value) {\n    // Unset null, undefined\n    if (isUnset(value)) {\n      return this.removeLocalStorage(key)\n    }\n\n    if (typeof localStorage === 'undefined' || !this.options.localStorage) {\n      return\n    }\n\n    const _key = this.options.localStorage.prefix + key\n\n    try {\n      localStorage.setItem(_key, encodeValue(value))\n    } catch (e) {\n      if (!this.options.ignoreExceptions) {\n        throw e\n      }\n    }\n\n    return value\n  }\n\n  getLocalStorage (key) {\n    if (typeof localStorage === 'undefined' || !this.options.localStorage) {\n      return\n    }\n\n    const _key = this.options.localStorage.prefix + key\n\n    const value = localStorage.getItem(_key)\n\n    return decodeValue(value)\n  }\n\n  removeLocalStorage (key) {\n    if (typeof localStorage === 'undefined' || !this.options.localStorage) {\n      return\n    }\n\n    const _key = this.options.localStorage.prefix + key\n    localStorage.removeItem(_key)\n  }\n\n  // ------------------------------------\n  // Cookies\n  // ------------------------------------\n  getCookies () {\n    const cookieStr = process.client\n      ? document.cookie\n      : this.ctx.req.headers.cookie\n\n    return parseCookie(cookieStr || '') || {}\n  }\n\n  setCookie (key, value, options = {}) {\n    if (!this.options.cookie || (process.server && !this.ctx.res)) {\n      return\n    }\n\n    const _key = this.options.cookie.prefix + key\n    const _options = Object.assign({}, this.options.cookie.options, options)\n    const _value = encodeValue(value)\n\n    // Unset null, undefined\n    if (isUnset(value)) {\n      _options.maxAge = -1\n    }\n\n    // Accept expires as a number for js-cookie compatiblity\n    if (typeof _options.expires === 'number') {\n      _options.expires = new Date(new Date() * 1 + _options.expires * 864e+5)\n    }\n\n    const serializedCookie = serializeCookie(_key, _value, _options)\n\n    if (process.client) {\n      // Set in browser\n      document.cookie = serializedCookie\n    } else if (process.server && this.ctx.res) {\n      // Send Set-Cookie header from server side\n      const prevCookies = this.ctx.res.getHeader('Set-Cookie')\n      this.ctx.res.setHeader('Set-Cookie', [].concat(prevCookies, serializedCookie).filter(v => v))\n    }\n\n    return value\n  }\n\n  getCookie (key) {\n    if (!this.options.cookie || (process.server && !this.ctx.req)) {\n      return\n    }\n\n    const _key = this.options.cookie.prefix + key\n\n    const cookies = this.getCookies()\n\n    const value = cookies[_key] ? decodeURIComponent(cookies[_key]) : undefined\n\n    return decodeValue(value)\n  }\n\n  removeCookie (key, options) {\n    this.setCookie(key, undefined, options)\n  }\n}\n"]}]}