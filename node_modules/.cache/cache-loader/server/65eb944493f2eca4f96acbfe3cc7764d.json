{"remainingRequest":"/Users/pro/Documents/WebWork/GitHub/Callanna-iBlog/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/pro/Documents/WebWork/GitHub/Callanna-iBlog/.nuxt/auth/auth.js","dependencies":[{"path":"/Users/pro/Documents/WebWork/GitHub/Callanna-iBlog/.nuxt/auth/auth.js","mtime":1598705829981},{"path":"/Users/pro/Documents/WebWork/GitHub/Callanna-iBlog/node_modules/cache-loader/dist/cjs.js","mtime":1583743859870},{"path":"/Users/pro/Documents/WebWork/GitHub/Callanna-iBlog/node_modules/babel-loader/lib/index.js","mtime":1578715241550}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFN0b3JhZ2UgZnJvbSAnLi9zdG9yYWdlJzsKaW1wb3J0IHsgcm91dGVPcHRpb24sIGlzUmVsYXRpdmVVUkwsIGlzU2V0LCBpc1NhbWVVUkwsIGdldFByb3AgfSBmcm9tICcuL3V0aWxpdGllcyc7CmV4cG9ydCBkZWZhdWx0IGNsYXNzIEF1dGggewogIGNvbnN0cnVjdG9yKGN0eCwgb3B0aW9ucykgewogICAgdGhpcy5jdHggPSBjdHg7CiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zOyAvLyBTdHJhdGVnaWVzCgogICAgdGhpcy5zdHJhdGVnaWVzID0ge307IC8vIEVycm9yIGxpc3RlbmVycwoKICAgIHRoaXMuX2Vycm9yTGlzdGVuZXJzID0gW107IC8vIFJlZGlyZWN0IGxpc3RlbmVycwoKICAgIHRoaXMuX3JlZGlyZWN0TGlzdGVuZXJzID0gW107IC8vIFN0b3JhZ2UgJiBTdGF0ZQoKICAgIG9wdGlvbnMuaW5pdGlhbFN0YXRlID0gewogICAgICB1c2VyOiBudWxsLAogICAgICBsb2dnZWRJbjogZmFsc2UKICAgIH07CiAgICBjb25zdCBzdG9yYWdlID0gbmV3IFN0b3JhZ2UoY3R4LCBvcHRpb25zKTsKICAgIHRoaXMuJHN0b3JhZ2UgPSBzdG9yYWdlOwogICAgdGhpcy4kc3RhdGUgPSBzdG9yYWdlLnN0YXRlOwogIH0KCiAgYXN5bmMgaW5pdCgpIHsKICAgIC8vIFJlc2V0IG9uIGVycm9yCiAgICBpZiAodGhpcy5vcHRpb25zLnJlc2V0T25FcnJvcikgewogICAgICB0aGlzLm9uRXJyb3IoKC4uLmFyZ3MpID0+IHsKICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5yZXNldE9uRXJyb3IgIT09ICdmdW5jdGlvbicgfHwgdGhpcy5vcHRpb25zLnJlc2V0T25FcnJvciguLi5hcmdzKSkgewogICAgICAgICAgdGhpcy5yZXNldCgpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9IC8vIFJlc3RvcmUgc3RyYXRlZ3kKCgogICAgdGhpcy4kc3RvcmFnZS5zeW5jVW5pdmVyc2FsKCdzdHJhdGVneScsIHRoaXMub3B0aW9ucy5kZWZhdWx0U3RyYXRlZ3kpOyAvLyBTZXQgZGVmYXVsdCBzdHJhdGVneSBpZiBjdXJyZW50IG9uZSBpcyBpbnZhbGlkCgogICAgaWYgKCF0aGlzLnN0cmF0ZWd5KSB7CiAgICAgIHRoaXMuJHN0b3JhZ2Uuc2V0VW5pdmVyc2FsKCdzdHJhdGVneScsIHRoaXMub3B0aW9ucy5kZWZhdWx0U3RyYXRlZ3kpOyAvLyBHaXZlIHVwIGlmIHN0aWxsIGludmFsaWQKCiAgICAgIGlmICghdGhpcy5zdHJhdGVneSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsKICAgICAgfQogICAgfQoKICAgIHRyeSB7CiAgICAgIC8vIENhbGwgbW91bnRlZCBmb3IgYWN0aXZlIHN0cmF0ZWd5IG9uIGluaXRpYWwgbG9hZAogICAgICBhd2FpdCB0aGlzLm1vdW50ZWQoKTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIHRoaXMuY2FsbE9uRXJyb3IoZXJyb3IpOwogICAgfSBmaW5hbGx5IHsKICAgICAgLy8gV2F0Y2ggZm9yIGxvZ2dlZEluIGNoYW5nZXMgb25seSBpbiBjbGllbnQgc2lkZQogICAgICBpZiAocHJvY2Vzcy5jbGllbnQgJiYgdGhpcy5vcHRpb25zLndhdGNoTG9nZ2VkSW4pIHsKICAgICAgICB0aGlzLiRzdG9yYWdlLndhdGNoU3RhdGUoJ2xvZ2dlZEluJywgbG9nZ2VkSW4gPT4gewogICAgICAgICAgaWYgKCFyb3V0ZU9wdGlvbih0aGlzLmN0eC5yb3V0ZSwgJ2F1dGgnLCBmYWxzZSkpIHsKICAgICAgICAgICAgdGhpcy5yZWRpcmVjdChsb2dnZWRJbiA/ICdob21lJyA6ICdsb2dvdXQnKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0gLy8gQmFja3dhcmQgY29tcGF0aWJpbGl0eQoKCiAgZ2V0IHN0YXRlKCkgewogICAgaWYgKCF0aGlzLl9zdGF0ZV93YXJuX3Nob3duKSB7CiAgICAgIHRoaXMuX3N0YXRlX3dhcm5fc2hvd24gPSB0cnVlOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQoKICAgICAgY29uc29sZS53YXJuKCdbQVVUSF0gJGF1dGguc3RhdGUgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSAkYXV0aC4kc3RhdGUgb3IgdG9wIGxldmVsIHByb3BzIGxpa2UgJGF1dGgubG9nZ2VkSW4nKTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy4kc3RhdGU7CiAgfQoKICBnZXRTdGF0ZShrZXkpIHsKICAgIGlmICghdGhpcy5fZ2V0X3N0YXRlX3dhcm5fc2hvd24pIHsKICAgICAgdGhpcy5fZ2V0X3N0YXRlX3dhcm5fc2hvd24gPSB0cnVlOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQoKICAgICAgY29uc29sZS53YXJuKCdbQVVUSF0gJGF1dGguZ2V0U3RhdGUgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSAkYXV0aC4kc3RvcmFnZS5nZXRTdGF0ZSgpIG9yIHRvcCBsZXZlbCBwcm9wcyBsaWtlICRhdXRoLmxvZ2dlZEluJyk7CiAgICB9CgogICAgcmV0dXJuIHRoaXMuJHN0b3JhZ2UuZ2V0U3RhdGUoa2V5KTsKICB9IC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIC8vIFN0cmF0ZWd5IGFuZCBTY2hlbWUKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCgogIGdldCBzdHJhdGVneSgpIHsKICAgIHJldHVybiB0aGlzLnN0cmF0ZWdpZXNbdGhpcy4kc3RhdGUuc3RyYXRlZ3ldOwogIH0KCiAgcmVnaXN0ZXJTdHJhdGVneShuYW1lLCBzdHJhdGVneSkgewogICAgdGhpcy5zdHJhdGVnaWVzW25hbWVdID0gc3RyYXRlZ3k7CiAgfQoKICBzZXRTdHJhdGVneShuYW1lKSB7CiAgICBpZiAobmFtZSA9PT0gdGhpcy4kc3RvcmFnZS5nZXRVbml2ZXJzYWwoJ3N0cmF0ZWd5JykpIHsKICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwogICAgfSAvLyBTZXQgc3RyYXRlZ3kKCgogICAgdGhpcy4kc3RvcmFnZS5zZXRVbml2ZXJzYWwoJ3N0cmF0ZWd5JywgbmFtZSk7IC8vIENhbGwgbW91bnRlZCBob29rIG9uIGFjdGl2ZSBzdHJhdGVneQoKICAgIHJldHVybiB0aGlzLm1vdW50ZWQoKTsKICB9CgogIG1vdW50ZWQoKSB7CiAgICBpZiAoIXRoaXMuc3RyYXRlZ3kubW91bnRlZCkgewogICAgICByZXR1cm4gdGhpcy5mZXRjaFVzZXJPbmNlKCk7CiAgICB9CgogICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLnN0cmF0ZWd5Lm1vdW50ZWQoLi4uYXJndW1lbnRzKSkuY2F0Y2goZXJyb3IgPT4gewogICAgICB0aGlzLmNhbGxPbkVycm9yKGVycm9yLCB7CiAgICAgICAgbWV0aG9kOiAnbW91bnRlZCcKICAgICAgfSk7CiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CiAgICB9KTsKICB9CgogIGxvZ2luV2l0aChuYW1lLCAuLi5hcmdzKSB7CiAgICByZXR1cm4gdGhpcy5zZXRTdHJhdGVneShuYW1lKS50aGVuKCgpID0+IHRoaXMubG9naW4oLi4uYXJncykpOwogIH0KCiAgbG9naW4oKSB7CiAgICBpZiAoIXRoaXMuc3RyYXRlZ3kubG9naW4pIHsKICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwogICAgfQoKICAgIHJldHVybiB0aGlzLndyYXBMb2dpbih0aGlzLnN0cmF0ZWd5LmxvZ2luKC4uLmFyZ3VtZW50cykpLmNhdGNoKGVycm9yID0+IHsKICAgICAgdGhpcy5jYWxsT25FcnJvcihlcnJvciwgewogICAgICAgIG1ldGhvZDogJ2xvZ2luJwogICAgICB9KTsKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgIH0pOwogIH0KCiAgZmV0Y2hVc2VyKCkgewogICAgaWYgKCF0aGlzLnN0cmF0ZWd5LmZldGNoVXNlcikgewogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICB9CgogICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLnN0cmF0ZWd5LmZldGNoVXNlciguLi5hcmd1bWVudHMpKS5jYXRjaChlcnJvciA9PiB7CiAgICAgIHRoaXMuY2FsbE9uRXJyb3IoZXJyb3IsIHsKICAgICAgICBtZXRob2Q6ICdmZXRjaFVzZXInCiAgICAgIH0pOwogICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogICAgfSk7CiAgfQoKICBsb2dvdXQoKSB7CiAgICBpZiAoIXRoaXMuc3RyYXRlZ3kubG9nb3V0KSB7CiAgICAgIHRoaXMucmVzZXQoKTsKICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwogICAgfQoKICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5zdHJhdGVneS5sb2dvdXQoLi4uYXJndW1lbnRzKSkuY2F0Y2goZXJyb3IgPT4gewogICAgICB0aGlzLmNhbGxPbkVycm9yKGVycm9yLCB7CiAgICAgICAgbWV0aG9kOiAnbG9nb3V0JwogICAgICB9KTsKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgIH0pOwogIH0KCiAgc2V0VXNlclRva2VuKHRva2VuKSB7CiAgICBpZiAoIXRoaXMuc3RyYXRlZ3kuc2V0VXNlclRva2VuKSB7CiAgICAgIHRoaXMuc2V0VG9rZW4odGhpcy5zdHJhdGVneS5uYW1lLCB0b2tlbik7CiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsKICAgIH0KCiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuc3RyYXRlZ3kuc2V0VXNlclRva2VuKHRva2VuKSkuY2F0Y2goZXJyb3IgPT4gewogICAgICB0aGlzLmNhbGxPbkVycm9yKGVycm9yLCB7CiAgICAgICAgbWV0aG9kOiAnc2V0VXNlclRva2VuJwogICAgICB9KTsKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgIH0pOwogIH0KCiAgcmVzZXQoKSB7CiAgICBpZiAoIXRoaXMuc3RyYXRlZ3kucmVzZXQpIHsKICAgICAgdGhpcy5zZXRVc2VyKGZhbHNlKTsKICAgICAgdGhpcy5zZXRUb2tlbih0aGlzLiRzdGF0ZS5zdHJhdGVneSwgZmFsc2UpOwogICAgICB0aGlzLnNldFJlZnJlc2hUb2tlbih0aGlzLiRzdGF0ZS5zdHJhdGVneSwgZmFsc2UpOwogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICB9CgogICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLnN0cmF0ZWd5LnJlc2V0KC4uLmFyZ3VtZW50cykpLmNhdGNoKGVycm9yID0+IHsKICAgICAgdGhpcy5jYWxsT25FcnJvcihlcnJvciwgewogICAgICAgIG1ldGhvZDogJ3Jlc2V0JwogICAgICB9KTsKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgIH0pOwogIH0gLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gVG9rZW4gaGVscGVycwogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCiAgZ2V0VG9rZW4oc3RyYXRlZ3kpIHsKICAgIGNvbnN0IF9rZXkgPSB0aGlzLm9wdGlvbnMudG9rZW4ucHJlZml4ICsgc3RyYXRlZ3k7CgogICAgcmV0dXJuIHRoaXMuJHN0b3JhZ2UuZ2V0VW5pdmVyc2FsKF9rZXkpOwogIH0KCiAgc2V0VG9rZW4oc3RyYXRlZ3ksIHRva2VuKSB7CiAgICBjb25zdCBfa2V5ID0gdGhpcy5vcHRpb25zLnRva2VuLnByZWZpeCArIHN0cmF0ZWd5OwoKICAgIHJldHVybiB0aGlzLiRzdG9yYWdlLnNldFVuaXZlcnNhbChfa2V5LCB0b2tlbik7CiAgfQoKICBzeW5jVG9rZW4oc3RyYXRlZ3kpIHsKICAgIGNvbnN0IF9rZXkgPSB0aGlzLm9wdGlvbnMudG9rZW4ucHJlZml4ICsgc3RyYXRlZ3k7CgogICAgcmV0dXJuIHRoaXMuJHN0b3JhZ2Uuc3luY1VuaXZlcnNhbChfa2V5KTsKICB9IC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIC8vIFJlZnJlc2ggdG9rZW4gaGVscGVycwogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCiAgZ2V0UmVmcmVzaFRva2VuKHN0cmF0ZWd5KSB7CiAgICBjb25zdCBfa2V5ID0gdGhpcy5vcHRpb25zLnJlZnJlc2hfdG9rZW4ucHJlZml4ICsgc3RyYXRlZ3k7CgogICAgcmV0dXJuIHRoaXMuJHN0b3JhZ2UuZ2V0VW5pdmVyc2FsKF9rZXkpOwogIH0KCiAgc2V0UmVmcmVzaFRva2VuKHN0cmF0ZWd5LCByZWZyZXNoVG9rZW4pIHsKICAgIGNvbnN0IF9rZXkgPSB0aGlzLm9wdGlvbnMucmVmcmVzaF90b2tlbi5wcmVmaXggKyBzdHJhdGVneTsKCiAgICByZXR1cm4gdGhpcy4kc3RvcmFnZS5zZXRVbml2ZXJzYWwoX2tleSwgcmVmcmVzaFRva2VuKTsKICB9CgogIHN5bmNSZWZyZXNoVG9rZW4oc3RyYXRlZ3kpIHsKICAgIGNvbnN0IF9rZXkgPSB0aGlzLm9wdGlvbnMucmVmcmVzaF90b2tlbi5wcmVmaXggKyBzdHJhdGVneTsKCiAgICByZXR1cm4gdGhpcy4kc3RvcmFnZS5zeW5jVW5pdmVyc2FsKF9rZXkpOwogIH0gLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gVXNlciBoZWxwZXJzCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgoKICBnZXQgdXNlcigpIHsKICAgIHJldHVybiB0aGlzLiRzdGF0ZS51c2VyOwogIH0KCiAgZ2V0IGxvZ2dlZEluKCkgewogICAgcmV0dXJuIHRoaXMuJHN0YXRlLmxvZ2dlZEluOwogIH0KCiAgZmV0Y2hVc2VyT25jZSgpIHsKICAgIGlmICghdGhpcy4kc3RhdGUudXNlcikgewogICAgICByZXR1cm4gdGhpcy5mZXRjaFVzZXIoLi4uYXJndW1lbnRzKTsKICAgIH0KCiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgfQoKICBzZXRVc2VyKHVzZXIpIHsKICAgIHRoaXMuJHN0b3JhZ2Uuc2V0U3RhdGUoJ3VzZXInLCB1c2VyKTsKICAgIHRoaXMuJHN0b3JhZ2Uuc2V0U3RhdGUoJ2xvZ2dlZEluJywgQm9vbGVhbih1c2VyKSk7CiAgfSAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAvLyBVdGlscwogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCiAgZ2V0IGJ1c3koKSB7CiAgICByZXR1cm4gdGhpcy4kc3RvcmFnZS5nZXRTdGF0ZSgnYnVzeScpOwogIH0KCiAgcmVxdWVzdChlbmRwb2ludCwgZGVmYXVsdHMpIHsKICAgIGNvbnN0IF9lbmRwb2ludCA9IHR5cGVvZiBkZWZhdWx0cyA9PT0gJ29iamVjdCcgPyBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0cywgZW5kcG9pbnQpIDogZW5kcG9pbnQ7CgogICAgaWYgKCF0aGlzLmN0eC5hcHAuJGF4aW9zKSB7CiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tBVVRIXSBhZGQgdGhlIEBudXh0anMvYXhpb3MgbW9kdWxlIHRvIG51eHQuY29uZmlnIGZpbGUnKTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHJldHVybiB0aGlzLmN0eC5hcHAuJGF4aW9zLnJlcXVlc3QoX2VuZHBvaW50KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgaWYgKF9lbmRwb2ludC5wcm9wZXJ0eU5hbWUpIHsKICAgICAgICByZXR1cm4gZ2V0UHJvcChyZXNwb25zZS5kYXRhLCBfZW5kcG9pbnQucHJvcGVydHlOYW1lKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKICAgICAgfQogICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAvLyBDYWxsIGFsbCBlcnJvciBoYW5kbGVycwogICAgICB0aGlzLmNhbGxPbkVycm9yKGVycm9yLCB7CiAgICAgICAgbWV0aG9kOiAncmVxdWVzdCcKICAgICAgfSk7IC8vIFRocm93IGVycm9yCgogICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogICAgfSk7CiAgfQoKICByZXF1ZXN0V2l0aChzdHJhdGVneSwgZW5kcG9pbnQsIGRlZmF1bHRzKSB7CiAgICBjb25zdCB0b2tlbiA9IHRoaXMuZ2V0VG9rZW4oc3RyYXRlZ3kpOwoKICAgIGNvbnN0IF9lbmRwb2ludCA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRzLCBlbmRwb2ludCk7CgogICAgY29uc3QgdG9rZW5OYW1lID0gdGhpcy5zdHJhdGVnaWVzW3N0cmF0ZWd5XS5vcHRpb25zLnRva2VuTmFtZSB8fCAnQXV0aG9yaXphdGlvbic7CgogICAgaWYgKCFfZW5kcG9pbnQuaGVhZGVycykgewogICAgICBfZW5kcG9pbnQuaGVhZGVycyA9IHt9OwogICAgfQoKICAgIGlmICghX2VuZHBvaW50LmhlYWRlcnNbdG9rZW5OYW1lXSAmJiBpc1NldCh0b2tlbikgJiYgdG9rZW4pIHsKICAgICAgX2VuZHBvaW50LmhlYWRlcnNbdG9rZW5OYW1lXSA9IHRva2VuOwogICAgfQoKICAgIHJldHVybiB0aGlzLnJlcXVlc3QoX2VuZHBvaW50KTsKICB9CgogIHdyYXBMb2dpbihwcm9taXNlKSB7CiAgICB0aGlzLiRzdG9yYWdlLnNldFN0YXRlKCdidXN5JywgdHJ1ZSk7CiAgICB0aGlzLmVycm9yID0gbnVsbDsKICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocHJvbWlzZSkudGhlbigoKSA9PiB7CiAgICAgIHRoaXMuJHN0b3JhZ2Uuc2V0U3RhdGUoJ2J1c3knLCBmYWxzZSk7CiAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgIHRoaXMuJHN0b3JhZ2Uuc2V0U3RhdGUoJ2J1c3knLCBmYWxzZSk7CiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CiAgICB9KTsKICB9CgogIG9uRXJyb3IobGlzdGVuZXIpIHsKICAgIHRoaXMuX2Vycm9yTGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpOwogIH0KCiAgY2FsbE9uRXJyb3IoZXJyb3IsIHBheWxvYWQgPSB7fSkgewogICAgdGhpcy5lcnJvciA9IGVycm9yOwoKICAgIGZvciAoY29uc3QgZm4gb2YgdGhpcy5fZXJyb3JMaXN0ZW5lcnMpIHsKICAgICAgZm4oZXJyb3IsIHBheWxvYWQpOwogICAgfQogIH0KCiAgcmVkaXJlY3QobmFtZSwgbm9Sb3V0ZXIgPSBmYWxzZSkgewogICAgaWYgKCF0aGlzLm9wdGlvbnMucmVkaXJlY3QpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGNvbnN0IGZyb20gPSB0aGlzLm9wdGlvbnMuZnVsbFBhdGhSZWRpcmVjdCA/IHRoaXMuY3R4LnJvdXRlLmZ1bGxQYXRoIDogdGhpcy5jdHgucm91dGUucGF0aDsKICAgIGxldCB0byA9IHRoaXMub3B0aW9ucy5yZWRpcmVjdFtuYW1lXTsKCiAgICBpZiAoIXRvKSB7CiAgICAgIHJldHVybjsKICAgIH0gLy8gQXBwbHkgcmV3cml0ZXMKCgogICAgaWYgKHRoaXMub3B0aW9ucy5yZXdyaXRlUmVkaXJlY3RzKSB7CiAgICAgIGlmIChuYW1lID09PSAnbG9naW4nICYmIGlzUmVsYXRpdmVVUkwoZnJvbSkgJiYgIWlzU2FtZVVSTCh0bywgZnJvbSkpIHsKICAgICAgICB0aGlzLiRzdG9yYWdlLnNldFVuaXZlcnNhbCgncmVkaXJlY3QnLCBmcm9tKTsKICAgICAgfQoKICAgICAgaWYgKG5hbWUgPT09ICdob21lJykgewogICAgICAgIGNvbnN0IHJlZGlyZWN0ID0gdGhpcy4kc3RvcmFnZS5nZXRVbml2ZXJzYWwoJ3JlZGlyZWN0Jyk7CiAgICAgICAgdGhpcy4kc3RvcmFnZS5zZXRVbml2ZXJzYWwoJ3JlZGlyZWN0JywgbnVsbCk7CgogICAgICAgIGlmIChpc1JlbGF0aXZlVVJMKHJlZGlyZWN0KSkgewogICAgICAgICAgdG8gPSByZWRpcmVjdDsKICAgICAgICB9CiAgICAgIH0KICAgIH0gLy8gQ2FsbCBvblJlZGlyZWN0IGhvb2sKCgogICAgdG8gPSB0aGlzLmNhbGxPblJlZGlyZWN0KHRvLCBmcm9tKSB8fCB0bzsgLy8gUHJldmVudCBpbmZpbml0eSByZWRpcmVjdHMKCiAgICBpZiAoaXNTYW1lVVJMKHRvLCBmcm9tKSkgewogICAgICByZXR1cm47CiAgICB9CgogICAgaWYgKHByb2Nlc3MuY2xpZW50KSB7CiAgICAgIGlmIChub1JvdXRlcikgewogICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHRvKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmN0eC5yZWRpcmVjdCh0bywgdGhpcy5jdHgucXVlcnkpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICB0aGlzLmN0eC5yZWRpcmVjdCh0bywgdGhpcy5jdHgucXVlcnkpOwogICAgfQogIH0KCiAgb25SZWRpcmVjdChsaXN0ZW5lcikgewogICAgdGhpcy5fcmVkaXJlY3RMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7CiAgfQoKICBjYWxsT25SZWRpcmVjdCh0bywgZnJvbSkgewogICAgZm9yIChjb25zdCBmbiBvZiB0aGlzLl9yZWRpcmVjdExpc3RlbmVycykgewogICAgICB0byA9IGZuKHRvLCBmcm9tKSB8fCB0bzsKICAgIH0KCiAgICByZXR1cm4gdG87CiAgfQoKICBoYXNTY29wZShzY29wZSkgewogICAgY29uc3QgdXNlclNjb3BlcyA9IHRoaXMuJHN0YXRlLnVzZXIgJiYgZ2V0UHJvcCh0aGlzLiRzdGF0ZS51c2VyLCB0aGlzLm9wdGlvbnMuc2NvcGVLZXkpOwoKICAgIGlmICghdXNlclNjb3BlcykgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgaWYgKEFycmF5LmlzQXJyYXkodXNlclNjb3BlcykpIHsKICAgICAgcmV0dXJuIHVzZXJTY29wZXMuaW5jbHVkZXMoc2NvcGUpOwogICAgfQoKICAgIHJldHVybiBCb29sZWFuKGdldFByb3AodXNlclNjb3Blcywgc2NvcGUpKTsKICB9Cgp9"},{"version":3,"sources":["/Users/pro/Documents/WebWork/GitHub/Callanna-iBlog/.nuxt/auth/auth.js"],"names":["Storage","routeOption","isRelativeURL","isSet","isSameURL","getProp","Auth","constructor","ctx","options","strategies","_errorListeners","_redirectListeners","initialState","user","loggedIn","storage","$storage","$state","state","init","resetOnError","onError","args","reset","syncUniversal","defaultStrategy","strategy","setUniversal","Promise","resolve","mounted","error","callOnError","process","client","watchLoggedIn","watchState","route","redirect","_state_warn_shown","console","warn","getState","key","_get_state_warn_shown","registerStrategy","name","setStrategy","getUniversal","fetchUserOnce","arguments","catch","method","reject","loginWith","then","login","wrapLogin","fetchUser","logout","setUserToken","token","setToken","setUser","setRefreshToken","getToken","_key","prefix","syncToken","getRefreshToken","refresh_token","refreshToken","syncRefreshToken","setState","Boolean","busy","request","endpoint","defaults","_endpoint","Object","assign","app","$axios","response","propertyName","data","requestWith","tokenName","headers","promise","listener","push","payload","fn","noRouter","from","fullPathRedirect","fullPath","path","to","rewriteRedirects","callOnRedirect","window","location","replace","query","onRedirect","hasScope","scope","userScopes","scopeKey","Array","isArray","includes"],"mappings":"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","sourcesContent":["import Storage from './storage'\nimport { routeOption, isRelativeURL, isSet, isSameURL, getProp } from './utilities'\n\nexport default class Auth {\n  constructor (ctx, options) {\n    this.ctx = ctx\n    this.options = options\n\n    // Strategies\n    this.strategies = {}\n\n    // Error listeners\n    this._errorListeners = []\n\n    // Redirect listeners\n    this._redirectListeners = []\n\n    // Storage & State\n    options.initialState = { user: null, loggedIn: false }\n    const storage = new Storage(ctx, options)\n\n    this.$storage = storage\n    this.$state = storage.state\n  }\n\n  async init () {\n    // Reset on error\n    if (this.options.resetOnError) {\n      this.onError((...args) => {\n        if (typeof (this.options.resetOnError) !== 'function' || this.options.resetOnError(...args)) {\n          this.reset()\n        }\n      })\n    }\n\n    // Restore strategy\n    this.$storage.syncUniversal('strategy', this.options.defaultStrategy)\n\n    // Set default strategy if current one is invalid\n    if (!this.strategy) {\n      this.$storage.setUniversal('strategy', this.options.defaultStrategy)\n\n      // Give up if still invalid\n      if (!this.strategy) {\n        return Promise.resolve()\n      }\n    }\n\n    try {\n      // Call mounted for active strategy on initial load\n      await this.mounted()\n    } catch (error) {\n      this.callOnError(error)\n    } finally {\n      // Watch for loggedIn changes only in client side\n      if (process.client && this.options.watchLoggedIn) {\n        this.$storage.watchState('loggedIn', loggedIn => {\n          if (!routeOption(this.ctx.route, 'auth', false)) {\n            this.redirect(loggedIn ? 'home' : 'logout')\n          }\n        })\n      }\n    }\n  }\n\n  // Backward compatibility\n  get state () {\n    if (!this._state_warn_shown) {\n      this._state_warn_shown = true\n      // eslint-disable-next-line no-console\n      console.warn('[AUTH] $auth.state is deprecated. Please use $auth.$state or top level props like $auth.loggedIn')\n    }\n\n    return this.$state\n  }\n\n  getState (key) {\n    if (!this._get_state_warn_shown) {\n      this._get_state_warn_shown = true\n      // eslint-disable-next-line no-console\n      console.warn('[AUTH] $auth.getState is deprecated. Please use $auth.$storage.getState() or top level props like $auth.loggedIn')\n    }\n\n    return this.$storage.getState(key)\n  }\n\n  // ---------------------------------------------------------------\n  // Strategy and Scheme\n  // ---------------------------------------------------------------\n\n  get strategy () {\n    return this.strategies[this.$state.strategy]\n  }\n\n  registerStrategy (name, strategy) {\n    this.strategies[name] = strategy\n  }\n\n  setStrategy (name) {\n    if (name === this.$storage.getUniversal('strategy')) {\n      return Promise.resolve()\n    }\n\n    // Set strategy\n    this.$storage.setUniversal('strategy', name)\n\n    // Call mounted hook on active strategy\n    return this.mounted()\n  }\n\n  mounted () {\n    if (!this.strategy.mounted) {\n      return this.fetchUserOnce()\n    }\n\n    return Promise.resolve(this.strategy.mounted(...arguments)).catch(error => {\n      this.callOnError(error, { method: 'mounted' })\n      return Promise.reject(error)\n    })\n  }\n\n  loginWith (name, ...args) {\n    return this.setStrategy(name).then(() => this.login(...args))\n  }\n\n  login () {\n    if (!this.strategy.login) {\n      return Promise.resolve()\n    }\n\n    return this.wrapLogin(this.strategy.login(...arguments)).catch(error => {\n      this.callOnError(error, { method: 'login' })\n      return Promise.reject(error)\n    })\n  }\n\n  fetchUser () {\n    if (!this.strategy.fetchUser) {\n      return Promise.resolve()\n    }\n\n    return Promise.resolve(this.strategy.fetchUser(...arguments)).catch(error => {\n      this.callOnError(error, { method: 'fetchUser' })\n      return Promise.reject(error)\n    })\n  }\n\n  logout () {\n    if (!this.strategy.logout) {\n      this.reset()\n      return Promise.resolve()\n    }\n\n    return Promise.resolve(this.strategy.logout(...arguments)).catch(error => {\n      this.callOnError(error, { method: 'logout' })\n      return Promise.reject(error)\n    })\n  }\n\n  setUserToken (token) {\n    if (!this.strategy.setUserToken) {\n      this.setToken(this.strategy.name, token)\n      return Promise.resolve()\n    }\n\n    return Promise.resolve(this.strategy.setUserToken(token)).catch(error => {\n      this.callOnError(error, { method: 'setUserToken' })\n      return Promise.reject(error)\n    })\n  }\n\n  reset () {\n    if (!this.strategy.reset) {\n      this.setUser(false)\n      this.setToken(this.$state.strategy, false)\n      this.setRefreshToken(this.$state.strategy, false)\n      return Promise.resolve()\n    }\n\n    return Promise.resolve(this.strategy.reset(...arguments)).catch(error => {\n      this.callOnError(error, { method: 'reset' })\n      return Promise.reject(error)\n    })\n  }\n\n  // ---------------------------------------------------------------\n  // Token helpers\n  // ---------------------------------------------------------------\n\n  getToken (strategy) {\n    const _key = this.options.token.prefix + strategy\n\n    return this.$storage.getUniversal(_key)\n  }\n\n  setToken (strategy, token) {\n    const _key = this.options.token.prefix + strategy\n\n    return this.$storage.setUniversal(_key, token)\n  }\n\n  syncToken (strategy) {\n    const _key = this.options.token.prefix + strategy\n\n    return this.$storage.syncUniversal(_key)\n  }\n\n  // ---------------------------------------------------------------\n  // Refresh token helpers\n  // ---------------------------------------------------------------\n\n  getRefreshToken (strategy) {\n    const _key = this.options.refresh_token.prefix + strategy\n\n    return this.$storage.getUniversal(_key)\n  }\n\n  setRefreshToken (strategy, refreshToken) {\n    const _key = this.options.refresh_token.prefix + strategy\n\n    return this.$storage.setUniversal(_key, refreshToken)\n  }\n\n  syncRefreshToken (strategy) {\n    const _key = this.options.refresh_token.prefix + strategy\n\n    return this.$storage.syncUniversal(_key)\n  }\n\n  // ---------------------------------------------------------------\n  // User helpers\n  // ---------------------------------------------------------------\n\n  get user () {\n    return this.$state.user\n  }\n\n  get loggedIn () {\n    return this.$state.loggedIn\n  }\n\n  fetchUserOnce () {\n    if (!this.$state.user) {\n      return this.fetchUser(...arguments)\n    }\n    return Promise.resolve()\n  }\n\n  setUser (user) {\n    this.$storage.setState('user', user)\n    this.$storage.setState('loggedIn', Boolean(user))\n  }\n\n  // ---------------------------------------------------------------\n  // Utils\n  // ---------------------------------------------------------------\n\n  get busy () {\n    return this.$storage.getState('busy')\n  }\n\n  request (endpoint, defaults) {\n    const _endpoint =\n      typeof defaults === 'object'\n        ? Object.assign({}, defaults, endpoint)\n        : endpoint\n\n    if (!this.ctx.app.$axios) {\n      // eslint-disable-next-line no-console\n      console.error('[AUTH] add the @nuxtjs/axios module to nuxt.config file')\n      return\n    }\n\n    return this.ctx.app.$axios\n      .request(_endpoint)\n      .then(response => {\n        if (_endpoint.propertyName) {\n          return getProp(response.data, _endpoint.propertyName)\n        } else {\n          return response.data\n        }\n      })\n      .catch(error => {\n        // Call all error handlers\n        this.callOnError(error, { method: 'request' })\n\n        // Throw error\n        return Promise.reject(error)\n      })\n  }\n\n  requestWith (strategy, endpoint, defaults) {\n    const token = this.getToken(strategy)\n\n    const _endpoint = Object.assign({}, defaults, endpoint)\n\n    const tokenName = this.strategies[strategy].options.tokenName || 'Authorization'\n    if (!_endpoint.headers) {\n      _endpoint.headers = {}\n    }\n    if (!_endpoint.headers[tokenName] && isSet(token) && token) {\n      _endpoint.headers[tokenName] = token\n    }\n\n    return this.request(_endpoint)\n  }\n\n  wrapLogin (promise) {\n    this.$storage.setState('busy', true)\n    this.error = null\n\n    return Promise.resolve(promise)\n      .then(() => {\n        this.$storage.setState('busy', false)\n      })\n      .catch(error => {\n        this.$storage.setState('busy', false)\n        return Promise.reject(error)\n      })\n  }\n\n  onError (listener) {\n    this._errorListeners.push(listener)\n  }\n\n  callOnError (error, payload = {}) {\n    this.error = error\n\n    for (const fn of this._errorListeners) {\n      fn(error, payload)\n    }\n  }\n\n  redirect (name, noRouter = false) {\n    if (!this.options.redirect) {\n      return\n    }\n\n    const from = this.options.fullPathRedirect ? this.ctx.route.fullPath : this.ctx.route.path\n\n    let to = this.options.redirect[name]\n    if (!to) {\n      return\n    }\n\n    // Apply rewrites\n    if (this.options.rewriteRedirects) {\n      if (name === 'login' && isRelativeURL(from) && !isSameURL(to, from)) {\n        this.$storage.setUniversal('redirect', from)\n      }\n\n      if (name === 'home') {\n        const redirect = this.$storage.getUniversal('redirect')\n        this.$storage.setUniversal('redirect', null)\n\n        if (isRelativeURL(redirect)) {\n          to = redirect\n        }\n      }\n    }\n\n    // Call onRedirect hook\n    to = this.callOnRedirect(to, from) || to\n\n    // Prevent infinity redirects\n    if (isSameURL(to, from)) {\n      return\n    }\n\n    if (process.client) {\n      if (noRouter) {\n        window.location.replace(to)\n      } else {\n        this.ctx.redirect(to, this.ctx.query)\n      }\n    } else {\n      this.ctx.redirect(to, this.ctx.query)\n    }\n  }\n\n  onRedirect (listener) {\n    this._redirectListeners.push(listener)\n  }\n\n  callOnRedirect (to, from) {\n    for (const fn of this._redirectListeners) {\n      to = fn(to, from) || to\n    }\n    return to\n  }\n\n  hasScope (scope) {\n    const userScopes = this.$state.user && getProp(this.$state.user, this.options.scopeKey)\n\n    if (!userScopes) {\n      return false\n    }\n\n    if (Array.isArray(userScopes)) {\n      return userScopes.includes(scope)\n    }\n\n    return Boolean(getProp(userScopes, scope))\n  }\n}\n"]}]}