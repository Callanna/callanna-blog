{"remainingRequest":"/Users/pro/Documents/WebWork/GitHub/Callanna-iBlog/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/pro/Documents/WebWork/GitHub/Callanna-iBlog/.nuxt/client.js","dependencies":[{"path":"/Users/pro/Documents/WebWork/GitHub/Callanna-iBlog/.nuxt/client.js","mtime":1598700047629},{"path":"/Users/pro/Documents/WebWork/GitHub/Callanna-iBlog/node_modules/cache-loader/dist/cjs.js","mtime":1583743859870},{"path":"/Users/pro/Documents/WebWork/GitHub/Callanna-iBlog/node_modules/babel-loader/lib/index.js","mtime":1578715241550}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM3LnN5bWJvbC5hc3luYy1pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5zeW1ib2wiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIjsKaW1wb3J0IF90eXBlb2YgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYucmVnZXhwLm1hdGNoIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczcuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LmFycmF5LmZpbmQiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYuYXJyYXkuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYucHJvbWlzZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5vYmplY3QuYXNzaWduIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM3LnByb21pc2UuZmluYWxseSI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IGZldGNoIGZyb20gJ3VuZmV0Y2gnOwppbXBvcnQgbWlkZGxld2FyZSBmcm9tICcuL21pZGRsZXdhcmUuanMnOwppbXBvcnQgeyBhcHBseUFzeW5jRGF0YSwgcHJvbWlzaWZ5LCBtaWRkbGV3YXJlU2VyaWVzLCBzYW5pdGl6ZUNvbXBvbmVudCwgcmVzb2x2ZVJvdXRlQ29tcG9uZW50cywgZ2V0TWF0Y2hlZENvbXBvbmVudHMsIGdldE1hdGNoZWRDb21wb25lbnRzSW5zdGFuY2VzLCBmbGF0TWFwQ29tcG9uZW50cywgc2V0Q29udGV4dCwgZ2V0TG9jYXRpb24sIGNvbXBpbGUsIGdldFF1ZXJ5RGlmZiwgZ2xvYmFsSGFuZGxlRXJyb3IgfSBmcm9tICcuL3V0aWxzLmpzJzsKaW1wb3J0IHsgY3JlYXRlQXBwLCBOdXh0RXJyb3IgfSBmcm9tICcuL2luZGV4LmpzJzsKaW1wb3J0IE51eHRMaW5rIGZyb20gJy4vY29tcG9uZW50cy9udXh0LWxpbmsuY2xpZW50LmpzJzsgLy8gc2hvdWxkIGJlIGluY2x1ZGVkIGFmdGVyIC4vaW5kZXguanMKLy8gQ29tcG9uZW50OiA8TnV4dExpbms+CgpWdWUuY29tcG9uZW50KE51eHRMaW5rLm5hbWUsIE51eHRMaW5rKTsKVnVlLmNvbXBvbmVudCgnTkxpbmsnLCBOdXh0TGluayk7CgppZiAoIWdsb2JhbC5mZXRjaCkgewogIGdsb2JhbC5mZXRjaCA9IGZldGNoOwp9IC8vIEdsb2JhbCBzaGFyZWQgcmVmZXJlbmNlcwoKCnZhciBfbGFzdFBhdGhzID0gW107CnZhciBhcHA7CnZhciByb3V0ZXI7CnZhciBzdG9yZTsgLy8gVHJ5IHRvIHJlaHlkcmF0ZSBTU1IgZGF0YSBmcm9tIHdpbmRvdwoKdmFyIE5VWFQgPSB3aW5kb3cuX19OVVhUX18gfHwge307Ck9iamVjdC5hc3NpZ24oVnVlLmNvbmZpZywgewogICJzaWxlbnQiOiBmYWxzZSwKICAicGVyZm9ybWFuY2UiOiB0cnVlCn0pOwp2YXIgbG9ncyA9IE5VWFQubG9ncyB8fCBbXTsKCmlmIChsb2dzLmxlbmd0aCA+IDApIHsKICB2YXIgc3NyTG9nU3lsZSA9ICdiYWNrZ3JvdW5kOiAjMkU0OTVFO2JvcmRlci1yYWRpdXM6IDAuNWVtO2NvbG9yOiB3aGl0ZTtmb250LXdlaWdodDogYm9sZDtwYWRkaW5nOiAycHggMC41ZW07JzsKICBjb25zb2xlLmdyb3VwICYmIGNvbnNvbGUuZ3JvdXAoJyVjTnV4dCBTU1InLCBzc3JMb2dTeWxlKTsKICBsb2dzLmZvckVhY2goZnVuY3Rpb24gKGxvZ09iaikgewogICAgcmV0dXJuIChjb25zb2xlW2xvZ09iai50eXBlXSB8fCBjb25zb2xlLmxvZykuYXBwbHkodm9pZCAwLCBfdG9Db25zdW1hYmxlQXJyYXkobG9nT2JqLmFyZ3MpKTsKICB9KTsKICBkZWxldGUgTlVYVC5sb2dzOwogIGNvbnNvbGUuZ3JvdXBFbmQgJiYgY29uc29sZS5ncm91cEVuZCgpOwp9IC8vIFNldHVwIGdsb2JhbCBWdWUgZXJyb3IgaGFuZGxlcgoKCmlmICghVnVlLmNvbmZpZy4kbnV4dCkgewogIHZhciBkZWZhdWx0RXJyb3JIYW5kbGVyID0gVnVlLmNvbmZpZy5lcnJvckhhbmRsZXI7CgogIFZ1ZS5jb25maWcuZXJyb3JIYW5kbGVyID0gZnVuY3Rpb24gKGVyciwgdm0sIGluZm8pIHsKICAgIC8vIENhbGwgb3RoZXIgaGFuZGxlciBpZiBleGlzdAogICAgdmFyIGhhbmRsZWQgPSBudWxsOwoKICAgIGlmICh0eXBlb2YgZGVmYXVsdEVycm9ySGFuZGxlciA9PT0gJ2Z1bmN0aW9uJykgewogICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgcmVzdCA9IG5ldyBBcnJheShfbGVuID4gMyA/IF9sZW4gLSAzIDogMCksIF9rZXkgPSAzOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgICAgcmVzdFtfa2V5IC0gM10gPSBhcmd1bWVudHNbX2tleV07CiAgICAgIH0KCiAgICAgIGhhbmRsZWQgPSBkZWZhdWx0RXJyb3JIYW5kbGVyLmFwcGx5KHZvaWQgMCwgW2Vyciwgdm0sIGluZm9dLmNvbmNhdChyZXN0KSk7CiAgICB9CgogICAgaWYgKGhhbmRsZWQgPT09IHRydWUpIHsKICAgICAgcmV0dXJuIGhhbmRsZWQ7CiAgICB9CgogICAgaWYgKHZtICYmIHZtLiRyb290KSB7CiAgICAgIHZhciBudXh0QXBwID0gT2JqZWN0LmtleXMoVnVlLmNvbmZpZy4kbnV4dCkuZmluZChmdW5jdGlvbiAobnV4dEluc3RhbmNlKSB7CiAgICAgICAgcmV0dXJuIHZtLiRyb290W251eHRJbnN0YW5jZV07CiAgICAgIH0pOyAvLyBTaG93IE51eHQgRXJyb3IgUGFnZQoKICAgICAgaWYgKG51eHRBcHAgJiYgdm0uJHJvb3RbbnV4dEFwcF0uZXJyb3IgJiYgaW5mbyAhPT0gJ3JlbmRlciBmdW5jdGlvbicpIHsKICAgICAgICB2bS4kcm9vdFtudXh0QXBwXS5lcnJvcihlcnIpOwogICAgICB9CiAgICB9CgogICAgaWYgKHR5cGVvZiBkZWZhdWx0RXJyb3JIYW5kbGVyID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIHJldHVybiBoYW5kbGVkOwogICAgfSAvLyBMb2cgdG8gY29uc29sZQoKCiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgICBjb25zb2xlLmVycm9yKGVycik7CiAgICB9IGVsc2UgewogICAgICBjb25zb2xlLmVycm9yKGVyci5tZXNzYWdlIHx8IGVycik7CiAgICB9CiAgfTsKCiAgVnVlLmNvbmZpZy4kbnV4dCA9IHt9Owp9CgpWdWUuY29uZmlnLiRudXh0LiRudXh0ID0gdHJ1ZTsKdmFyIGVycm9ySGFuZGxlciA9IFZ1ZS5jb25maWcuZXJyb3JIYW5kbGVyIHx8IGNvbnNvbGUuZXJyb3I7IC8vIENyZWF0ZSBhbmQgbW91bnQgQXBwCgpjcmVhdGVBcHAoKS50aGVuKG1vdW50QXBwKS5jYXRjaChlcnJvckhhbmRsZXIpOwoKZnVuY3Rpb24gY29tcG9uZW50T3B0aW9uKGNvbXBvbmVudCwga2V5KSB7CiAgaWYgKCFjb21wb25lbnQgfHwgIWNvbXBvbmVudC5vcHRpb25zIHx8ICFjb21wb25lbnQub3B0aW9uc1trZXldKSB7CiAgICByZXR1cm4ge307CiAgfQoKICB2YXIgb3B0aW9uID0gY29tcG9uZW50Lm9wdGlvbnNba2V5XTsKCiAgaWYgKHR5cGVvZiBvcHRpb24gPT09ICdmdW5jdGlvbicpIHsKICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuMiA+IDIgPyBfbGVuMiAtIDIgOiAwKSwgX2tleTIgPSAyOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7CiAgICAgIGFyZ3NbX2tleTIgLSAyXSA9IGFyZ3VtZW50c1tfa2V5Ml07CiAgICB9CgogICAgcmV0dXJuIG9wdGlvbi5hcHBseSh2b2lkIDAsIGFyZ3MpOwogIH0KCiAgcmV0dXJuIG9wdGlvbjsKfQoKZnVuY3Rpb24gbWFwVHJhbnNpdGlvbnMoQ29tcG9uZW50cywgdG8sIGZyb20pIHsKICB2YXIgY29tcG9uZW50VHJhbnNpdGlvbnMgPSBmdW5jdGlvbiBjb21wb25lbnRUcmFuc2l0aW9ucyhjb21wb25lbnQpIHsKICAgIHZhciB0cmFuc2l0aW9uID0gY29tcG9uZW50T3B0aW9uKGNvbXBvbmVudCwgJ3RyYW5zaXRpb24nLCB0bywgZnJvbSkgfHwge307CiAgICByZXR1cm4gdHlwZW9mIHRyYW5zaXRpb24gPT09ICdzdHJpbmcnID8gewogICAgICBuYW1lOiB0cmFuc2l0aW9uCiAgICB9IDogdHJhbnNpdGlvbjsKICB9OwoKICByZXR1cm4gQ29tcG9uZW50cy5tYXAoZnVuY3Rpb24gKENvbXBvbmVudCkgewogICAgLy8gQ2xvbmUgb3JpZ2luYWwgb2JqZWN0IHRvIHByZXZlbnQgb3ZlcnJpZGVzCiAgICB2YXIgdHJhbnNpdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBjb21wb25lbnRUcmFuc2l0aW9ucyhDb21wb25lbnQpKTsgLy8gQ29tYmluZSB0cmFuc2l0aW9ucyAmIHByZWZlciBgbGVhdmVgIHRyYW5zaXRpb25zIG9mICdmcm9tJyByb3V0ZQoKICAgIGlmIChmcm9tICYmIGZyb20ubWF0Y2hlZC5sZW5ndGggJiYgZnJvbS5tYXRjaGVkWzBdLmNvbXBvbmVudHMuZGVmYXVsdCkgewogICAgICB2YXIgZnJvbVRyYW5zaXRpb25zID0gY29tcG9uZW50VHJhbnNpdGlvbnMoZnJvbS5tYXRjaGVkWzBdLmNvbXBvbmVudHMuZGVmYXVsdCk7CiAgICAgIE9iamVjdC5rZXlzKGZyb21UcmFuc2l0aW9ucykuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICByZXR1cm4gZnJvbVRyYW5zaXRpb25zW2tleV0gJiYga2V5LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2xlYXZlJyk7CiAgICAgIH0pLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIHRyYW5zaXRpb25zW2tleV0gPSBmcm9tVHJhbnNpdGlvbnNba2V5XTsKICAgICAgfSk7CiAgICB9CgogICAgcmV0dXJuIHRyYW5zaXRpb25zOwogIH0pOwp9CgpmdW5jdGlvbiBsb2FkQXN5bmNDb21wb25lbnRzKF94LCBfeDIsIF94MykgewogIHJldHVybiBfbG9hZEFzeW5jQ29tcG9uZW50cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfbG9hZEFzeW5jQ29tcG9uZW50cygpIHsKICBfbG9hZEFzeW5jQ29tcG9uZW50cyA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMyh0bywgZnJvbSwgbmV4dCkgewogICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgdmFyIENvbXBvbmVudHMsIHN0YXJ0TG9hZGVyLCBlcnIsIHN0YXR1c0NvZGUsIG1lc3NhZ2U7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAvLyBDaGVjayBpZiByb3V0ZSBwYXRoIGNoYW5nZWQgKHRoaXMuX3BhdGhDaGFuZ2VkKSwgb25seSBpZiB0aGUgcGFnZSBpcyBub3QgYW4gZXJyb3IgKGZvciB2YWxpZGF0ZSgpKQogICAgICAgICAgICB0aGlzLl9wYXRoQ2hhbmdlZCA9IEJvb2xlYW4oYXBwLm51eHQuZXJyKSB8fCBmcm9tLnBhdGggIT09IHRvLnBhdGg7CiAgICAgICAgICAgIHRoaXMuX3F1ZXJ5Q2hhbmdlZCA9IEpTT04uc3RyaW5naWZ5KHRvLnF1ZXJ5KSAhPT0gSlNPTi5zdHJpbmdpZnkoZnJvbS5xdWVyeSk7CiAgICAgICAgICAgIHRoaXMuX2RpZmZRdWVyeSA9IHRoaXMuX3F1ZXJ5Q2hhbmdlZCA/IGdldFF1ZXJ5RGlmZih0by5xdWVyeSwgZnJvbS5xdWVyeSkgOiBbXTsKCiAgICAgICAgICAgIGlmICh0aGlzLl9wYXRoQ2hhbmdlZCAmJiB0aGlzLiRsb2FkaW5nLnN0YXJ0ICYmICF0aGlzLiRsb2FkaW5nLm1hbnVhbCkgewogICAgICAgICAgICAgIHRoaXMuJGxvYWRpbmcuc3RhcnQoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSA0OwoKICAgICAgICAgICAgaWYgKCEoIXRoaXMuX3BhdGhDaGFuZ2VkICYmIHRoaXMuX3F1ZXJ5Q2hhbmdlZCkpIHsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDExOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDg7CiAgICAgICAgICAgIHJldHVybiByZXNvbHZlUm91dGVDb21wb25lbnRzKHRvLCBmdW5jdGlvbiAoQ29tcG9uZW50LCBpbnN0YW5jZSkgewogICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBDb21wb25lbnQ6IENvbXBvbmVudCwKICAgICAgICAgICAgICAgIGluc3RhbmNlOiBpbnN0YW5jZQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgQ29tcG9uZW50cyA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAvLyBBZGQgYSBtYXJrZXIgb24gZWFjaCBjb21wb25lbnQgdGhhdCBpdCBuZWVkcyB0byByZWZyZXNoIG9yIG5vdAogICAgICAgICAgICBzdGFydExvYWRlciA9IENvbXBvbmVudHMuc29tZShmdW5jdGlvbiAoX3JlZjMpIHsKICAgICAgICAgICAgICB2YXIgQ29tcG9uZW50ID0gX3JlZjMuQ29tcG9uZW50LAogICAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IF9yZWYzLmluc3RhbmNlOwogICAgICAgICAgICAgIHZhciB3YXRjaFF1ZXJ5ID0gQ29tcG9uZW50Lm9wdGlvbnMud2F0Y2hRdWVyeTsKCiAgICAgICAgICAgICAgaWYgKHdhdGNoUXVlcnkgPT09IHRydWUpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkod2F0Y2hRdWVyeSkpIHsKICAgICAgICAgICAgICAgIHJldHVybiB3YXRjaFF1ZXJ5LnNvbWUoZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM0Ll9kaWZmUXVlcnlba2V5XTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3YXRjaFF1ZXJ5ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gd2F0Y2hRdWVyeS5hcHBseShpbnN0YW5jZSwgW3RvLnF1ZXJ5LCBmcm9tLnF1ZXJ5XSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaWYgKHN0YXJ0TG9hZGVyICYmIHRoaXMuJGxvYWRpbmcuc3RhcnQgJiYgIXRoaXMuJGxvYWRpbmcubWFudWFsKSB7CiAgICAgICAgICAgICAgdGhpcy4kbG9hZGluZy5zdGFydCgpOwogICAgICAgICAgICB9CgogICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgLy8gQ2FsbCBuZXh0KCkKICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI1OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDE0OwogICAgICAgICAgICBfY29udGV4dDMudDAgPSBfY29udGV4dDNbImNhdGNoIl0oNCk7CiAgICAgICAgICAgIGVyciA9IF9jb250ZXh0My50MCB8fCB7fTsKICAgICAgICAgICAgc3RhdHVzQ29kZSA9IGVyci5zdGF0dXNDb2RlIHx8IGVyci5zdGF0dXMgfHwgZXJyLnJlc3BvbnNlICYmIGVyci5yZXNwb25zZS5zdGF0dXMgfHwgNTAwOwogICAgICAgICAgICBtZXNzYWdlID0gZXJyLm1lc3NhZ2UgfHwgJyc7IC8vIEhhbmRsZSBjaHVuayBsb2FkaW5nIGVycm9ycwogICAgICAgICAgICAvLyBUaGlzIG1heSBiZSBkdWUgdG8gYSBuZXcgZGVwbG95bWVudCBvciBhIG5ldHdvcmsgcHJvYmxlbQoKICAgICAgICAgICAgaWYgKCEvXkxvYWRpbmcoIENTUyk/IGNodW5rIChcZCkrIGZhaWxlZFwuLy50ZXN0KG1lc3NhZ2UpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyMjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCh0cnVlCiAgICAgICAgICAgIC8qIHNraXAgY2FjaGUgKi8KICAgICAgICAgICAgKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgIHRoaXMuZXJyb3IoewogICAgICAgICAgICAgIHN0YXR1c0NvZGU6IHN0YXR1c0NvZGUsCiAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy4kbnV4dC4kZW1pdCgncm91dGVDaGFuZ2VkJywgdG8sIGZyb20sIGVycik7CiAgICAgICAgICAgIG5leHQoKTsKCiAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMywgdGhpcywgW1s0LCAxNF1dKTsKICB9KSk7CiAgcmV0dXJuIF9sb2FkQXN5bmNDb21wb25lbnRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIGFwcGx5U1NSRGF0YShDb21wb25lbnQsIHNzckRhdGEpIHsKICBpZiAoTlVYVC5zZXJ2ZXJSZW5kZXJlZCAmJiBzc3JEYXRhKSB7CiAgICBhcHBseUFzeW5jRGF0YShDb21wb25lbnQsIHNzckRhdGEpOwogIH0KCiAgQ29tcG9uZW50Ll9DdG9yID0gQ29tcG9uZW50OwogIHJldHVybiBDb21wb25lbnQ7Cn0gLy8gR2V0IG1hdGNoZWQgY29tcG9uZW50cwoKCmZ1bmN0aW9uIHJlc29sdmVDb21wb25lbnRzKHJvdXRlcikgewogIHZhciBwYXRoID0gZ2V0TG9jYXRpb24ocm91dGVyLm9wdGlvbnMuYmFzZSwgcm91dGVyLm9wdGlvbnMubW9kZSk7CiAgcmV0dXJuIGZsYXRNYXBDb21wb25lbnRzKHJvdXRlci5tYXRjaChwYXRoKSwKICAvKiNfX1BVUkVfXyovCiAgZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgIC8qI19fUFVSRV9fKi8KICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoQ29tcG9uZW50LCBfLCBtYXRjaCwga2V5LCBpbmRleCkgewogICAgICB2YXIgX0NvbXBvbmVudDsKCiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpZiAoISh0eXBlb2YgQ29tcG9uZW50ID09PSAnZnVuY3Rpb24nICYmICFDb21wb25lbnQub3B0aW9ucykpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gQ29tcG9uZW50KCk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgQ29tcG9uZW50ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAvLyBTYW5pdGl6ZSBpdCBhbmQgc2F2ZSBpdAogICAgICAgICAgICAgIF9Db21wb25lbnQgPSBhcHBseVNTUkRhdGEoc2FuaXRpemVDb21wb25lbnQoQ29tcG9uZW50KSwgTlVYVC5kYXRhID8gTlVYVC5kYXRhW2luZGV4XSA6IG51bGwpOwogICAgICAgICAgICAgIG1hdGNoLmNvbXBvbmVudHNba2V5XSA9IF9Db21wb25lbnQ7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgX0NvbXBvbmVudCk7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpOwoKICAgIHJldHVybiBmdW5jdGlvbiAoX3g0LCBfeDUsIF94NiwgX3g3LCBfeDgpIHsKICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpKTsKfQoKZnVuY3Rpb24gY2FsbE1pZGRsZXdhcmUoQ29tcG9uZW50cywgY29udGV4dCwgbGF5b3V0KSB7CiAgdmFyIF90aGlzID0gdGhpczsKCiAgdmFyIG1pZGQgPSBbXTsKICB2YXIgdW5rbm93bk1pZGRsZXdhcmUgPSBmYWxzZTsgLy8gSWYgbGF5b3V0IGlzIHVuZGVmaW5lZCwgb25seSBjYWxsIGdsb2JhbCBtaWRkbGV3YXJlCgogIGlmICh0eXBlb2YgbGF5b3V0ICE9PSAndW5kZWZpbmVkJykgewogICAgbWlkZCA9IFtdOyAvLyBFeGNsdWRlIGdsb2JhbCBtaWRkbGV3YXJlIGlmIGxheW91dCBkZWZpbmVkIChhbHJlYWR5IGNhbGxlZCBiZWZvcmUpCgogICAgbGF5b3V0ID0gc2FuaXRpemVDb21wb25lbnQobGF5b3V0KTsKCiAgICBpZiAobGF5b3V0Lm9wdGlvbnMubWlkZGxld2FyZSkgewogICAgICBtaWRkID0gbWlkZC5jb25jYXQobGF5b3V0Lm9wdGlvbnMubWlkZGxld2FyZSk7CiAgICB9CgogICAgQ29tcG9uZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChDb21wb25lbnQpIHsKICAgICAgaWYgKENvbXBvbmVudC5vcHRpb25zLm1pZGRsZXdhcmUpIHsKICAgICAgICBtaWRkID0gbWlkZC5jb25jYXQoQ29tcG9uZW50Lm9wdGlvbnMubWlkZGxld2FyZSk7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgbWlkZCA9IG1pZGQubWFwKGZ1bmN0aW9uIChuYW1lKSB7CiAgICBpZiAodHlwZW9mIG5hbWUgPT09ICdmdW5jdGlvbicpIHsKICAgICAgcmV0dXJuIG5hbWU7CiAgICB9CgogICAgaWYgKHR5cGVvZiBtaWRkbGV3YXJlW25hbWVdICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgIHVua25vd25NaWRkbGV3YXJlID0gdHJ1ZTsKCiAgICAgIF90aGlzLmVycm9yKHsKICAgICAgICBzdGF0dXNDb2RlOiA1MDAsCiAgICAgICAgbWVzc2FnZTogJ1Vua25vd24gbWlkZGxld2FyZSAnICsgbmFtZQogICAgICB9KTsKICAgIH0KCiAgICByZXR1cm4gbWlkZGxld2FyZVtuYW1lXTsKICB9KTsKCiAgaWYgKHVua25vd25NaWRkbGV3YXJlKSB7CiAgICByZXR1cm47CiAgfQoKICByZXR1cm4gbWlkZGxld2FyZVNlcmllcyhtaWRkLCBjb250ZXh0KTsKfQoKZnVuY3Rpb24gcmVuZGVyKF94OSwgX3gxMCwgX3gxMSkgewogIHJldHVybiBfcmVuZGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0gLy8gRml4IGNvbXBvbmVudHMgZm9ybWF0IGluIG1hdGNoZWQsIGl0J3MgZHVlIHRvIGNvZGUtc3BsaXR0aW5nIG9mIHZ1ZS1yb3V0ZXIKCgpmdW5jdGlvbiBfcmVuZGVyKCkgewogIF9yZW5kZXIgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQodG8sIGZyb20sIG5leHQpIHsKICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgIHZhciBmcm9tTWF0Y2hlcywgbmV4dENhbGxlZCwgX25leHQsIG1hdGNoZXMsIENvbXBvbmVudHMsIGVycm9yTGF5b3V0LCBsYXlvdXQsIF9sYXlvdXQsIGlzVmFsaWQsIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24sIF9kaWRJdGVyYXRvckVycm9yLCBfaXRlcmF0b3JFcnJvciwgX2l0ZXJhdG9yLCBfc3RlcCwgQ29tcG9uZW50LCBpbnN0YW5jZXMsIGVycm9yLCBfbGF5b3V0MjsKCiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBpZiAoISh0aGlzLl9wYXRoQ2hhbmdlZCA9PT0gZmFsc2UgJiYgdGhpcy5fcXVlcnlDaGFuZ2VkID09PSBmYWxzZSkpIHsKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBuZXh0KCkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgLy8gSGFuZGxlIGZpcnN0IHJlbmRlciBvbiBTUEEgbW9kZQogICAgICAgICAgICBpZiAodG8gPT09IGZyb20pIHsKICAgICAgICAgICAgICBfbGFzdFBhdGhzID0gW107CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgZnJvbU1hdGNoZXMgPSBbXTsKICAgICAgICAgICAgICBfbGFzdFBhdGhzID0gZ2V0TWF0Y2hlZENvbXBvbmVudHMoZnJvbSwgZnJvbU1hdGNoZXMpLm1hcChmdW5jdGlvbiAoQ29tcG9uZW50LCBpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gY29tcGlsZShmcm9tLm1hdGNoZWRbZnJvbU1hdGNoZXNbaV1dLnBhdGgpKGZyb20ucGFyYW1zKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSAvLyBuZXh0Q2FsbGVkIGlzIHRydWUgd2hlbiByZWRpcmVjdGVkCgoKICAgICAgICAgICAgbmV4dENhbGxlZCA9IGZhbHNlOwoKICAgICAgICAgICAgX25leHQgPSBmdW5jdGlvbiBfbmV4dChwYXRoKSB7CiAgICAgICAgICAgICAgaWYgKGZyb20ucGF0aCA9PT0gcGF0aC5wYXRoICYmIF90aGlzNS4kbG9hZGluZy5maW5pc2gpIHsKICAgICAgICAgICAgICAgIF90aGlzNS4kbG9hZGluZy5maW5pc2goKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChmcm9tLnBhdGggIT09IHBhdGgucGF0aCAmJiBfdGhpczUuJGxvYWRpbmcucGF1c2UpIHsKICAgICAgICAgICAgICAgIF90aGlzNS4kbG9hZGluZy5wYXVzZSgpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKG5leHRDYWxsZWQpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIG5leHRDYWxsZWQgPSB0cnVlOwogICAgICAgICAgICAgIG5leHQocGF0aCk7CiAgICAgICAgICAgIH07IC8vIFVwZGF0ZSBjb250ZXh0CgoKICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA3OwogICAgICAgICAgICByZXR1cm4gc2V0Q29udGV4dChhcHAsIHsKICAgICAgICAgICAgICByb3V0ZTogdG8sCiAgICAgICAgICAgICAgZnJvbTogZnJvbSwKICAgICAgICAgICAgICBuZXh0OiBfbmV4dC5iaW5kKHRoaXMpCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgdGhpcy5fZGF0ZUxhc3RFcnJvciA9IGFwcC5udXh0LmRhdGVFcnI7CiAgICAgICAgICAgIHRoaXMuX2hhZEVycm9yID0gQm9vbGVhbihhcHAubnV4dC5lcnIpOyAvLyBHZXQgcm91dGUncyBtYXRjaGVkIGNvbXBvbmVudHMKCiAgICAgICAgICAgIG1hdGNoZXMgPSBbXTsKICAgICAgICAgICAgQ29tcG9uZW50cyA9IGdldE1hdGNoZWRDb21wb25lbnRzKHRvLCBtYXRjaGVzKTsgLy8gSWYgbm8gQ29tcG9uZW50cyBtYXRjaGVkLCBnZW5lcmF0ZSA0MDQKCiAgICAgICAgICAgIGlmIChDb21wb25lbnRzLmxlbmd0aCkgewogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjY7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTQ7CiAgICAgICAgICAgIHJldHVybiBjYWxsTWlkZGxld2FyZS5jYWxsKHRoaXMsIENvbXBvbmVudHMsIGFwcC5jb250ZXh0KTsKCiAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICBpZiAoIW5leHRDYWxsZWQpIHsKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDE2OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgLy8gTG9hZCBsYXlvdXQgZm9yIGVycm9yIHBhZ2UKICAgICAgICAgICAgZXJyb3JMYXlvdXQgPSAoTnV4dEVycm9yLm9wdGlvbnMgfHwgTnV4dEVycm9yKS5sYXlvdXQ7CiAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTk7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRMYXlvdXQodHlwZW9mIGVycm9yTGF5b3V0ID09PSAnZnVuY3Rpb24nID8gZXJyb3JMYXlvdXQuY2FsbChOdXh0RXJyb3IsIGFwcC5jb250ZXh0KSA6IGVycm9yTGF5b3V0KTsKCiAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICBsYXlvdXQgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyMjsKICAgICAgICAgICAgcmV0dXJuIGNhbGxNaWRkbGV3YXJlLmNhbGwodGhpcywgQ29tcG9uZW50cywgYXBwLmNvbnRleHQsIGxheW91dCk7CgogICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgaWYgKCFuZXh0Q2FsbGVkKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyNDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgIC8vIFNob3cgZXJyb3IgcGFnZQogICAgICAgICAgICBhcHAuY29udGV4dC5lcnJvcih7CiAgICAgICAgICAgICAgc3RhdHVzQ29kZTogNDA0LAogICAgICAgICAgICAgIG1lc3NhZ2U6ICdUaGlzIHBhZ2UgY291bGQgbm90IGJlIGZvdW5kJwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIG5leHQoKSk7CgogICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgLy8gVXBkYXRlIC5fZGF0YSBhbmQgb3RoZXIgcHJvcGVydGllcyBpZiBob3QgcmVsb2FkZWQKICAgICAgICAgICAgQ29tcG9uZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChDb21wb25lbnQpIHsKICAgICAgICAgICAgICBpZiAoQ29tcG9uZW50Ll9DdG9yICYmIENvbXBvbmVudC5fQ3Rvci5vcHRpb25zKSB7CiAgICAgICAgICAgICAgICBDb21wb25lbnQub3B0aW9ucy5hc3luY0RhdGEgPSBDb21wb25lbnQuX0N0b3Iub3B0aW9ucy5hc3luY0RhdGE7CiAgICAgICAgICAgICAgICBDb21wb25lbnQub3B0aW9ucy5mZXRjaCA9IENvbXBvbmVudC5fQ3Rvci5vcHRpb25zLmZldGNoOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7IC8vIEFwcGx5IHRyYW5zaXRpb25zCgogICAgICAgICAgICB0aGlzLnNldFRyYW5zaXRpb25zKG1hcFRyYW5zaXRpb25zKENvbXBvbmVudHMsIHRvLCBmcm9tKSk7CiAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gMjg7CiAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMzE7CiAgICAgICAgICAgIHJldHVybiBjYWxsTWlkZGxld2FyZS5jYWxsKHRoaXMsIENvbXBvbmVudHMsIGFwcC5jb250ZXh0KTsKCiAgICAgICAgICBjYXNlIDMxOgogICAgICAgICAgICBpZiAoIW5leHRDYWxsZWQpIHsKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDMzOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSAzMzoKICAgICAgICAgICAgaWYgKCFhcHAuY29udGV4dC5fZXJyb3JlZCkgewogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMzU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBuZXh0KCkpOwoKICAgICAgICAgIGNhc2UgMzU6CiAgICAgICAgICAgIC8vIFNldCBsYXlvdXQKICAgICAgICAgICAgX2xheW91dCA9IENvbXBvbmVudHNbMF0ub3B0aW9ucy5sYXlvdXQ7CgogICAgICAgICAgICBpZiAodHlwZW9mIF9sYXlvdXQgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICBfbGF5b3V0ID0gX2xheW91dChhcHAuY29udGV4dCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMzk7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRMYXlvdXQoX2xheW91dCk7CgogICAgICAgICAgY2FzZSAzOToKICAgICAgICAgICAgX2xheW91dCA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQyOwogICAgICAgICAgICByZXR1cm4gY2FsbE1pZGRsZXdhcmUuY2FsbCh0aGlzLCBDb21wb25lbnRzLCBhcHAuY29udGV4dCwgX2xheW91dCk7CgogICAgICAgICAgY2FzZSA0MjoKICAgICAgICAgICAgaWYgKCFuZXh0Q2FsbGVkKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA0NDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgIGNhc2UgNDQ6CiAgICAgICAgICAgIGlmICghYXBwLmNvbnRleHQuX2Vycm9yZWQpIHsKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ2OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgbmV4dCgpKTsKCiAgICAgICAgICBjYXNlIDQ2OgogICAgICAgICAgICAvLyBDYWxsIC52YWxpZGF0ZSgpCiAgICAgICAgICAgIGlzVmFsaWQgPSB0cnVlOwogICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDQ3OwogICAgICAgICAgICBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTsKICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTsKICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7CiAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gNTE7CiAgICAgICAgICAgIF9pdGVyYXRvciA9IENvbXBvbmVudHNbU3ltYm9sLml0ZXJhdG9yXSgpOwoKICAgICAgICAgIGNhc2UgNTM6CiAgICAgICAgICAgIGlmIChfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSkgewogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNjU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIENvbXBvbmVudCA9IF9zdGVwLnZhbHVlOwoKICAgICAgICAgICAgaWYgKCEodHlwZW9mIENvbXBvbmVudC5vcHRpb25zLnZhbGlkYXRlICE9PSAnZnVuY3Rpb24nKSkgewogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNTc7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJjb250aW51ZSIsIDYyKTsKCiAgICAgICAgICBjYXNlIDU3OgogICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDU5OwogICAgICAgICAgICByZXR1cm4gQ29tcG9uZW50Lm9wdGlvbnMudmFsaWRhdGUoYXBwLmNvbnRleHQpOwoKICAgICAgICAgIGNhc2UgNTk6CiAgICAgICAgICAgIGlzVmFsaWQgPSBfY29udGV4dDQuc2VudDsKCiAgICAgICAgICAgIGlmIChpc1ZhbGlkKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA2MjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoImJyZWFrIiwgNjUpOwoKICAgICAgICAgIGNhc2UgNjI6CiAgICAgICAgICAgIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlOwogICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDUzOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDY1OgogICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDcxOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDY3OgogICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDY3OwogICAgICAgICAgICBfY29udGV4dDQudDAgPSBfY29udGV4dDRbImNhdGNoIl0oNTEpOwogICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7CiAgICAgICAgICAgIF9pdGVyYXRvckVycm9yID0gX2NvbnRleHQ0LnQwOwoKICAgICAgICAgIGNhc2UgNzE6CiAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gNzE7CiAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gNzI7CgogICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybiAhPSBudWxsKSB7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpOwogICAgICAgICAgICB9CgogICAgICAgICAgY2FzZSA3NDoKICAgICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSA3NDsKCiAgICAgICAgICAgIGlmICghX2RpZEl0ZXJhdG9yRXJyb3IpIHsKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDc3OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjsKCiAgICAgICAgICBjYXNlIDc3OgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmZpbmlzaCg3NCk7CgogICAgICAgICAgY2FzZSA3ODoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5maW5pc2goNzEpOwoKICAgICAgICAgIGNhc2UgNzk6CiAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gODU7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgODE6CiAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gODE7CiAgICAgICAgICAgIF9jb250ZXh0NC50MSA9IF9jb250ZXh0NFsiY2F0Y2giXSg0Nyk7CiAgICAgICAgICAgIC8vIC4uLklmIC52YWxpZGF0ZSgpIHRocmV3IGFuIGVycm9yCiAgICAgICAgICAgIHRoaXMuZXJyb3IoewogICAgICAgICAgICAgIHN0YXR1c0NvZGU6IF9jb250ZXh0NC50MS5zdGF0dXNDb2RlIHx8ICc1MDAnLAogICAgICAgICAgICAgIG1lc3NhZ2U6IF9jb250ZXh0NC50MS5tZXNzYWdlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgbmV4dCgpKTsKCiAgICAgICAgICBjYXNlIDg1OgogICAgICAgICAgICBpZiAoaXNWYWxpZCkgewogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gODg7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMuZXJyb3IoewogICAgICAgICAgICAgIHN0YXR1c0NvZGU6IDQwNCwKICAgICAgICAgICAgICBtZXNzYWdlOiAnVGhpcyBwYWdlIGNvdWxkIG5vdCBiZSBmb3VuZCcKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBuZXh0KCkpOwoKICAgICAgICAgIGNhc2UgODg6CiAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gOTA7CiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChDb21wb25lbnRzLm1hcChmdW5jdGlvbiAoQ29tcG9uZW50LCBpKSB7CiAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgb25seSBjaGlsZHJlbiByb3V0ZSBjaGFuZ2VkCiAgICAgICAgICAgICAgQ29tcG9uZW50Ll9wYXRoID0gY29tcGlsZSh0by5tYXRjaGVkW21hdGNoZXNbaV1dLnBhdGgpKHRvLnBhcmFtcyk7CiAgICAgICAgICAgICAgQ29tcG9uZW50Ll9kYXRhUmVmcmVzaCA9IGZhbHNlOyAvLyBDaGVjayBpZiBDb21wb25lbnQgbmVlZCB0byBiZSByZWZyZXNoZWQgKGNhbGwgYXN5bmNEYXRhICYgZmV0Y2gpCiAgICAgICAgICAgICAgLy8gT25seSBpZiBpdHMgc2x1ZyBoYXMgY2hhbmdlZCBvciBpcyB3YXRjaCBxdWVyeSBjaGFuZ2VzCgogICAgICAgICAgICAgIGlmIChfdGhpczUuX3BhdGhDaGFuZ2VkICYmIF90aGlzNS5fcXVlcnlDaGFuZ2VkIHx8IENvbXBvbmVudC5fcGF0aCAhPT0gX2xhc3RQYXRoc1tpXSkgewogICAgICAgICAgICAgICAgQ29tcG9uZW50Ll9kYXRhUmVmcmVzaCA9IHRydWU7CiAgICAgICAgICAgICAgfSBlbHNlIGlmICghX3RoaXM1Ll9wYXRoQ2hhbmdlZCAmJiBfdGhpczUuX3F1ZXJ5Q2hhbmdlZCkgewogICAgICAgICAgICAgICAgdmFyIHdhdGNoUXVlcnkgPSBDb21wb25lbnQub3B0aW9ucy53YXRjaFF1ZXJ5OwoKICAgICAgICAgICAgICAgIGlmICh3YXRjaFF1ZXJ5ID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgIENvbXBvbmVudC5fZGF0YVJlZnJlc2ggPSB0cnVlOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHdhdGNoUXVlcnkpKSB7CiAgICAgICAgICAgICAgICAgIENvbXBvbmVudC5fZGF0YVJlZnJlc2ggPSB3YXRjaFF1ZXJ5LnNvbWUoZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczUuX2RpZmZRdWVyeVtrZXldOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHdhdGNoUXVlcnkgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgICAgaWYgKCFpbnN0YW5jZXMpIHsKICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZXMgPSBnZXRNYXRjaGVkQ29tcG9uZW50c0luc3RhbmNlcyh0byk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIENvbXBvbmVudC5fZGF0YVJlZnJlc2ggPSB3YXRjaFF1ZXJ5LmFwcGx5KGluc3RhbmNlc1tpXSwgW3RvLnF1ZXJ5LCBmcm9tLnF1ZXJ5XSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAoIV90aGlzNS5faGFkRXJyb3IgJiYgX3RoaXM1Ll9pc01vdW50ZWQgJiYgIUNvbXBvbmVudC5fZGF0YVJlZnJlc2gpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHZhciBwcm9taXNlcyA9IFtdOwogICAgICAgICAgICAgIHZhciBoYXNBc3luY0RhdGEgPSBDb21wb25lbnQub3B0aW9ucy5hc3luY0RhdGEgJiYgdHlwZW9mIENvbXBvbmVudC5vcHRpb25zLmFzeW5jRGF0YSA9PT0gJ2Z1bmN0aW9uJzsKICAgICAgICAgICAgICB2YXIgaGFzRmV0Y2ggPSBCb29sZWFuKENvbXBvbmVudC5vcHRpb25zLmZldGNoKTsKICAgICAgICAgICAgICB2YXIgbG9hZGluZ0luY3JlYXNlID0gaGFzQXN5bmNEYXRhICYmIGhhc0ZldGNoID8gMzAgOiA0NTsgLy8gQ2FsbCBhc3luY0RhdGEoY29udGV4dCkKCiAgICAgICAgICAgICAgaWYgKGhhc0FzeW5jRGF0YSkgewogICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSBwcm9taXNpZnkoQ29tcG9uZW50Lm9wdGlvbnMuYXN5bmNEYXRhLCBhcHAuY29udGV4dCkudGhlbihmdW5jdGlvbiAoYXN5bmNEYXRhUmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgIGFwcGx5QXN5bmNEYXRhKENvbXBvbmVudCwgYXN5bmNEYXRhUmVzdWx0KTsKCiAgICAgICAgICAgICAgICAgIGlmIChfdGhpczUuJGxvYWRpbmcuaW5jcmVhc2UpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczUuJGxvYWRpbmcuaW5jcmVhc2UobG9hZGluZ0luY3JlYXNlKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKHByb21pc2UpOwogICAgICAgICAgICAgIH0gLy8gQ2hlY2sgZGlzYWJsZWQgcGFnZSBsb2FkaW5nCgoKICAgICAgICAgICAgICBfdGhpczUuJGxvYWRpbmcubWFudWFsID0gQ29tcG9uZW50Lm9wdGlvbnMubG9hZGluZyA9PT0gZmFsc2U7IC8vIENhbGwgZmV0Y2goY29udGV4dCkKCiAgICAgICAgICAgICAgaWYgKGhhc0ZldGNoKSB7CiAgICAgICAgICAgICAgICB2YXIgcCA9IENvbXBvbmVudC5vcHRpb25zLmZldGNoKGFwcC5jb250ZXh0KTsKCiAgICAgICAgICAgICAgICBpZiAoIXAgfHwgIShwIGluc3RhbmNlb2YgUHJvbWlzZSkgJiYgdHlwZW9mIHAudGhlbiAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgICBwID0gUHJvbWlzZS5yZXNvbHZlKHApOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHAudGhlbihmdW5jdGlvbiAoZmV0Y2hSZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgaWYgKF90aGlzNS4kbG9hZGluZy5pbmNyZWFzZSkgewogICAgICAgICAgICAgICAgICAgIF90aGlzNS4kbG9hZGluZy5pbmNyZWFzZShsb2FkaW5nSW5jcmVhc2UpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2gocCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSA5MDoKICAgICAgICAgICAgLy8gSWYgbm90IHJlZGlyZWN0ZWQKICAgICAgICAgICAgaWYgKCFuZXh0Q2FsbGVkKSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMuJGxvYWRpbmcuZmluaXNoICYmICF0aGlzLiRsb2FkaW5nLm1hbnVhbCkgewogICAgICAgICAgICAgICAgdGhpcy4kbG9hZGluZy5maW5pc2goKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxMDc7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgOTM6CiAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gOTM7CiAgICAgICAgICAgIF9jb250ZXh0NC50MiA9IF9jb250ZXh0NFsiY2F0Y2giXSgyOCk7CiAgICAgICAgICAgIGVycm9yID0gX2NvbnRleHQ0LnQyIHx8IHt9OwoKICAgICAgICAgICAgaWYgKCEoZXJyb3IubWVzc2FnZSA9PT0gJ0VSUl9SRURJUkVDVCcpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA5ODsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIHRoaXMuJG51eHQuJGVtaXQoJ3JvdXRlQ2hhbmdlZCcsIHRvLCBmcm9tLCBlcnJvcikpOwoKICAgICAgICAgIGNhc2UgOTg6CiAgICAgICAgICAgIF9sYXN0UGF0aHMgPSBbXTsKICAgICAgICAgICAgZ2xvYmFsSGFuZGxlRXJyb3IoZXJyb3IpOyAvLyBMb2FkIGVycm9yIGxheW91dAoKICAgICAgICAgICAgX2xheW91dDIgPSAoTnV4dEVycm9yLm9wdGlvbnMgfHwgTnV4dEVycm9yKS5sYXlvdXQ7CgogICAgICAgICAgICBpZiAodHlwZW9mIF9sYXlvdXQyID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgX2xheW91dDIgPSBfbGF5b3V0MihhcHAuY29udGV4dCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTA0OwogICAgICAgICAgICByZXR1cm4gdGhpcy5sb2FkTGF5b3V0KF9sYXlvdXQyKTsKCiAgICAgICAgICBjYXNlIDEwNDoKICAgICAgICAgICAgdGhpcy5lcnJvcihlcnJvcik7CiAgICAgICAgICAgIHRoaXMuJG51eHQuJGVtaXQoJ3JvdXRlQ2hhbmdlZCcsIHRvLCBmcm9tLCBlcnJvcik7CiAgICAgICAgICAgIG5leHQoKTsKCiAgICAgICAgICBjYXNlIDEwNzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTQsIHRoaXMsIFtbMjgsIDkzXSwgWzQ3LCA4MV0sIFs1MSwgNjcsIDcxLCA3OV0sIFs3MiwsIDc0LCA3OF1dKTsKICB9KSk7CiAgcmV0dXJuIF9yZW5kZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gbm9ybWFsaXplQ29tcG9uZW50cyh0bywgX19fKSB7CiAgZmxhdE1hcENvbXBvbmVudHModG8sIGZ1bmN0aW9uIChDb21wb25lbnQsIF8sIG1hdGNoLCBrZXkpIHsKICAgIGlmIChfdHlwZW9mKENvbXBvbmVudCkgPT09ICdvYmplY3QnICYmICFDb21wb25lbnQub3B0aW9ucykgewogICAgICAvLyBVcGRhdGVkIHZpYSB2dWUtcm91dGVyIHJlc29sdmVBc3luY0NvbXBvbmVudHMoKQogICAgICBDb21wb25lbnQgPSBWdWUuZXh0ZW5kKENvbXBvbmVudCk7CiAgICAgIENvbXBvbmVudC5fQ3RvciA9IENvbXBvbmVudDsKICAgICAgbWF0Y2guY29tcG9uZW50c1trZXldID0gQ29tcG9uZW50OwogICAgfQoKICAgIHJldHVybiBDb21wb25lbnQ7CiAgfSk7Cn0KCmZ1bmN0aW9uIHNob3dOZXh0UGFnZSh0bykgewogIC8vIEhpZGUgZXJyb3IgY29tcG9uZW50IGlmIG5vIGVycm9yCiAgaWYgKHRoaXMuX2hhZEVycm9yICYmIHRoaXMuX2RhdGVMYXN0RXJyb3IgPT09IHRoaXMuJG9wdGlvbnMubnV4dC5kYXRlRXJyKSB7CiAgICB0aGlzLmVycm9yKCk7CiAgfSAvLyBTZXQgbGF5b3V0CgoKICB2YXIgbGF5b3V0ID0gdGhpcy4kb3B0aW9ucy5udXh0LmVyciA/IChOdXh0RXJyb3Iub3B0aW9ucyB8fCBOdXh0RXJyb3IpLmxheW91dCA6IHRvLm1hdGNoZWRbMF0uY29tcG9uZW50cy5kZWZhdWx0Lm9wdGlvbnMubGF5b3V0OwoKICBpZiAodHlwZW9mIGxheW91dCA9PT0gJ2Z1bmN0aW9uJykgewogICAgbGF5b3V0ID0gbGF5b3V0KGFwcC5jb250ZXh0KTsKICB9CgogIHRoaXMuc2V0TGF5b3V0KGxheW91dCk7Cn0gLy8gV2hlbiBuYXZpZ2F0aW5nIG9uIGEgZGlmZmVyZW50IHJvdXRlIGJ1dCB0aGUgc2FtZSBjb21wb25lbnQgaXMgdXNlZCwgVnVlLmpzCi8vIFdpbGwgbm90IHVwZGF0ZSB0aGUgaW5zdGFuY2UgZGF0YSwgc28gd2UgaGF2ZSB0byB1cGRhdGUgJGRhdGEgb3Vyc2VsdmVzCgoKZnVuY3Rpb24gZml4UHJlcGF0Y2godG8sIF9fXykgewogIHZhciBfdGhpczIgPSB0aGlzOwoKICBpZiAodGhpcy5fcGF0aENoYW5nZWQgPT09IGZhbHNlICYmIHRoaXMuX3F1ZXJ5Q2hhbmdlZCA9PT0gZmFsc2UpIHsKICAgIHJldHVybjsKICB9CgogIHZhciBpbnN0YW5jZXMgPSBnZXRNYXRjaGVkQ29tcG9uZW50c0luc3RhbmNlcyh0byk7CiAgdmFyIENvbXBvbmVudHMgPSBnZXRNYXRjaGVkQ29tcG9uZW50cyh0byk7CiAgVnVlLm5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgIGluc3RhbmNlcy5mb3JFYWNoKGZ1bmN0aW9uIChpbnN0YW5jZSwgaSkgewogICAgICBpZiAoIWluc3RhbmNlIHx8IGluc3RhbmNlLl9pc0Rlc3Ryb3llZCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGluc3RhbmNlLmNvbnN0cnVjdG9yLl9kYXRhUmVmcmVzaCAmJiBDb21wb25lbnRzW2ldID09PSBpbnN0YW5jZS5jb25zdHJ1Y3RvciAmJiBpbnN0YW5jZS4kdm5vZGUuZGF0YS5rZWVwQWxpdmUgIT09IHRydWUgJiYgdHlwZW9mIGluc3RhbmNlLmNvbnN0cnVjdG9yLm9wdGlvbnMuZGF0YSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHZhciBuZXdEYXRhID0gaW5zdGFuY2UuY29uc3RydWN0b3Iub3B0aW9ucy5kYXRhLmNhbGwoaW5zdGFuY2UpOwoKICAgICAgICBmb3IgKHZhciBrZXkgaW4gbmV3RGF0YSkgewogICAgICAgICAgVnVlLnNldChpbnN0YW5jZS4kZGF0YSwga2V5LCBuZXdEYXRhW2tleV0pOwogICAgICAgIH0gLy8gRW5zdXJlIHRvIHRyaWdnZXIgc2Nyb2xsIGV2ZW50IGFmdGVyIGNhbGxpbmcgc2Nyb2xsQmVoYXZpb3IKCgogICAgICAgIHdpbmRvdy4kbnV4dC4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgd2luZG93LiRudXh0LiRlbWl0KCd0cmlnZ2VyU2Nyb2xsJyk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogICAgc2hvd05leHRQYWdlLmNhbGwoX3RoaXMyLCB0byk7IC8vIEhvdCByZWxvYWRpbmcKCiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGhvdFJlbG9hZEFQSShfdGhpczIpOwogICAgfSwgMTAwKTsKICB9KTsKfQoKZnVuY3Rpb24gbnV4dFJlYWR5KF9hcHApIHsKICB3aW5kb3cub25OdXh0UmVhZHlDYnMuZm9yRWFjaChmdW5jdGlvbiAoY2IpIHsKICAgIGlmICh0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicpIHsKICAgICAgY2IoX2FwcCk7CiAgICB9CiAgfSk7IC8vIFNwZWNpYWwgSlNET00KCiAgaWYgKHR5cGVvZiB3aW5kb3cuX29uTnV4dExvYWRlZCA9PT0gJ2Z1bmN0aW9uJykgewogICAgd2luZG93Ll9vbk51eHRMb2FkZWQoX2FwcCk7CiAgfSAvLyBBZGQgcm91dGVyIGhvb2tzCgoKICByb3V0ZXIuYWZ0ZXJFYWNoKGZ1bmN0aW9uICh0bywgZnJvbSkgewogICAgLy8gV2FpdCBmb3IgZml4UHJlcGF0Y2ggKyAkZGF0YSB1cGRhdGVzCiAgICBWdWUubmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gX2FwcC4kbnV4dC4kZW1pdCgncm91dGVDaGFuZ2VkJywgdG8sIGZyb20pOwogICAgfSk7CiAgfSk7Cn0KCnZhciBub29wRGF0YSA9IGZ1bmN0aW9uIG5vb3BEYXRhKCkgewogIHJldHVybiB7fTsKfTsKCnZhciBub29wRmV0Y2ggPSBmdW5jdGlvbiBub29wRmV0Y2goKSB7fTsgLy8gU3BlY2lhbCBob3QgcmVsb2FkIHdpdGggYXN5bmNEYXRhKGNvbnRleHQpCgoKZnVuY3Rpb24gZ2V0TnV4dENoaWxkQ29tcG9uZW50cygkcGFyZW50KSB7CiAgdmFyICRjb21wb25lbnRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBbXTsKICAkcGFyZW50LiRjaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uICgkY2hpbGQpIHsKICAgIGlmICgkY2hpbGQuJHZub2RlICYmICRjaGlsZC4kdm5vZGUuZGF0YS5udXh0Q2hpbGQgJiYgISRjb21wb25lbnRzLmZpbmQoZnVuY3Rpb24gKGMpIHsKICAgICAgcmV0dXJuIGMuJG9wdGlvbnMuX19maWxlID09PSAkY2hpbGQuJG9wdGlvbnMuX19maWxlOwogICAgfSkpIHsKICAgICAgJGNvbXBvbmVudHMucHVzaCgkY2hpbGQpOwogICAgfQoKICAgIGlmICgkY2hpbGQuJGNoaWxkcmVuICYmICRjaGlsZC4kY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgIGdldE51eHRDaGlsZENvbXBvbmVudHMoJGNoaWxkLCAkY29tcG9uZW50cyk7CiAgICB9CiAgfSk7CiAgcmV0dXJuICRjb21wb25lbnRzOwp9CgpmdW5jdGlvbiBob3RSZWxvYWRBUEkoX2FwcCkgewogIGlmICghbW9kdWxlLmhvdCkgcmV0dXJuOwogIHZhciAkY29tcG9uZW50cyA9IGdldE51eHRDaGlsZENvbXBvbmVudHMoX2FwcC4kbnV4dCwgW10pOwogICRjb21wb25lbnRzLmZvckVhY2goYWRkSG90UmVsb2FkLmJpbmQoX2FwcCkpOwp9CgpmdW5jdGlvbiBhZGRIb3RSZWxvYWQoJGNvbXBvbmVudCwgZGVwdGgpIHsKICB2YXIgX3RoaXMzID0gdGhpczsKCiAgaWYgKCRjb21wb25lbnQuJHZub2RlLmRhdGEuX2hhc0hvdFJlbG9hZCkgcmV0dXJuOwogICRjb21wb25lbnQuJHZub2RlLmRhdGEuX2hhc0hvdFJlbG9hZCA9IHRydWU7CgogIHZhciBfZm9yY2VVcGRhdGUgPSAkY29tcG9uZW50LiRmb3JjZVVwZGF0ZS5iaW5kKCRjb21wb25lbnQuJHBhcmVudCk7CgogICRjb21wb25lbnQuJHZub2RlLmNvbnRleHQuJGZvcmNlVXBkYXRlID0KICAvKiNfX1BVUkVfXyovCiAgX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgdmFyIENvbXBvbmVudHMsIENvbXBvbmVudCwgcHJvbWlzZXMsIG5leHQsIGNvbnRleHQ7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBDb21wb25lbnRzID0gZ2V0TWF0Y2hlZENvbXBvbmVudHMocm91dGVyLmN1cnJlbnRSb3V0ZSk7CiAgICAgICAgICAgIENvbXBvbmVudCA9IENvbXBvbmVudHNbZGVwdGhdOwoKICAgICAgICAgICAgaWYgKENvbXBvbmVudCkgewogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIF9mb3JjZVVwZGF0ZSgpKTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGlmIChfdHlwZW9mKENvbXBvbmVudCkgPT09ICdvYmplY3QnICYmICFDb21wb25lbnQub3B0aW9ucykgewogICAgICAgICAgICAgIC8vIFVwZGF0ZWQgdmlhIHZ1ZS1yb3V0ZXIgcmVzb2x2ZUFzeW5jQ29tcG9uZW50cygpCiAgICAgICAgICAgICAgQ29tcG9uZW50ID0gVnVlLmV4dGVuZChDb21wb25lbnQpOwogICAgICAgICAgICAgIENvbXBvbmVudC5fQ3RvciA9IENvbXBvbmVudDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX3RoaXMzLmVycm9yKCk7CgogICAgICAgICAgICBwcm9taXNlcyA9IFtdOwoKICAgICAgICAgICAgbmV4dCA9IGZ1bmN0aW9uIG5leHQocGF0aCkgewogICAgICAgICAgICAgIHRoaXMuJGxvYWRpbmcuZmluaXNoICYmIHRoaXMuJGxvYWRpbmcuZmluaXNoKCk7CiAgICAgICAgICAgICAgcm91dGVyLnB1c2gocGF0aCk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEwOwogICAgICAgICAgICByZXR1cm4gc2V0Q29udGV4dChhcHAsIHsKICAgICAgICAgICAgICByb3V0ZTogcm91dGVyLmN1cnJlbnRSb3V0ZSwKICAgICAgICAgICAgICBpc0hNUjogdHJ1ZSwKICAgICAgICAgICAgICBuZXh0OiBuZXh0LmJpbmQoX3RoaXMzKQogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBjb250ZXh0ID0gYXBwLmNvbnRleHQ7CgogICAgICAgICAgICBpZiAoX3RoaXMzLiRsb2FkaW5nLnN0YXJ0ICYmICFfdGhpczMuJGxvYWRpbmcubWFudWFsKSB7CiAgICAgICAgICAgICAgX3RoaXMzLiRsb2FkaW5nLnN0YXJ0KCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhbGxNaWRkbGV3YXJlLmNhbGwoX3RoaXMzLCBDb21wb25lbnRzLCBjb250ZXh0KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAvLyBJZiBsYXlvdXQgY2hhbmdlZAogICAgICAgICAgICAgIGlmIChkZXB0aCAhPT0gMCkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdmFyIGxheW91dCA9IENvbXBvbmVudC5vcHRpb25zLmxheW91dCB8fCAnZGVmYXVsdCc7CgogICAgICAgICAgICAgIGlmICh0eXBlb2YgbGF5b3V0ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICBsYXlvdXQgPSBsYXlvdXQoY29udGV4dCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAoX3RoaXMzLmxheW91dE5hbWUgPT09IGxheW91dCkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSBfdGhpczMubG9hZExheW91dChsYXlvdXQpOwoKICAgICAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgX3RoaXMzLnNldExheW91dChsYXlvdXQpOwoKICAgICAgICAgICAgICAgIFZ1ZS5uZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBob3RSZWxvYWRBUEkoX3RoaXMzKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHJldHVybiBwcm9taXNlOwogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gY2FsbE1pZGRsZXdhcmUuY2FsbChfdGhpczMsIENvbXBvbmVudHMsIGNvbnRleHQsIF90aGlzMy5sYXlvdXQpOwogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAvLyBDYWxsIGFzeW5jRGF0YShjb250ZXh0KQogICAgICAgICAgICAgIHZhciBwQXN5bmNEYXRhID0gcHJvbWlzaWZ5KENvbXBvbmVudC5vcHRpb25zLmFzeW5jRGF0YSB8fCBub29wRGF0YSwgY29udGV4dCk7CiAgICAgICAgICAgICAgcEFzeW5jRGF0YS50aGVuKGZ1bmN0aW9uIChhc3luY0RhdGFSZXN1bHQpIHsKICAgICAgICAgICAgICAgIGFwcGx5QXN5bmNEYXRhKENvbXBvbmVudCwgYXN5bmNEYXRhUmVzdWx0KTsKICAgICAgICAgICAgICAgIF90aGlzMy4kbG9hZGluZy5pbmNyZWFzZSAmJiBfdGhpczMuJGxvYWRpbmcuaW5jcmVhc2UoMzApOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHByb21pc2VzLnB1c2gocEFzeW5jRGF0YSk7IC8vIENhbGwgZmV0Y2goKQoKICAgICAgICAgICAgICBDb21wb25lbnQub3B0aW9ucy5mZXRjaCA9IENvbXBvbmVudC5vcHRpb25zLmZldGNoIHx8IG5vb3BGZXRjaDsKICAgICAgICAgICAgICB2YXIgcEZldGNoID0gQ29tcG9uZW50Lm9wdGlvbnMuZmV0Y2goY29udGV4dCk7CgogICAgICAgICAgICAgIGlmICghcEZldGNoIHx8ICEocEZldGNoIGluc3RhbmNlb2YgUHJvbWlzZSkgJiYgdHlwZW9mIHBGZXRjaC50aGVuICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICBwRmV0Y2ggPSBQcm9taXNlLnJlc29sdmUocEZldGNoKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHBGZXRjaC50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMuJGxvYWRpbmcuaW5jcmVhc2UgJiYgX3RoaXMzLiRsb2FkaW5nLmluY3JlYXNlKDMwKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKHBGZXRjaCk7CiAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTsKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgX3RoaXMzLiRsb2FkaW5nLmZpbmlzaCAmJiBfdGhpczMuJGxvYWRpbmcuZmluaXNoKCk7CgogICAgICAgICAgICAgIF9mb3JjZVVwZGF0ZSgpOwoKICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBob3RSZWxvYWRBUEkoX3RoaXMzKTsKICAgICAgICAgICAgICB9LCAxMDApOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMik7CiAgfSkpOwp9CgpmdW5jdGlvbiBtb3VudEFwcChfeDEyKSB7CiAgcmV0dXJuIF9tb3VudEFwcC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfbW91bnRBcHAoKSB7CiAgX21vdW50QXBwID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KF9fYXBwKSB7CiAgICB2YXIgX2FwcCwgbGF5b3V0LCBtb3VudCwgQ29tcG9uZW50cywgY2xpZW50Rmlyc3RNb3VudDsKCiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAvLyBTZXQgZ2xvYmFsIHZhcmlhYmxlcwogICAgICAgICAgICBhcHAgPSBfX2FwcC5hcHA7CiAgICAgICAgICAgIHJvdXRlciA9IF9fYXBwLnJvdXRlcjsKICAgICAgICAgICAgc3RvcmUgPSBfX2FwcC5zdG9yZTsgLy8gQ3JlYXRlIFZ1ZSBpbnN0YW5jZQoKICAgICAgICAgICAgX2FwcCA9IG5ldyBWdWUoYXBwKTsgLy8gTG9hZCBsYXlvdXQKCiAgICAgICAgICAgIGxheW91dCA9IE5VWFQubGF5b3V0IHx8ICdkZWZhdWx0JzsKICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA3OwogICAgICAgICAgICByZXR1cm4gX2FwcC5sb2FkTGF5b3V0KGxheW91dCk7CgogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICBfYXBwLnNldExheW91dChsYXlvdXQpOyAvLyBNb3VudHMgVnVlIGFwcCB0byBET00gZWxlbWVudAoKCiAgICAgICAgICAgIG1vdW50ID0gZnVuY3Rpb24gbW91bnQoKSB7CiAgICAgICAgICAgICAgX2FwcC4kbW91bnQoJyNfX251eHQnKTsgLy8gQWRkIGFmdGVyRWFjaCByb3V0ZXIgaG9va3MKCgogICAgICAgICAgICAgIHJvdXRlci5hZnRlckVhY2gobm9ybWFsaXplQ29tcG9uZW50cyk7CiAgICAgICAgICAgICAgcm91dGVyLmFmdGVyRWFjaChmaXhQcmVwYXRjaC5iaW5kKF9hcHApKTsgLy8gTGlzdGVuIGZvciBmaXJzdCBWdWUgdXBkYXRlCgogICAgICAgICAgICAgIFZ1ZS5uZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAvLyBDYWxsIHdpbmRvdy57e2dsb2JhbHMucmVhZHlDYWxsYmFja319IGNhbGxiYWNrcwogICAgICAgICAgICAgICAgbnV4dFJlYWR5KF9hcHApOyAvLyBFbmFibGUgaG90IHJlbG9hZGluZwoKICAgICAgICAgICAgICAgIGhvdFJlbG9hZEFQSShfYXBwKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfTsgLy8gUmVzb2x2ZSByb3V0ZSBjb21wb25lbnRzCgoKICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxMTsKICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHJlc29sdmVDb21wb25lbnRzKHJvdXRlcikpOwoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIENvbXBvbmVudHMgPSBfY29udGV4dDUuc2VudDsKICAgICAgICAgICAgLy8gRW5hYmxlIHRyYW5zaXRpb25zCiAgICAgICAgICAgIF9hcHAuc2V0VHJhbnNpdGlvbnMgPSBfYXBwLiRvcHRpb25zLm51eHQuc2V0VHJhbnNpdGlvbnMuYmluZChfYXBwKTsKCiAgICAgICAgICAgIGlmIChDb21wb25lbnRzLmxlbmd0aCkgewogICAgICAgICAgICAgIF9hcHAuc2V0VHJhbnNpdGlvbnMobWFwVHJhbnNpdGlvbnMoQ29tcG9uZW50cywgcm91dGVyLmN1cnJlbnRSb3V0ZSkpOwoKICAgICAgICAgICAgICBfbGFzdFBhdGhzID0gcm91dGVyLmN1cnJlbnRSb3V0ZS5tYXRjaGVkLm1hcChmdW5jdGlvbiAocm91dGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBjb21waWxlKHJvdXRlLnBhdGgpKHJvdXRlci5jdXJyZW50Um91dGUucGFyYW1zKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSAvLyBJbml0aWFsaXplIGVycm9yIGhhbmRsZXIKCgogICAgICAgICAgICBfYXBwLiRsb2FkaW5nID0ge307IC8vIFRvIGF2b2lkIGVycm9yIHdoaWxlIF9hcHAuJG51eHQgZG9lcyBub3QgZXhpc3QKCiAgICAgICAgICAgIGlmIChOVVhULmVycm9yKSB7CiAgICAgICAgICAgICAgX2FwcC5lcnJvcihOVVhULmVycm9yKTsKICAgICAgICAgICAgfSAvLyBBZGQgYmVmb3JlRWFjaCByb3V0ZXIgaG9va3MKCgogICAgICAgICAgICByb3V0ZXIuYmVmb3JlRWFjaChsb2FkQXN5bmNDb21wb25lbnRzLmJpbmQoX2FwcCkpOwogICAgICAgICAgICByb3V0ZXIuYmVmb3JlRWFjaChyZW5kZXIuYmluZChfYXBwKSk7IC8vIElmIHBhZ2UgYWxyZWFkeSBpcyBzZXJ2ZXIgcmVuZGVyZWQKCiAgICAgICAgICAgIGlmICghTlVYVC5zZXJ2ZXJSZW5kZXJlZCkgewogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG1vdW50KCk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAvLyBGaXJzdCByZW5kZXIgb24gY2xpZW50LXNpZGUKICAgICAgICAgICAgY2xpZW50Rmlyc3RNb3VudCA9IGZ1bmN0aW9uIGNsaWVudEZpcnN0TW91bnQoKSB7CiAgICAgICAgICAgICAgbm9ybWFsaXplQ29tcG9uZW50cyhyb3V0ZXIuY3VycmVudFJvdXRlLCByb3V0ZXIuY3VycmVudFJvdXRlKTsKICAgICAgICAgICAgICBzaG93TmV4dFBhZ2UuY2FsbChfYXBwLCByb3V0ZXIuY3VycmVudFJvdXRlKTsgLy8gRG9uJ3QgY2FsbCBmaXhQcmVwYXRjaC5jYWxsKF9hcHAsIHJvdXRlci5jdXJyZW50Um91dGUsIHJvdXRlci5jdXJyZW50Um91dGUpIHNpbmNlIGl0J3MgZmlyc3QgcmVuZGVyCgogICAgICAgICAgICAgIG1vdW50KCk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICByZW5kZXIuY2FsbChfYXBwLCByb3V0ZXIuY3VycmVudFJvdXRlLCByb3V0ZXIuY3VycmVudFJvdXRlLCBmdW5jdGlvbiAocGF0aCkgewogICAgICAgICAgICAgIC8vIElmIG5vdCByZWRpcmVjdGVkCiAgICAgICAgICAgICAgaWYgKCFwYXRoKSB7CiAgICAgICAgICAgICAgICBjbGllbnRGaXJzdE1vdW50KCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfSAvLyBBZGQgYSBvbmUtdGltZSBhZnRlckVhY2ggaG9vayB0bwogICAgICAgICAgICAgIC8vIG1vdW50IHRoZSBhcHAgd2FpdCBmb3IgcmVkaXJlY3QgYW5kIHJvdXRlIGdldHMgcmVzb2x2ZWQKCgogICAgICAgICAgICAgIHZhciB1bnJlZ2lzdGVySG9vayA9IHJvdXRlci5hZnRlckVhY2goZnVuY3Rpb24gKHRvLCBmcm9tKSB7CiAgICAgICAgICAgICAgICB1bnJlZ2lzdGVySG9vaygpOwogICAgICAgICAgICAgICAgY2xpZW50Rmlyc3RNb3VudCgpOwogICAgICAgICAgICAgIH0pOyAvLyBQdXNoIHRoZSBwYXRoIGFuZCBsZXQgcm91dGUgdG8gYmUgcmVzb2x2ZWQKCiAgICAgICAgICAgICAgcm91dGVyLnB1c2gocGF0aCwgdW5kZWZpbmVkLCBmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgIGVycm9ySGFuZGxlcihlcnIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlNSk7CiAgfSkpOwogIHJldHVybiBfbW91bnRBcHAuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQ=="},{"version":3,"sources":["/Users/pro/Documents/WebWork/GitHub/Callanna-iBlog/.nuxt/client.js"],"names":["Vue","fetch","middleware","applyAsyncData","promisify","middlewareSeries","sanitizeComponent","resolveRouteComponents","getMatchedComponents","getMatchedComponentsInstances","flatMapComponents","setContext","getLocation","compile","getQueryDiff","globalHandleError","createApp","NuxtError","NuxtLink","component","name","global","_lastPaths","app","router","store","NUXT","window","__NUXT__","Object","assign","config","logs","length","ssrLogSyle","console","group","forEach","logObj","type","log","args","groupEnd","$nuxt","defaultErrorHandler","errorHandler","err","vm","info","handled","rest","$root","nuxtApp","keys","find","nuxtInstance","error","process","env","NODE_ENV","message","then","mountApp","catch","componentOption","key","options","option","mapTransitions","Components","to","from","componentTransitions","transition","map","Component","transitions","matched","components","default","fromTransitions","filter","toLowerCase","includes","loadAsyncComponents","next","_pathChanged","Boolean","nuxt","path","_queryChanged","JSON","stringify","query","_diffQuery","$loading","start","manual","instance","startLoader","some","watchQuery","Array","isArray","apply","statusCode","status","response","test","location","reload","$emit","applySSRData","ssrData","serverRendered","_Ctor","resolveComponents","base","mode","match","_","index","_Component","data","callMiddleware","context","layout","midd","unknownMiddleware","concat","render","fromMatches","i","params","nextCalled","_next","finish","pause","route","bind","_dateLastError","dateErr","_hadError","matches","call","errorLayout","loadLayout","asyncData","setTransitions","_errored","isValid","validate","Promise","all","_path","_dataRefresh","instances","_isMounted","promises","hasAsyncData","hasFetch","loadingIncrease","promise","asyncDataResult","increase","push","loading","p","resolve","fetchResult","normalizeComponents","___","extend","showNextPage","$options","setLayout","fixPrepatch","nextTick","_isDestroyed","constructor","$vnode","keepAlive","newData","set","$data","$nextTick","setTimeout","hotReloadAPI","nuxtReady","_app","onNuxtReadyCbs","cb","_onNuxtLoaded","afterEach","noopData","noopFetch","getNuxtChildComponents","$parent","$components","$children","$child","nuxtChild","c","__file","module","hot","addHotReload","$component","depth","_hasHotReload","_forceUpdate","$forceUpdate","currentRoute","isHMR","layoutName","pAsyncData","pFetch","__app","mount","$mount","beforeEach","clientFirstMount","unregisterHook","undefined"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport fetch from 'unfetch'\nimport middleware from './middleware.js'\nimport {\n  applyAsyncData,\n  promisify,\n  middlewareSeries,\n  sanitizeComponent,\n  resolveRouteComponents,\n  getMatchedComponents,\n  getMatchedComponentsInstances,\n  flatMapComponents,\n  setContext,\n  getLocation,\n  compile,\n  getQueryDiff,\n  globalHandleError\n} from './utils.js'\nimport { createApp, NuxtError } from './index.js'\nimport NuxtLink from './components/nuxt-link.client.js' // should be included after ./index.js\n\n// Component: <NuxtLink>\nVue.component(NuxtLink.name, NuxtLink)\nVue.component('NLink', NuxtLink)\n\nif (!global.fetch) { global.fetch = fetch }\n\n// Global shared references\nlet _lastPaths = []\nlet app\nlet router\nlet store\n\n// Try to rehydrate SSR data from window\nconst NUXT = window.__NUXT__ || {}\n\nObject.assign(Vue.config, {\"silent\":false,\"performance\":true})\n\nconst logs = NUXT.logs || []\n  if (logs.length > 0) {\n  const ssrLogSyle = 'background: #2E495E;border-radius: 0.5em;color: white;font-weight: bold;padding: 2px 0.5em;'\n  console.group && console.group ('%cNuxt SSR', ssrLogSyle)\n  logs.forEach(logObj => (console[logObj.type] || console.log)(...logObj.args))\n  delete NUXT.logs\n  console.groupEnd && console.groupEnd()\n}\n\n// Setup global Vue error handler\nif (!Vue.config.$nuxt) {\n  const defaultErrorHandler = Vue.config.errorHandler\n  Vue.config.errorHandler = (err, vm, info, ...rest) => {\n    // Call other handler if exist\n    let handled = null\n    if (typeof defaultErrorHandler === 'function') {\n      handled = defaultErrorHandler(err, vm, info, ...rest)\n    }\n    if (handled === true) {\n      return handled\n    }\n\n    if (vm && vm.$root) {\n      const nuxtApp = Object.keys(Vue.config.$nuxt)\n        .find(nuxtInstance => vm.$root[nuxtInstance])\n\n      // Show Nuxt Error Page\n      if (nuxtApp && vm.$root[nuxtApp].error && info !== 'render function') {\n        vm.$root[nuxtApp].error(err)\n      }\n    }\n\n    if (typeof defaultErrorHandler === 'function') {\n      return handled\n    }\n\n    // Log to console\n    if (process.env.NODE_ENV !== 'production') {\n      console.error(err)\n    } else {\n      console.error(err.message || err)\n    }\n  }\n  Vue.config.$nuxt = {}\n}\nVue.config.$nuxt.$nuxt = true\n\nconst errorHandler = Vue.config.errorHandler || console.error\n\n// Create and mount App\ncreateApp().then(mountApp).catch(errorHandler)\n\nfunction componentOption (component, key, ...args) {\n  if (!component || !component.options || !component.options[key]) {\n    return {}\n  }\n  const option = component.options[key]\n  if (typeof option === 'function') {\n    return option(...args)\n  }\n  return option\n}\n\nfunction mapTransitions (Components, to, from) {\n  const componentTransitions = (component) => {\n    const transition = componentOption(component, 'transition', to, from) || {}\n    return (typeof transition === 'string' ? { name: transition } : transition)\n  }\n\n  return Components.map((Component) => {\n    // Clone original object to prevent overrides\n    const transitions = Object.assign({}, componentTransitions(Component))\n\n    // Combine transitions & prefer `leave` transitions of 'from' route\n    if (from && from.matched.length && from.matched[0].components.default) {\n      const fromTransitions = componentTransitions(from.matched[0].components.default)\n      Object.keys(fromTransitions)\n        .filter(key => fromTransitions[key] && key.toLowerCase().includes('leave'))\n        .forEach((key) => { transitions[key] = fromTransitions[key] })\n    }\n\n    return transitions\n  })\n}\n\nasync function loadAsyncComponents (to, from, next) {\n  // Check if route path changed (this._pathChanged), only if the page is not an error (for validate())\n  this._pathChanged = Boolean(app.nuxt.err) || from.path !== to.path\n  this._queryChanged = JSON.stringify(to.query) !== JSON.stringify(from.query)\n  this._diffQuery = (this._queryChanged ? getQueryDiff(to.query, from.query) : [])\n\n  if (this._pathChanged && this.$loading.start && !this.$loading.manual) {\n    this.$loading.start()\n  }\n\n  try {\n    if (!this._pathChanged && this._queryChanged) {\n      const Components = await resolveRouteComponents(\n        to,\n        (Component, instance) => ({ Component, instance })\n      )\n      // Add a marker on each component that it needs to refresh or not\n      const startLoader = Components.some(({ Component, instance }) => {\n        const watchQuery = Component.options.watchQuery\n        if (watchQuery === true) {\n          return true\n        }\n        if (Array.isArray(watchQuery)) {\n          return watchQuery.some(key => this._diffQuery[key])\n        }\n        if (typeof watchQuery === 'function') {\n          return watchQuery.apply(instance, [to.query, from.query])\n        }\n        return false\n      })\n      if (startLoader && this.$loading.start && !this.$loading.manual) {\n        this.$loading.start()\n      }\n    }\n\n    // Call next()\n    next()\n  } catch (error) {\n    const err = error || {}\n    const statusCode = err.statusCode || err.status || (err.response && err.response.status) || 500\n    const message = err.message || ''\n\n    // Handle chunk loading errors\n    // This may be due to a new deployment or a network problem\n    if (/^Loading( CSS)? chunk (\\d)+ failed\\./.test(message)) {\n      window.location.reload(true /* skip cache */)\n      return // prevent error page blinking for user\n    }\n\n    this.error({ statusCode, message })\n    this.$nuxt.$emit('routeChanged', to, from, err)\n    next()\n  }\n}\n\nfunction applySSRData (Component, ssrData) {\n  if (NUXT.serverRendered && ssrData) {\n    applyAsyncData(Component, ssrData)\n  }\n\n  Component._Ctor = Component\n  return Component\n}\n\n// Get matched components\nfunction resolveComponents (router) {\n  const path = getLocation(router.options.base, router.options.mode)\n\n  return flatMapComponents(router.match(path), async (Component, _, match, key, index) => {\n    // If component is not resolved yet, resolve it\n    if (typeof Component === 'function' && !Component.options) {\n      Component = await Component()\n    }\n    // Sanitize it and save it\n    const _Component = applySSRData(sanitizeComponent(Component), NUXT.data ? NUXT.data[index] : null)\n    match.components[key] = _Component\n    return _Component\n  })\n}\n\nfunction callMiddleware (Components, context, layout) {\n  let midd = []\n  let unknownMiddleware = false\n\n  // If layout is undefined, only call global middleware\n  if (typeof layout !== 'undefined') {\n    midd = [] // Exclude global middleware if layout defined (already called before)\n    layout = sanitizeComponent(layout)\n    if (layout.options.middleware) {\n      midd = midd.concat(layout.options.middleware)\n    }\n    Components.forEach((Component) => {\n      if (Component.options.middleware) {\n        midd = midd.concat(Component.options.middleware)\n      }\n    })\n  }\n\n  midd = midd.map((name) => {\n    if (typeof name === 'function') {\n      return name\n    }\n    if (typeof middleware[name] !== 'function') {\n      unknownMiddleware = true\n      this.error({ statusCode: 500, message: 'Unknown middleware ' + name })\n    }\n    return middleware[name]\n  })\n\n  if (unknownMiddleware) {\n    return\n  }\n  return middlewareSeries(midd, context)\n}\n\nasync function render (to, from, next) {\n  if (this._pathChanged === false && this._queryChanged === false) {\n    return next()\n  }\n  // Handle first render on SPA mode\n  if (to === from) {\n    _lastPaths = []\n  } else {\n    const fromMatches = []\n    _lastPaths = getMatchedComponents(from, fromMatches).map((Component, i) => {\n      return compile(from.matched[fromMatches[i]].path)(from.params)\n    })\n  }\n\n  // nextCalled is true when redirected\n  let nextCalled = false\n  const _next = (path) => {\n    if (from.path === path.path && this.$loading.finish) {\n      this.$loading.finish()\n    }\n\n    if (from.path !== path.path && this.$loading.pause) {\n      this.$loading.pause()\n    }\n\n    if (nextCalled) {\n      return\n    }\n\n    nextCalled = true\n    next(path)\n  }\n\n  // Update context\n  await setContext(app, {\n    route: to,\n    from,\n    next: _next.bind(this)\n  })\n  this._dateLastError = app.nuxt.dateErr\n  this._hadError = Boolean(app.nuxt.err)\n\n  // Get route's matched components\n  const matches = []\n  const Components = getMatchedComponents(to, matches)\n\n  // If no Components matched, generate 404\n  if (!Components.length) {\n    // Default layout\n    await callMiddleware.call(this, Components, app.context)\n    if (nextCalled) {\n      return\n    }\n\n    // Load layout for error page\n    const errorLayout = (NuxtError.options || NuxtError).layout\n    const layout = await this.loadLayout(\n      typeof errorLayout === 'function'\n        ? errorLayout.call(NuxtError, app.context)\n        : errorLayout\n    )\n\n    await callMiddleware.call(this, Components, app.context, layout)\n    if (nextCalled) {\n      return\n    }\n\n    // Show error page\n    app.context.error({ statusCode: 404, message: 'This page could not be found' })\n    return next()\n  }\n\n  // Update ._data and other properties if hot reloaded\n  Components.forEach((Component) => {\n    if (Component._Ctor && Component._Ctor.options) {\n      Component.options.asyncData = Component._Ctor.options.asyncData\n      Component.options.fetch = Component._Ctor.options.fetch\n    }\n  })\n\n  // Apply transitions\n  this.setTransitions(mapTransitions(Components, to, from))\n\n  try {\n    // Call middleware\n    await callMiddleware.call(this, Components, app.context)\n    if (nextCalled) {\n      return\n    }\n    if (app.context._errored) {\n      return next()\n    }\n\n    // Set layout\n    let layout = Components[0].options.layout\n    if (typeof layout === 'function') {\n      layout = layout(app.context)\n    }\n    layout = await this.loadLayout(layout)\n\n    // Call middleware for layout\n    await callMiddleware.call(this, Components, app.context, layout)\n    if (nextCalled) {\n      return\n    }\n    if (app.context._errored) {\n      return next()\n    }\n\n    // Call .validate()\n    let isValid = true\n    try {\n      for (const Component of Components) {\n        if (typeof Component.options.validate !== 'function') {\n          continue\n        }\n\n        isValid = await Component.options.validate(app.context)\n\n        if (!isValid) {\n          break\n        }\n      }\n    } catch (validationError) {\n      // ...If .validate() threw an error\n      this.error({\n        statusCode: validationError.statusCode || '500',\n        message: validationError.message\n      })\n      return next()\n    }\n\n    // ...If .validate() returned false\n    if (!isValid) {\n      this.error({ statusCode: 404, message: 'This page could not be found' })\n      return next()\n    }\n\n    let instances\n    // Call asyncData & fetch hooks on components matched by the route.\n    await Promise.all(Components.map((Component, i) => {\n      // Check if only children route changed\n      Component._path = compile(to.matched[matches[i]].path)(to.params)\n      Component._dataRefresh = false\n      // Check if Component need to be refreshed (call asyncData & fetch)\n      // Only if its slug has changed or is watch query changes\n      if ((this._pathChanged && this._queryChanged) || Component._path !== _lastPaths[i]) {\n        Component._dataRefresh = true\n      } else if (!this._pathChanged && this._queryChanged) {\n        const watchQuery = Component.options.watchQuery\n        if (watchQuery === true) {\n          Component._dataRefresh = true\n        } else if (Array.isArray(watchQuery)) {\n          Component._dataRefresh = watchQuery.some(key => this._diffQuery[key])\n        } else if (typeof watchQuery === 'function') {\n          if (!instances) {\n            instances = getMatchedComponentsInstances(to)\n          }\n          Component._dataRefresh = watchQuery.apply(instances[i], [to.query, from.query])\n        }\n      }\n      if (!this._hadError && this._isMounted && !Component._dataRefresh) {\n        return\n      }\n\n      const promises = []\n\n      const hasAsyncData = (\n        Component.options.asyncData &&\n        typeof Component.options.asyncData === 'function'\n      )\n\n      const hasFetch = Boolean(Component.options.fetch)\n\n      const loadingIncrease = (hasAsyncData && hasFetch) ? 30 : 45\n\n      // Call asyncData(context)\n      if (hasAsyncData) {\n        const promise = promisify(Component.options.asyncData, app.context)\n          .then((asyncDataResult) => {\n            applyAsyncData(Component, asyncDataResult)\n\n            if (this.$loading.increase) {\n              this.$loading.increase(loadingIncrease)\n            }\n          })\n        promises.push(promise)\n      }\n\n      // Check disabled page loading\n      this.$loading.manual = Component.options.loading === false\n\n      // Call fetch(context)\n      if (hasFetch) {\n        let p = Component.options.fetch(app.context)\n        if (!p || (!(p instanceof Promise) && (typeof p.then !== 'function'))) {\n          p = Promise.resolve(p)\n        }\n        p.then((fetchResult) => {\n          if (this.$loading.increase) {\n            this.$loading.increase(loadingIncrease)\n          }\n        })\n        promises.push(p)\n      }\n\n      return Promise.all(promises)\n    }))\n\n    // If not redirected\n    if (!nextCalled) {\n      if (this.$loading.finish && !this.$loading.manual) {\n        this.$loading.finish()\n      }\n\n      next()\n    }\n  } catch (err) {\n    const error = err || {}\n    if (error.message === 'ERR_REDIRECT') {\n      return this.$nuxt.$emit('routeChanged', to, from, error)\n    }\n    _lastPaths = []\n\n    globalHandleError(error)\n\n    // Load error layout\n    let layout = (NuxtError.options || NuxtError).layout\n    if (typeof layout === 'function') {\n      layout = layout(app.context)\n    }\n    await this.loadLayout(layout)\n\n    this.error(error)\n    this.$nuxt.$emit('routeChanged', to, from, error)\n    next()\n  }\n}\n\n// Fix components format in matched, it's due to code-splitting of vue-router\nfunction normalizeComponents (to, ___) {\n  flatMapComponents(to, (Component, _, match, key) => {\n    if (typeof Component === 'object' && !Component.options) {\n      // Updated via vue-router resolveAsyncComponents()\n      Component = Vue.extend(Component)\n      Component._Ctor = Component\n      match.components[key] = Component\n    }\n    return Component\n  })\n}\n\nfunction showNextPage (to) {\n  // Hide error component if no error\n  if (this._hadError && this._dateLastError === this.$options.nuxt.dateErr) {\n    this.error()\n  }\n\n  // Set layout\n  let layout = this.$options.nuxt.err\n    ? (NuxtError.options || NuxtError).layout\n    : to.matched[0].components.default.options.layout\n\n  if (typeof layout === 'function') {\n    layout = layout(app.context)\n  }\n  this.setLayout(layout)\n}\n\n// When navigating on a different route but the same component is used, Vue.js\n// Will not update the instance data, so we have to update $data ourselves\nfunction fixPrepatch (to, ___) {\n  if (this._pathChanged === false && this._queryChanged === false) {\n    return\n  }\n\n  const instances = getMatchedComponentsInstances(to)\n  const Components = getMatchedComponents(to)\n\n  Vue.nextTick(() => {\n    instances.forEach((instance, i) => {\n      if (!instance || instance._isDestroyed) {\n        return\n      }\n\n      if (\n        instance.constructor._dataRefresh &&\n        Components[i] === instance.constructor &&\n        instance.$vnode.data.keepAlive !== true &&\n        typeof instance.constructor.options.data === 'function'\n      ) {\n        const newData = instance.constructor.options.data.call(instance)\n        for (const key in newData) {\n          Vue.set(instance.$data, key, newData[key])\n        }\n\n        // Ensure to trigger scroll event after calling scrollBehavior\n        window.$nuxt.$nextTick(() => {\n          window.$nuxt.$emit('triggerScroll')\n        })\n      }\n    })\n    showNextPage.call(this, to)\n\n    // Hot reloading\n    setTimeout(() => hotReloadAPI(this), 100)\n  })\n}\n\nfunction nuxtReady (_app) {\n  window.onNuxtReadyCbs.forEach((cb) => {\n    if (typeof cb === 'function') {\n      cb(_app)\n    }\n  })\n  // Special JSDOM\n  if (typeof window._onNuxtLoaded === 'function') {\n    window._onNuxtLoaded(_app)\n  }\n  // Add router hooks\n  router.afterEach((to, from) => {\n    // Wait for fixPrepatch + $data updates\n    Vue.nextTick(() => _app.$nuxt.$emit('routeChanged', to, from))\n  })\n}\n\nconst noopData = () => { return {} }\nconst noopFetch = () => {}\n\n// Special hot reload with asyncData(context)\nfunction getNuxtChildComponents ($parent, $components = []) {\n  $parent.$children.forEach(($child) => {\n    if ($child.$vnode && $child.$vnode.data.nuxtChild && !$components.find(c =>(c.$options.__file === $child.$options.__file))) {\n      $components.push($child)\n    }\n    if ($child.$children && $child.$children.length) {\n      getNuxtChildComponents($child, $components)\n    }\n  })\n\n  return $components\n}\n\nfunction hotReloadAPI(_app) {\n  if (!module.hot) return\n\n  let $components = getNuxtChildComponents(_app.$nuxt, [])\n\n  $components.forEach(addHotReload.bind(_app))\n}\n\nfunction addHotReload ($component, depth) {\n  if ($component.$vnode.data._hasHotReload) return\n  $component.$vnode.data._hasHotReload = true\n\n  var _forceUpdate = $component.$forceUpdate.bind($component.$parent)\n\n  $component.$vnode.context.$forceUpdate = async () => {\n    let Components = getMatchedComponents(router.currentRoute)\n    let Component = Components[depth]\n    if (!Component) {\n      return _forceUpdate()\n    }\n    if (typeof Component === 'object' && !Component.options) {\n      // Updated via vue-router resolveAsyncComponents()\n      Component = Vue.extend(Component)\n      Component._Ctor = Component\n    }\n    this.error()\n    let promises = []\n    const next = function (path) {\n      this.$loading.finish && this.$loading.finish()\n      router.push(path)\n    }\n    await setContext(app, {\n      route: router.currentRoute,\n      isHMR: true,\n      next: next.bind(this)\n    })\n    const context = app.context\n\n    if (this.$loading.start && !this.$loading.manual) {\n      this.$loading.start()\n    }\n\n    callMiddleware.call(this, Components, context)\n    .then(() => {\n      // If layout changed\n      if (depth !== 0) {\n        return\n      }\n\n      let layout = Component.options.layout || 'default'\n      if (typeof layout === 'function') {\n        layout = layout(context)\n      }\n      if (this.layoutName === layout) {\n        return\n      }\n      let promise = this.loadLayout(layout)\n      promise.then(() => {\n        this.setLayout(layout)\n        Vue.nextTick(() => hotReloadAPI(this))\n      })\n      return promise\n    })\n\n    .then(() => {\n      return callMiddleware.call(this, Components, context, this.layout)\n    })\n\n    .then(() => {\n      // Call asyncData(context)\n      let pAsyncData = promisify(Component.options.asyncData || noopData, context)\n      pAsyncData.then((asyncDataResult) => {\n        applyAsyncData(Component, asyncDataResult)\n        this.$loading.increase && this.$loading.increase(30)\n      })\n      promises.push(pAsyncData)\n\n      // Call fetch()\n      Component.options.fetch = Component.options.fetch || noopFetch\n      let pFetch = Component.options.fetch(context)\n      if (!pFetch || (!(pFetch instanceof Promise) && (typeof pFetch.then !== 'function'))) { pFetch = Promise.resolve(pFetch) }\n      pFetch.then(() => this.$loading.increase && this.$loading.increase(30))\n      promises.push(pFetch)\n\n      return Promise.all(promises)\n    })\n    .then(() => {\n      this.$loading.finish && this.$loading.finish()\n      _forceUpdate()\n      setTimeout(() => hotReloadAPI(this), 100)\n    })\n  }\n}\n\nasync function mountApp (__app) {\n  // Set global variables\n  app = __app.app\n  router = __app.router\n  store = __app.store\n\n  // Create Vue instance\n  const _app = new Vue(app)\n\n  // Load layout\n  const layout = NUXT.layout || 'default'\n  await _app.loadLayout(layout)\n  _app.setLayout(layout)\n\n  // Mounts Vue app to DOM element\n  const mount = () => {\n    _app.$mount('#__nuxt')\n\n    // Add afterEach router hooks\n    router.afterEach(normalizeComponents)\n    router.afterEach(fixPrepatch.bind(_app))\n\n    // Listen for first Vue update\n    Vue.nextTick(() => {\n      // Call window.{{globals.readyCallback}} callbacks\n      nuxtReady(_app)\n\n      // Enable hot reloading\n      hotReloadAPI(_app)\n    })\n  }\n\n  // Resolve route components\n  const Components = await Promise.all(resolveComponents(router))\n\n  // Enable transitions\n  _app.setTransitions = _app.$options.nuxt.setTransitions.bind(_app)\n  if (Components.length) {\n    _app.setTransitions(mapTransitions(Components, router.currentRoute))\n    _lastPaths = router.currentRoute.matched.map(route => compile(route.path)(router.currentRoute.params))\n  }\n\n  // Initialize error handler\n  _app.$loading = {} // To avoid error while _app.$nuxt does not exist\n  if (NUXT.error) {\n    _app.error(NUXT.error)\n  }\n\n  // Add beforeEach router hooks\n  router.beforeEach(loadAsyncComponents.bind(_app))\n  router.beforeEach(render.bind(_app))\n\n  // If page already is server rendered\n  if (NUXT.serverRendered) {\n    mount()\n    return\n  }\n\n  // First render on client-side\n  const clientFirstMount = () => {\n    normalizeComponents(router.currentRoute, router.currentRoute)\n    showNextPage.call(_app, router.currentRoute)\n    // Don't call fixPrepatch.call(_app, router.currentRoute, router.currentRoute) since it's first render\n    mount()\n  }\n\n  render.call(_app, router.currentRoute, router.currentRoute, (path) => {\n    // If not redirected\n    if (!path) {\n      clientFirstMount()\n      return\n    }\n\n    // Add a one-time afterEach hook to\n    // mount the app wait for redirect and route gets resolved\n    const unregisterHook = router.afterEach((to, from) => {\n      unregisterHook()\n      clientFirstMount()\n    })\n\n    // Push the path and let route to be resolved\n    router.push(path, undefined, (err) => {\n      if (err) {\n        errorHandler(err)\n      }\n    })\n  })\n}\n"]}]}