{"remainingRequest":"/Users/pro/Documents/WebWork/GitHub/iBlog-master/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/pro/Documents/WebWork/GitHub/iBlog-master/.nuxt/auth/storage.js","dependencies":[{"path":"/Users/pro/Documents/WebWork/GitHub/iBlog-master/.nuxt/auth/storage.js","mtime":1597482623749},{"path":"/Users/pro/Documents/WebWork/GitHub/iBlog-master/node_modules/cache-loader/dist/cjs.js","mtime":1583743859870},{"path":"/Users/pro/Documents/WebWork/GitHub/iBlog-master/node_modules/babel-loader/lib/index.js","mtime":1578715241550}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCB7IHBhcnNlIGFzIHBhcnNlQ29va2llLCBzZXJpYWxpemUgYXMgc2VyaWFsaXplQ29va2llIH0gZnJvbSAnY29va2llJzsKaW1wb3J0IHsgaXNVbnNldCwgaXNTZXQsIGRlY29kZVZhbHVlLCBlbmNvZGVWYWx1ZSwgZ2V0UHJvcCB9IGZyb20gJy4vdXRpbGl0aWVzJzsKCnZhciBTdG9yYWdlID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gU3RvcmFnZShjdHgsIG9wdGlvbnMpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdG9yYWdlKTsKCiAgICB0aGlzLmN0eCA9IGN0eDsKICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7CgogICAgdGhpcy5faW5pdFN0YXRlKCk7CiAgfSAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAvLyBVbml2ZXJzYWwKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCgogIF9jcmVhdGVDbGFzcyhTdG9yYWdlLCBbewogICAga2V5OiAic2V0VW5pdmVyc2FsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRVbml2ZXJzYWwoa2V5LCB2YWx1ZSkgewogICAgICAvLyBVbnNldCBudWxsLCB1bmRlZmluZWQKICAgICAgaWYgKGlzVW5zZXQodmFsdWUpKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlVW5pdmVyc2FsKGtleSk7CiAgICAgIH0gLy8gTG9jYWwgc3RhdGUKCgogICAgICB0aGlzLnNldFN0YXRlKGtleSwgdmFsdWUpOyAvLyBDb29raWVzCgogICAgICB0aGlzLnNldENvb2tpZShrZXksIHZhbHVlKTsgLy8gTG9jYWwgU3RvcmFnZQoKICAgICAgdGhpcy5zZXRMb2NhbFN0b3JhZ2Uoa2V5LCB2YWx1ZSk7CiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRVbml2ZXJzYWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFVuaXZlcnNhbChrZXkpIHsKICAgICAgLy8gTG9jYWwgc3RhdGUKICAgICAgdmFyIHZhbHVlID0gdGhpcy5nZXRTdGF0ZShrZXkpOyAvLyBDb29raWVzCgogICAgICBpZiAoaXNVbnNldCh2YWx1ZSkpIHsKICAgICAgICB2YWx1ZSA9IHRoaXMuZ2V0Q29va2llKGtleSk7CiAgICAgIH0gLy8gTG9jYWwgU3RvcmFnZQoKCiAgICAgIGlmIChpc1Vuc2V0KHZhbHVlKSkgewogICAgICAgIHZhbHVlID0gdGhpcy5nZXRMb2NhbFN0b3JhZ2Uoa2V5KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHZhbHVlOwogICAgfQogIH0sIHsKICAgIGtleTogInN5bmNVbml2ZXJzYWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHN5bmNVbml2ZXJzYWwoa2V5LCBkZWZhdWx0VmFsdWUpIHsKICAgICAgdmFyIHZhbHVlID0gdGhpcy5nZXRVbml2ZXJzYWwoa2V5KTsKCiAgICAgIGlmIChpc1Vuc2V0KHZhbHVlKSAmJiBpc1NldChkZWZhdWx0VmFsdWUpKSB7CiAgICAgICAgdmFsdWUgPSBkZWZhdWx0VmFsdWU7CiAgICAgIH0KCiAgICAgIGlmIChpc1NldCh2YWx1ZSkpIHsKICAgICAgICB0aGlzLnNldFVuaXZlcnNhbChrZXksIHZhbHVlKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHZhbHVlOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbW92ZVVuaXZlcnNhbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlVW5pdmVyc2FsKGtleSkgewogICAgICB0aGlzLnJlbW92ZVN0YXRlKGtleSk7CiAgICAgIHRoaXMucmVtb3ZlTG9jYWxTdG9yYWdlKGtleSk7CiAgICAgIHRoaXMucmVtb3ZlQ29va2llKGtleSk7CiAgICB9IC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gTG9jYWwgc3RhdGUgKHJlYWN0aXZlKQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIH0sIHsKICAgIGtleTogIl9pbml0U3RhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9pbml0U3RhdGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvLyBQcml2YXRlIHN0YXRlIGlzIHN1aXRhYmxlIHRvIGtlZXAgaW5mb3JtYXRpb24gbm90IGJlaW5nIGV4cG9zZWQgdG8gVnVleCBzdG9yZQogICAgICAvLyBUaGlzIGhlbHBzIHByZXZlbnQgc3RlYWxpbmcgdG9rZW4gZnJvbSBTU1IgcmVzcG9uc2UgSFRNTAogICAgICBWdWUuc2V0KHRoaXMsICdfc3RhdGUnLCB7fSk7IC8vIFVzZSB2dWV4IGZvciBsb2NhbCBzdGF0ZSdzIGlmIHBvc3NpYmxlCgogICAgICB0aGlzLl91c2VWdWV4ID0gdGhpcy5vcHRpb25zLnZ1ZXggJiYgdGhpcy5jdHguc3RvcmU7CgogICAgICBpZiAodGhpcy5fdXNlVnVleCkgewogICAgICAgIHZhciBzdG9yZU1vZHVsZSA9IHsKICAgICAgICAgIG5hbWVzcGFjZWQ6IHRydWUsCiAgICAgICAgICBzdGF0ZTogZnVuY3Rpb24gc3RhdGUoKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy5vcHRpb25zLmluaXRpYWxTdGF0ZTsKICAgICAgICAgIH0sCiAgICAgICAgICBtdXRhdGlvbnM6IHsKICAgICAgICAgICAgU0VUOiBmdW5jdGlvbiBTRVQoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgICAgICAgICBWdWUuc2V0KHN0YXRlLCBwYXlsb2FkLmtleSwgcGF5bG9hZC52YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHRoaXMuY3R4LnN0b3JlLnJlZ2lzdGVyTW9kdWxlKHRoaXMub3B0aW9ucy52dWV4Lm5hbWVzcGFjZSwgc3RvcmVNb2R1bGUsIHsKICAgICAgICAgIHByZXNlcnZlU3RhdGU6IEJvb2xlYW4odGhpcy5jdHguc3RvcmUuc3RhdGVbdGhpcy5vcHRpb25zLnZ1ZXgubmFtZXNwYWNlXSkKICAgICAgICB9KTsKICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5jdHguc3RvcmUuc3RhdGVbdGhpcy5vcHRpb25zLnZ1ZXgubmFtZXNwYWNlXTsKICAgICAgfSBlbHNlIHsKICAgICAgICBWdWUuc2V0KHRoaXMsICdzdGF0ZScsIHt9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInNldFN0YXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRTdGF0ZShrZXksIHZhbHVlKSB7CiAgICAgIGlmIChrZXlbMF0gPT09ICdfJykgewogICAgICAgIFZ1ZS5zZXQodGhpcy5fc3RhdGUsIGtleSwgdmFsdWUpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLl91c2VWdWV4KSB7CiAgICAgICAgICB0aGlzLmN0eC5zdG9yZS5jb21taXQodGhpcy5vcHRpb25zLnZ1ZXgubmFtZXNwYWNlICsgJy9TRVQnLCB7CiAgICAgICAgICAgIGtleToga2V5LAogICAgICAgICAgICB2YWx1ZTogdmFsdWUKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBWdWUuc2V0KHRoaXMuc3RhdGUsIGtleSwgdmFsdWUpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHZhbHVlOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFN0YXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTdGF0ZShrZXkpIHsKICAgICAgaWYgKGtleVswXSAhPT0gJ18nKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGVba2V5XTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpcy5fc3RhdGVba2V5XTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogIndhdGNoU3RhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHdhdGNoU3RhdGUoa2V5LCBmbikgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGlmICh0aGlzLl91c2VWdWV4KSB7CiAgICAgICAgcmV0dXJuIHRoaXMuY3R4LnN0b3JlLndhdGNoKGZ1bmN0aW9uIChzdGF0ZSkgewogICAgICAgICAgcmV0dXJuIGdldFByb3Aoc3RhdGVbX3RoaXMyLm9wdGlvbnMudnVleC5uYW1lc3BhY2VdLCBrZXkpOwogICAgICAgIH0sIGZuKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInJlbW92ZVN0YXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVTdGF0ZShrZXkpIHsKICAgICAgdGhpcy5zZXRTdGF0ZShrZXksIHVuZGVmaW5lZCk7CiAgICB9IC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gTG9jYWwgc3RvcmFnZQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIH0sIHsKICAgIGtleTogInNldExvY2FsU3RvcmFnZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0TG9jYWxTdG9yYWdlKGtleSwgdmFsdWUpIHsKICAgICAgLy8gVW5zZXQgbnVsbCwgdW5kZWZpbmVkCiAgICAgIGlmIChpc1Vuc2V0KHZhbHVlKSkgewogICAgICAgIHJldHVybiB0aGlzLnJlbW92ZUxvY2FsU3RvcmFnZShrZXkpOwogICAgICB9CgogICAgICBpZiAodHlwZW9mIGxvY2FsU3RvcmFnZSA9PT0gJ3VuZGVmaW5lZCcgfHwgIXRoaXMub3B0aW9ucy5sb2NhbFN0b3JhZ2UpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBfa2V5ID0gdGhpcy5vcHRpb25zLmxvY2FsU3RvcmFnZS5wcmVmaXggKyBrZXk7CgogICAgICB0cnkgewogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKF9rZXksIGVuY29kZVZhbHVlKHZhbHVlKSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5pZ25vcmVFeGNlcHRpb25zKSB7CiAgICAgICAgICB0aHJvdyBlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHZhbHVlOwogICAgfQogIH0sIHsKICAgIGtleTogImdldExvY2FsU3RvcmFnZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TG9jYWxTdG9yYWdlKGtleSkgewogICAgICBpZiAodHlwZW9mIGxvY2FsU3RvcmFnZSA9PT0gJ3VuZGVmaW5lZCcgfHwgIXRoaXMub3B0aW9ucy5sb2NhbFN0b3JhZ2UpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBfa2V5ID0gdGhpcy5vcHRpb25zLmxvY2FsU3RvcmFnZS5wcmVmaXggKyBrZXk7CgogICAgICB2YXIgdmFsdWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShfa2V5KTsKICAgICAgcmV0dXJuIGRlY29kZVZhbHVlKHZhbHVlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW1vdmVMb2NhbFN0b3JhZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUxvY2FsU3RvcmFnZShrZXkpIHsKICAgICAgaWYgKHR5cGVvZiBsb2NhbFN0b3JhZ2UgPT09ICd1bmRlZmluZWQnIHx8ICF0aGlzLm9wdGlvbnMubG9jYWxTdG9yYWdlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgX2tleSA9IHRoaXMub3B0aW9ucy5sb2NhbFN0b3JhZ2UucHJlZml4ICsga2V5OwoKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oX2tleSk7CiAgICB9IC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gQ29va2llcwogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIH0sIHsKICAgIGtleTogImdldENvb2tpZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldENvb2tpZXMoKSB7CiAgICAgIHZhciBjb29raWVTdHIgPSBwcm9jZXNzLmNsaWVudCA/IGRvY3VtZW50LmNvb2tpZSA6IHRoaXMuY3R4LnJlcS5oZWFkZXJzLmNvb2tpZTsKICAgICAgcmV0dXJuIHBhcnNlQ29va2llKGNvb2tpZVN0ciB8fCAnJykgfHwge307CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0Q29va2llIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRDb29raWUoa2V5LCB2YWx1ZSkgewogICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307CgogICAgICBpZiAoIXRoaXMub3B0aW9ucy5jb29raWUgfHwgcHJvY2Vzcy5zZXJ2ZXIgJiYgIXRoaXMuY3R4LnJlcykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIF9rZXkgPSB0aGlzLm9wdGlvbnMuY29va2llLnByZWZpeCArIGtleTsKCiAgICAgIHZhciBfb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMub3B0aW9ucy5jb29raWUub3B0aW9ucywgb3B0aW9ucyk7CgogICAgICB2YXIgX3ZhbHVlID0gZW5jb2RlVmFsdWUodmFsdWUpOyAvLyBVbnNldCBudWxsLCB1bmRlZmluZWQKCgogICAgICBpZiAoaXNVbnNldCh2YWx1ZSkpIHsKICAgICAgICBfb3B0aW9ucy5tYXhBZ2UgPSAtMTsKICAgICAgfSAvLyBBY2NlcHQgZXhwaXJlcyBhcyBhIG51bWJlciBmb3IganMtY29va2llIGNvbXBhdGlibGl0eQoKCiAgICAgIGlmICh0eXBlb2YgX29wdGlvbnMuZXhwaXJlcyA9PT0gJ251bWJlcicpIHsKICAgICAgICBfb3B0aW9ucy5leHBpcmVzID0gbmV3IERhdGUobmV3IERhdGUoKSAqIDEgKyBfb3B0aW9ucy5leHBpcmVzICogODY0ZSs1KTsKICAgICAgfQoKICAgICAgdmFyIHNlcmlhbGl6ZWRDb29raWUgPSBzZXJpYWxpemVDb29raWUoX2tleSwgX3ZhbHVlLCBfb3B0aW9ucyk7CgogICAgICBpZiAocHJvY2Vzcy5jbGllbnQpIHsKICAgICAgICAvLyBTZXQgaW4gYnJvd3NlcgogICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IHNlcmlhbGl6ZWRDb29raWU7CiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5zZXJ2ZXIgJiYgdGhpcy5jdHgucmVzKSB7CiAgICAgICAgLy8gU2VuZCBTZXQtQ29va2llIGhlYWRlciBmcm9tIHNlcnZlciBzaWRlCiAgICAgICAgdmFyIHByZXZDb29raWVzID0gdGhpcy5jdHgucmVzLmdldEhlYWRlcignU2V0LUNvb2tpZScpOwogICAgICAgIHRoaXMuY3R4LnJlcy5zZXRIZWFkZXIoJ1NldC1Db29raWUnLCBbXS5jb25jYXQocHJldkNvb2tpZXMsIHNlcmlhbGl6ZWRDb29raWUpLmZpbHRlcihmdW5jdGlvbiAodikgewogICAgICAgICAgcmV0dXJuIHY7CiAgICAgICAgfSkpOwogICAgICB9CgogICAgICByZXR1cm4gdmFsdWU7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0Q29va2llIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDb29raWUoa2V5KSB7CiAgICAgIGlmICghdGhpcy5vcHRpb25zLmNvb2tpZSB8fCBwcm9jZXNzLnNlcnZlciAmJiAhdGhpcy5jdHgucmVxKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgX2tleSA9IHRoaXMub3B0aW9ucy5jb29raWUucHJlZml4ICsga2V5OwoKICAgICAgdmFyIGNvb2tpZXMgPSB0aGlzLmdldENvb2tpZXMoKTsKICAgICAgdmFyIHZhbHVlID0gY29va2llc1tfa2V5XSA/IGRlY29kZVVSSUNvbXBvbmVudChjb29raWVzW19rZXldKSA6IHVuZGVmaW5lZDsKICAgICAgcmV0dXJuIGRlY29kZVZhbHVlKHZhbHVlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW1vdmVDb29raWUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUNvb2tpZShrZXksIG9wdGlvbnMpIHsKICAgICAgdGhpcy5zZXRDb29raWUoa2V5LCB1bmRlZmluZWQsIG9wdGlvbnMpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFN0b3JhZ2U7Cn0oKTsKCmV4cG9ydCB7IFN0b3JhZ2UgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"sources":["/Users/pro/Documents/WebWork/GitHub/iBlog-master/.nuxt/auth/storage.js"],"names":["Vue","parse","parseCookie","serialize","serializeCookie","isUnset","isSet","decodeValue","encodeValue","getProp","Storage","ctx","options","_initState","key","value","removeUniversal","setState","setCookie","setLocalStorage","getState","getCookie","getLocalStorage","defaultValue","getUniversal","setUniversal","removeState","removeLocalStorage","removeCookie","set","_useVuex","vuex","store","storeModule","namespaced","state","initialState","mutations","SET","payload","registerModule","namespace","preserveState","Boolean","_state","commit","fn","watch","undefined","localStorage","_key","prefix","setItem","e","ignoreExceptions","getItem","removeItem","cookieStr","process","client","document","cookie","req","headers","server","res","_options","Object","assign","_value","maxAge","expires","Date","serializedCookie","prevCookies","getHeader","setHeader","concat","filter","v","cookies","getCookies","decodeURIComponent"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport { parse as parseCookie, serialize as serializeCookie } from 'cookie'\nimport { isUnset, isSet, decodeValue, encodeValue, getProp } from './utilities'\n\nexport default class Storage {\n  constructor (ctx, options) {\n    this.ctx = ctx\n    this.options = options\n\n    this._initState()\n  }\n\n  // ------------------------------------\n  // Universal\n  // ------------------------------------\n\n  setUniversal (key, value) {\n    // Unset null, undefined\n    if (isUnset(value)) {\n      return this.removeUniversal(key)\n    }\n\n    // Local state\n    this.setState(key, value)\n\n    // Cookies\n    this.setCookie(key, value)\n\n    // Local Storage\n    this.setLocalStorage(key, value)\n\n    return value\n  }\n\n  getUniversal (key) {\n    // Local state\n    let value = this.getState(key)\n\n    // Cookies\n    if (isUnset(value)) {\n      value = this.getCookie(key)\n    }\n\n    // Local Storage\n    if (isUnset(value)) {\n      value = this.getLocalStorage(key)\n    }\n\n    return value\n  }\n\n  syncUniversal (key, defaultValue) {\n    let value = this.getUniversal(key)\n\n    if (isUnset(value) && isSet(defaultValue)) {\n      value = defaultValue\n    }\n\n    if (isSet(value)) {\n      this.setUniversal(key, value)\n    }\n\n    return value\n  }\n\n  removeUniversal (key) {\n    this.removeState(key)\n    this.removeLocalStorage(key)\n    this.removeCookie(key)\n  }\n\n  // ------------------------------------\n  // Local state (reactive)\n  // ------------------------------------\n\n  _initState () {\n    // Private state is suitable to keep information not being exposed to Vuex store\n    // This helps prevent stealing token from SSR response HTML\n    Vue.set(this, '_state', {})\n\n    // Use vuex for local state's if possible\n    this._useVuex = this.options.vuex && this.ctx.store\n\n    if (this._useVuex) {\n      const storeModule = {\n        namespaced: true,\n        state: () => this.options.initialState,\n        mutations: {\n          SET (state, payload) {\n            Vue.set(state, payload.key, payload.value)\n          }\n        }\n      }\n\n      this.ctx.store.registerModule(this.options.vuex.namespace, storeModule, {\n        preserveState: Boolean(this.ctx.store.state[this.options.vuex.namespace])\n      })\n\n      this.state = this.ctx.store.state[this.options.vuex.namespace]\n    } else {\n      Vue.set(this, 'state', {})\n    }\n  }\n\n  setState (key, value) {\n    if (key[0] === '_') {\n      Vue.set(this._state, key, value)\n    } else {\n      if (this._useVuex) {\n        this.ctx.store.commit(this.options.vuex.namespace + '/SET', {\n          key,\n          value\n        })\n      } else {\n        Vue.set(this.state, key, value)\n      }\n    }\n\n    return value\n  }\n\n  getState (key) {\n    if (key[0] !== '_') {\n      return this.state[key]\n    } else {\n      return this._state[key]\n    }\n  }\n\n  watchState (key, fn) {\n    if (this._useVuex) {\n      return this.ctx.store.watch(\n        state => getProp(state[this.options.vuex.namespace], key),\n        fn\n      )\n    }\n  }\n\n  removeState (key) {\n    this.setState(key, undefined)\n  }\n\n  // ------------------------------------\n  // Local storage\n  // ------------------------------------\n\n  setLocalStorage (key, value) {\n    // Unset null, undefined\n    if (isUnset(value)) {\n      return this.removeLocalStorage(key)\n    }\n\n    if (typeof localStorage === 'undefined' || !this.options.localStorage) {\n      return\n    }\n\n    const _key = this.options.localStorage.prefix + key\n\n    try {\n      localStorage.setItem(_key, encodeValue(value))\n    } catch (e) {\n      if (!this.options.ignoreExceptions) {\n        throw e\n      }\n    }\n\n    return value\n  }\n\n  getLocalStorage (key) {\n    if (typeof localStorage === 'undefined' || !this.options.localStorage) {\n      return\n    }\n\n    const _key = this.options.localStorage.prefix + key\n\n    const value = localStorage.getItem(_key)\n\n    return decodeValue(value)\n  }\n\n  removeLocalStorage (key) {\n    if (typeof localStorage === 'undefined' || !this.options.localStorage) {\n      return\n    }\n\n    const _key = this.options.localStorage.prefix + key\n    localStorage.removeItem(_key)\n  }\n\n  // ------------------------------------\n  // Cookies\n  // ------------------------------------\n  getCookies () {\n    const cookieStr = process.client\n      ? document.cookie\n      : this.ctx.req.headers.cookie\n\n    return parseCookie(cookieStr || '') || {}\n  }\n\n  setCookie (key, value, options = {}) {\n    if (!this.options.cookie || (process.server && !this.ctx.res)) {\n      return\n    }\n\n    const _key = this.options.cookie.prefix + key\n    const _options = Object.assign({}, this.options.cookie.options, options)\n    const _value = encodeValue(value)\n\n    // Unset null, undefined\n    if (isUnset(value)) {\n      _options.maxAge = -1\n    }\n\n    // Accept expires as a number for js-cookie compatiblity\n    if (typeof _options.expires === 'number') {\n      _options.expires = new Date(new Date() * 1 + _options.expires * 864e+5)\n    }\n\n    const serializedCookie = serializeCookie(_key, _value, _options)\n\n    if (process.client) {\n      // Set in browser\n      document.cookie = serializedCookie\n    } else if (process.server && this.ctx.res) {\n      // Send Set-Cookie header from server side\n      const prevCookies = this.ctx.res.getHeader('Set-Cookie')\n      this.ctx.res.setHeader('Set-Cookie', [].concat(prevCookies, serializedCookie).filter(v => v))\n    }\n\n    return value\n  }\n\n  getCookie (key) {\n    if (!this.options.cookie || (process.server && !this.ctx.req)) {\n      return\n    }\n\n    const _key = this.options.cookie.prefix + key\n\n    const cookies = this.getCookies()\n\n    const value = cookies[_key] ? decodeURIComponent(cookies[_key]) : undefined\n\n    return decodeValue(value)\n  }\n\n  removeCookie (key, options) {\n    this.setCookie(key, undefined, options)\n  }\n}\n"]}]}