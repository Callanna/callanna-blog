{"remainingRequest":"/Users/pro/Documents/WebWork/GitHub/Callanna-iBlog/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/pro/Documents/WebWork/GitHub/Callanna-iBlog/.nuxt/client.js","dependencies":[{"path":"/Users/pro/Documents/WebWork/GitHub/Callanna-iBlog/.nuxt/client.js","mtime":1598665742796},{"path":"/Users/pro/Documents/WebWork/GitHub/Callanna-iBlog/node_modules/cache-loader/dist/cjs.js","mtime":1583743859870},{"path":"/Users/pro/Documents/WebWork/GitHub/Callanna-iBlog/node_modules/babel-loader/lib/index.js","mtime":1578715241550}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNy5zeW1ib2wuYXN5bmMtaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYuc3ltYm9sIjsKaW1wb3J0IF90eXBlb2YgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYucmVnZXhwLm1hdGNoIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczcuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYuYXJyYXkuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYucHJvbWlzZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5vYmplY3QuYXNzaWduIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM3LnByb21pc2UuZmluYWxseSI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IGZldGNoIGZyb20gJ3VuZmV0Y2gnOwppbXBvcnQgbWlkZGxld2FyZSBmcm9tICcuL21pZGRsZXdhcmUuanMnOwppbXBvcnQgeyBhcHBseUFzeW5jRGF0YSwgcHJvbWlzaWZ5LCBtaWRkbGV3YXJlU2VyaWVzLCBzYW5pdGl6ZUNvbXBvbmVudCwgcmVzb2x2ZVJvdXRlQ29tcG9uZW50cywgZ2V0TWF0Y2hlZENvbXBvbmVudHMsIGdldE1hdGNoZWRDb21wb25lbnRzSW5zdGFuY2VzLCBmbGF0TWFwQ29tcG9uZW50cywgc2V0Q29udGV4dCwgZ2V0TG9jYXRpb24sIGNvbXBpbGUsIGdldFF1ZXJ5RGlmZiwgZ2xvYmFsSGFuZGxlRXJyb3IgfSBmcm9tICcuL3V0aWxzLmpzJzsKaW1wb3J0IHsgY3JlYXRlQXBwLCBOdXh0RXJyb3IgfSBmcm9tICcuL2luZGV4LmpzJzsKaW1wb3J0IE51eHRMaW5rIGZyb20gJy4vY29tcG9uZW50cy9udXh0LWxpbmsuY2xpZW50LmpzJzsgLy8gc2hvdWxkIGJlIGluY2x1ZGVkIGFmdGVyIC4vaW5kZXguanMKLy8gQ29tcG9uZW50OiA8TnV4dExpbms+CgpWdWUuY29tcG9uZW50KE51eHRMaW5rLm5hbWUsIE51eHRMaW5rKTsKVnVlLmNvbXBvbmVudCgnTkxpbmsnLCBOdXh0TGluayk7CgppZiAoIWdsb2JhbC5mZXRjaCkgewogIGdsb2JhbC5mZXRjaCA9IGZldGNoOwp9IC8vIEdsb2JhbCBzaGFyZWQgcmVmZXJlbmNlcwoKCnZhciBfbGFzdFBhdGhzID0gW107CnZhciBhcHA7CnZhciByb3V0ZXI7CnZhciBzdG9yZTsgLy8gVHJ5IHRvIHJlaHlkcmF0ZSBTU1IgZGF0YSBmcm9tIHdpbmRvdwoKdmFyIE5VWFQgPSB3aW5kb3cuX19OVVhUX18gfHwge307Ck9iamVjdC5hc3NpZ24oVnVlLmNvbmZpZywgewogICJzaWxlbnQiOiB0cnVlLAogICJwZXJmb3JtYW5jZSI6IGZhbHNlCn0pOwp2YXIgZXJyb3JIYW5kbGVyID0gVnVlLmNvbmZpZy5lcnJvckhhbmRsZXIgfHwgY29uc29sZS5lcnJvcjsgLy8gQ3JlYXRlIGFuZCBtb3VudCBBcHAKCmNyZWF0ZUFwcCgpLnRoZW4obW91bnRBcHApLmNhdGNoKGVycm9ySGFuZGxlcik7CgpmdW5jdGlvbiBjb21wb25lbnRPcHRpb24oY29tcG9uZW50LCBrZXkpIHsKICBpZiAoIWNvbXBvbmVudCB8fCAhY29tcG9uZW50Lm9wdGlvbnMgfHwgIWNvbXBvbmVudC5vcHRpb25zW2tleV0pIHsKICAgIHJldHVybiB7fTsKICB9CgogIHZhciBvcHRpb24gPSBjb21wb25lbnQub3B0aW9uc1trZXldOwoKICBpZiAodHlwZW9mIG9wdGlvbiA9PT0gJ2Z1bmN0aW9uJykgewogICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiA+IDIgPyBfbGVuIC0gMiA6IDApLCBfa2V5ID0gMjsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgICBhcmdzW19rZXkgLSAyXSA9IGFyZ3VtZW50c1tfa2V5XTsKICAgIH0KCiAgICByZXR1cm4gb3B0aW9uLmFwcGx5KHZvaWQgMCwgYXJncyk7CiAgfQoKICByZXR1cm4gb3B0aW9uOwp9CgpmdW5jdGlvbiBtYXBUcmFuc2l0aW9ucyhDb21wb25lbnRzLCB0bywgZnJvbSkgewogIHZhciBjb21wb25lbnRUcmFuc2l0aW9ucyA9IGZ1bmN0aW9uIGNvbXBvbmVudFRyYW5zaXRpb25zKGNvbXBvbmVudCkgewogICAgdmFyIHRyYW5zaXRpb24gPSBjb21wb25lbnRPcHRpb24oY29tcG9uZW50LCAndHJhbnNpdGlvbicsIHRvLCBmcm9tKSB8fCB7fTsKICAgIHJldHVybiB0eXBlb2YgdHJhbnNpdGlvbiA9PT0gJ3N0cmluZycgPyB7CiAgICAgIG5hbWU6IHRyYW5zaXRpb24KICAgIH0gOiB0cmFuc2l0aW9uOwogIH07CgogIHJldHVybiBDb21wb25lbnRzLm1hcChmdW5jdGlvbiAoQ29tcG9uZW50KSB7CiAgICAvLyBDbG9uZSBvcmlnaW5hbCBvYmplY3QgdG8gcHJldmVudCBvdmVycmlkZXMKICAgIHZhciB0cmFuc2l0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbXBvbmVudFRyYW5zaXRpb25zKENvbXBvbmVudCkpOyAvLyBDb21iaW5lIHRyYW5zaXRpb25zICYgcHJlZmVyIGBsZWF2ZWAgdHJhbnNpdGlvbnMgb2YgJ2Zyb20nIHJvdXRlCgogICAgaWYgKGZyb20gJiYgZnJvbS5tYXRjaGVkLmxlbmd0aCAmJiBmcm9tLm1hdGNoZWRbMF0uY29tcG9uZW50cy5kZWZhdWx0KSB7CiAgICAgIHZhciBmcm9tVHJhbnNpdGlvbnMgPSBjb21wb25lbnRUcmFuc2l0aW9ucyhmcm9tLm1hdGNoZWRbMF0uY29tcG9uZW50cy5kZWZhdWx0KTsKICAgICAgT2JqZWN0LmtleXMoZnJvbVRyYW5zaXRpb25zKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkgewogICAgICAgIHJldHVybiBmcm9tVHJhbnNpdGlvbnNba2V5XSAmJiBrZXkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnbGVhdmUnKTsKICAgICAgfSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgdHJhbnNpdGlvbnNba2V5XSA9IGZyb21UcmFuc2l0aW9uc1trZXldOwogICAgICB9KTsKICAgIH0KCiAgICByZXR1cm4gdHJhbnNpdGlvbnM7CiAgfSk7Cn0KCmZ1bmN0aW9uIGxvYWRBc3luY0NvbXBvbmVudHMoX3gsIF94MiwgX3gzKSB7CiAgcmV0dXJuIF9sb2FkQXN5bmNDb21wb25lbnRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9sb2FkQXN5bmNDb21wb25lbnRzKCkgewogIF9sb2FkQXN5bmNDb21wb25lbnRzID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHRvLCBmcm9tLCBuZXh0KSB7CiAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICB2YXIgQ29tcG9uZW50cywgc3RhcnRMb2FkZXIsIGVyciwgc3RhdHVzQ29kZSwgbWVzc2FnZTsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIC8vIENoZWNrIGlmIHJvdXRlIHBhdGggY2hhbmdlZCAodGhpcy5fcGF0aENoYW5nZWQpLCBvbmx5IGlmIHRoZSBwYWdlIGlzIG5vdCBhbiBlcnJvciAoZm9yIHZhbGlkYXRlKCkpCiAgICAgICAgICAgIHRoaXMuX3BhdGhDaGFuZ2VkID0gQm9vbGVhbihhcHAubnV4dC5lcnIpIHx8IGZyb20ucGF0aCAhPT0gdG8ucGF0aDsKICAgICAgICAgICAgdGhpcy5fcXVlcnlDaGFuZ2VkID0gSlNPTi5zdHJpbmdpZnkodG8ucXVlcnkpICE9PSBKU09OLnN0cmluZ2lmeShmcm9tLnF1ZXJ5KTsKICAgICAgICAgICAgdGhpcy5fZGlmZlF1ZXJ5ID0gdGhpcy5fcXVlcnlDaGFuZ2VkID8gZ2V0UXVlcnlEaWZmKHRvLnF1ZXJ5LCBmcm9tLnF1ZXJ5KSA6IFtdOwoKICAgICAgICAgICAgaWYgKHRoaXMuX3BhdGhDaGFuZ2VkICYmIHRoaXMuJGxvYWRpbmcuc3RhcnQgJiYgIXRoaXMuJGxvYWRpbmcubWFudWFsKSB7CiAgICAgICAgICAgICAgdGhpcy4kbG9hZGluZy5zdGFydCgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDQ7CgogICAgICAgICAgICBpZiAoISghdGhpcy5fcGF0aENoYW5nZWQgJiYgdGhpcy5fcXVlcnlDaGFuZ2VkKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gODsKICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVSb3V0ZUNvbXBvbmVudHModG8sIGZ1bmN0aW9uIChDb21wb25lbnQsIGluc3RhbmNlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIENvbXBvbmVudDogQ29tcG9uZW50LAogICAgICAgICAgICAgICAgaW5zdGFuY2U6IGluc3RhbmNlCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICBDb21wb25lbnRzID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgIC8vIEFkZCBhIG1hcmtlciBvbiBlYWNoIGNvbXBvbmVudCB0aGF0IGl0IG5lZWRzIHRvIHJlZnJlc2ggb3Igbm90CiAgICAgICAgICAgIHN0YXJ0TG9hZGVyID0gQ29tcG9uZW50cy5zb21lKGZ1bmN0aW9uIChfcmVmMikgewogICAgICAgICAgICAgIHZhciBDb21wb25lbnQgPSBfcmVmMi5Db21wb25lbnQsCiAgICAgICAgICAgICAgICAgIGluc3RhbmNlID0gX3JlZjIuaW5zdGFuY2U7CiAgICAgICAgICAgICAgdmFyIHdhdGNoUXVlcnkgPSBDb21wb25lbnQub3B0aW9ucy53YXRjaFF1ZXJ5OwoKICAgICAgICAgICAgICBpZiAod2F0Y2hRdWVyeSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh3YXRjaFF1ZXJ5KSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHdhdGNoUXVlcnkuc29tZShmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMuX2RpZmZRdWVyeVtrZXldOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAodHlwZW9mIHdhdGNoUXVlcnkgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgIHJldHVybiB3YXRjaFF1ZXJ5LmFwcGx5KGluc3RhbmNlLCBbdG8ucXVlcnksIGZyb20ucXVlcnldKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBpZiAoc3RhcnRMb2FkZXIgJiYgdGhpcy4kbG9hZGluZy5zdGFydCAmJiAhdGhpcy4kbG9hZGluZy5tYW51YWwpIHsKICAgICAgICAgICAgICB0aGlzLiRsb2FkaW5nLnN0YXJ0KCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAvLyBDYWxsIG5leHQoKQogICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjU7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTQ7CiAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSg0KTsKICAgICAgICAgICAgZXJyID0gX2NvbnRleHQyLnQwIHx8IHt9OwogICAgICAgICAgICBzdGF0dXNDb2RlID0gZXJyLnN0YXR1c0NvZGUgfHwgZXJyLnN0YXR1cyB8fCBlcnIucmVzcG9uc2UgJiYgZXJyLnJlc3BvbnNlLnN0YXR1cyB8fCA1MDA7CiAgICAgICAgICAgIG1lc3NhZ2UgPSBlcnIubWVzc2FnZSB8fCAnJzsgLy8gSGFuZGxlIGNodW5rIGxvYWRpbmcgZXJyb3JzCiAgICAgICAgICAgIC8vIFRoaXMgbWF5IGJlIGR1ZSB0byBhIG5ldyBkZXBsb3ltZW50IG9yIGEgbmV0d29yayBwcm9ibGVtCgogICAgICAgICAgICBpZiAoIS9eTG9hZGluZyggQ1NTKT8gY2h1bmsgKFxkKSsgZmFpbGVkXC4vLnRlc3QobWVzc2FnZSkpIHsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDIyOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKHRydWUKICAgICAgICAgICAgLyogc2tpcCBjYWNoZSAqLwogICAgICAgICAgICApOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgdGhpcy5lcnJvcih7CiAgICAgICAgICAgICAgc3RhdHVzQ29kZTogc3RhdHVzQ29kZSwKICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLiRudXh0LiRlbWl0KCdyb3V0ZUNoYW5nZWQnLCB0bywgZnJvbSwgZXJyKTsKICAgICAgICAgICAgbmV4dCgpOwoKICAgICAgICAgIGNhc2UgMjU6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUyLCB0aGlzLCBbWzQsIDE0XV0pOwogIH0pKTsKICByZXR1cm4gX2xvYWRBc3luY0NvbXBvbmVudHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gYXBwbHlTU1JEYXRhKENvbXBvbmVudCwgc3NyRGF0YSkgewogIGlmIChOVVhULnNlcnZlclJlbmRlcmVkICYmIHNzckRhdGEpIHsKICAgIGFwcGx5QXN5bmNEYXRhKENvbXBvbmVudCwgc3NyRGF0YSk7CiAgfQoKICBDb21wb25lbnQuX0N0b3IgPSBDb21wb25lbnQ7CiAgcmV0dXJuIENvbXBvbmVudDsKfSAvLyBHZXQgbWF0Y2hlZCBjb21wb25lbnRzCgoKZnVuY3Rpb24gcmVzb2x2ZUNvbXBvbmVudHMocm91dGVyKSB7CiAgdmFyIHBhdGggPSBnZXRMb2NhdGlvbihyb3V0ZXIub3B0aW9ucy5iYXNlLCByb3V0ZXIub3B0aW9ucy5tb2RlKTsKICByZXR1cm4gZmxhdE1hcENvbXBvbmVudHMocm91dGVyLm1hdGNoKHBhdGgpLAogIC8qI19fUFVSRV9fKi8KICBmdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgLyojX19QVVJFX18qLwogICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShDb21wb25lbnQsIF8sIG1hdGNoLCBrZXksIGluZGV4KSB7CiAgICAgIHZhciBfQ29tcG9uZW50OwoKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmICghKHR5cGVvZiBDb21wb25lbnQgPT09ICdmdW5jdGlvbicgJiYgIUNvbXBvbmVudC5vcHRpb25zKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBDb21wb25lbnQoKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBDb21wb25lbnQgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIC8vIFNhbml0aXplIGl0IGFuZCBzYXZlIGl0CiAgICAgICAgICAgICAgX0NvbXBvbmVudCA9IGFwcGx5U1NSRGF0YShzYW5pdGl6ZUNvbXBvbmVudChDb21wb25lbnQpLCBOVVhULmRhdGEgPyBOVVhULmRhdGFbaW5kZXhdIDogbnVsbCk7CiAgICAgICAgICAgICAgbWF0Y2guY29tcG9uZW50c1trZXldID0gX0NvbXBvbmVudDsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfQ29tcG9uZW50KTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIChfeDQsIF94NSwgX3g2LCBfeDcsIF94OCkgewogICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCkpOwp9CgpmdW5jdGlvbiBjYWxsTWlkZGxld2FyZShDb21wb25lbnRzLCBjb250ZXh0LCBsYXlvdXQpIHsKICB2YXIgX3RoaXMgPSB0aGlzOwoKICB2YXIgbWlkZCA9IFtdOwogIHZhciB1bmtub3duTWlkZGxld2FyZSA9IGZhbHNlOyAvLyBJZiBsYXlvdXQgaXMgdW5kZWZpbmVkLCBvbmx5IGNhbGwgZ2xvYmFsIG1pZGRsZXdhcmUKCiAgaWYgKHR5cGVvZiBsYXlvdXQgIT09ICd1bmRlZmluZWQnKSB7CiAgICBtaWRkID0gW107IC8vIEV4Y2x1ZGUgZ2xvYmFsIG1pZGRsZXdhcmUgaWYgbGF5b3V0IGRlZmluZWQgKGFscmVhZHkgY2FsbGVkIGJlZm9yZSkKCiAgICBsYXlvdXQgPSBzYW5pdGl6ZUNvbXBvbmVudChsYXlvdXQpOwoKICAgIGlmIChsYXlvdXQub3B0aW9ucy5taWRkbGV3YXJlKSB7CiAgICAgIG1pZGQgPSBtaWRkLmNvbmNhdChsYXlvdXQub3B0aW9ucy5taWRkbGV3YXJlKTsKICAgIH0KCiAgICBDb21wb25lbnRzLmZvckVhY2goZnVuY3Rpb24gKENvbXBvbmVudCkgewogICAgICBpZiAoQ29tcG9uZW50Lm9wdGlvbnMubWlkZGxld2FyZSkgewogICAgICAgIG1pZGQgPSBtaWRkLmNvbmNhdChDb21wb25lbnQub3B0aW9ucy5taWRkbGV3YXJlKTsKICAgICAgfQogICAgfSk7CiAgfQoKICBtaWRkID0gbWlkZC5tYXAoZnVuY3Rpb24gKG5hbWUpIHsKICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICByZXR1cm4gbmFtZTsKICAgIH0KCiAgICBpZiAodHlwZW9mIG1pZGRsZXdhcmVbbmFtZV0gIT09ICdmdW5jdGlvbicpIHsKICAgICAgdW5rbm93bk1pZGRsZXdhcmUgPSB0cnVlOwoKICAgICAgX3RoaXMuZXJyb3IoewogICAgICAgIHN0YXR1c0NvZGU6IDUwMCwKICAgICAgICBtZXNzYWdlOiAnVW5rbm93biBtaWRkbGV3YXJlICcgKyBuYW1lCiAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiBtaWRkbGV3YXJlW25hbWVdOwogIH0pOwoKICBpZiAodW5rbm93bk1pZGRsZXdhcmUpIHsKICAgIHJldHVybjsKICB9CgogIHJldHVybiBtaWRkbGV3YXJlU2VyaWVzKG1pZGQsIGNvbnRleHQpOwp9CgpmdW5jdGlvbiByZW5kZXIoX3g5LCBfeDEwLCBfeDExKSB7CiAgcmV0dXJuIF9yZW5kZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfSAvLyBGaXggY29tcG9uZW50cyBmb3JtYXQgaW4gbWF0Y2hlZCwgaXQncyBkdWUgdG8gY29kZS1zcGxpdHRpbmcgb2YgdnVlLXJvdXRlcgoKCmZ1bmN0aW9uIF9yZW5kZXIoKSB7CiAgX3JlbmRlciA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMyh0bywgZnJvbSwgbmV4dCkgewogICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgdmFyIGZyb21NYXRjaGVzLCBuZXh0Q2FsbGVkLCBfbmV4dCwgbWF0Y2hlcywgQ29tcG9uZW50cywgZXJyb3JMYXlvdXQsIGxheW91dCwgX2xheW91dCwgaXNWYWxpZCwgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiwgX2RpZEl0ZXJhdG9yRXJyb3IsIF9pdGVyYXRvckVycm9yLCBfaXRlcmF0b3IsIF9zdGVwLCBDb21wb25lbnQsIGluc3RhbmNlcywgZXJyb3IsIF9sYXlvdXQyOwoKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGlmICghKHRoaXMuX3BhdGhDaGFuZ2VkID09PSBmYWxzZSAmJiB0aGlzLl9xdWVyeUNoYW5nZWQgPT09IGZhbHNlKSkgewogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIG5leHQoKSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAvLyBIYW5kbGUgZmlyc3QgcmVuZGVyIG9uIFNQQSBtb2RlCiAgICAgICAgICAgIGlmICh0byA9PT0gZnJvbSkgewogICAgICAgICAgICAgIF9sYXN0UGF0aHMgPSBbXTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBmcm9tTWF0Y2hlcyA9IFtdOwogICAgICAgICAgICAgIF9sYXN0UGF0aHMgPSBnZXRNYXRjaGVkQ29tcG9uZW50cyhmcm9tLCBmcm9tTWF0Y2hlcykubWFwKGZ1bmN0aW9uIChDb21wb25lbnQsIGkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBjb21waWxlKGZyb20ubWF0Y2hlZFtmcm9tTWF0Y2hlc1tpXV0ucGF0aCkoZnJvbS5wYXJhbXMpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IC8vIG5leHRDYWxsZWQgaXMgdHJ1ZSB3aGVuIHJlZGlyZWN0ZWQKCgogICAgICAgICAgICBuZXh0Q2FsbGVkID0gZmFsc2U7CgogICAgICAgICAgICBfbmV4dCA9IGZ1bmN0aW9uIF9uZXh0KHBhdGgpIHsKICAgICAgICAgICAgICBpZiAoZnJvbS5wYXRoID09PSBwYXRoLnBhdGggJiYgX3RoaXM0LiRsb2FkaW5nLmZpbmlzaCkgewogICAgICAgICAgICAgICAgX3RoaXM0LiRsb2FkaW5nLmZpbmlzaCgpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKGZyb20ucGF0aCAhPT0gcGF0aC5wYXRoICYmIF90aGlzNC4kbG9hZGluZy5wYXVzZSkgewogICAgICAgICAgICAgICAgX3RoaXM0LiRsb2FkaW5nLnBhdXNlKCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAobmV4dENhbGxlZCkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgbmV4dENhbGxlZCA9IHRydWU7CiAgICAgICAgICAgICAgbmV4dChwYXRoKTsKICAgICAgICAgICAgfTsgLy8gVXBkYXRlIGNvbnRleHQKCgogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDc7CiAgICAgICAgICAgIHJldHVybiBzZXRDb250ZXh0KGFwcCwgewogICAgICAgICAgICAgIHJvdXRlOiB0bywKICAgICAgICAgICAgICBmcm9tOiBmcm9tLAogICAgICAgICAgICAgIG5leHQ6IF9uZXh0LmJpbmQodGhpcykKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICB0aGlzLl9kYXRlTGFzdEVycm9yID0gYXBwLm51eHQuZGF0ZUVycjsKICAgICAgICAgICAgdGhpcy5faGFkRXJyb3IgPSBCb29sZWFuKGFwcC5udXh0LmVycik7IC8vIEdldCByb3V0ZSdzIG1hdGNoZWQgY29tcG9uZW50cwoKICAgICAgICAgICAgbWF0Y2hlcyA9IFtdOwogICAgICAgICAgICBDb21wb25lbnRzID0gZ2V0TWF0Y2hlZENvbXBvbmVudHModG8sIG1hdGNoZXMpOyAvLyBJZiBubyBDb21wb25lbnRzIG1hdGNoZWQsIGdlbmVyYXRlIDQwNAoKICAgICAgICAgICAgaWYgKENvbXBvbmVudHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyNjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxNDsKICAgICAgICAgICAgcmV0dXJuIGNhbGxNaWRkbGV3YXJlLmNhbGwodGhpcywgQ29tcG9uZW50cywgYXBwLmNvbnRleHQpOwoKICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgIGlmICghbmV4dENhbGxlZCkgewogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAvLyBMb2FkIGxheW91dCBmb3IgZXJyb3IgcGFnZQogICAgICAgICAgICBlcnJvckxheW91dCA9IChOdXh0RXJyb3Iub3B0aW9ucyB8fCBOdXh0RXJyb3IpLmxheW91dDsKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxOTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9hZExheW91dCh0eXBlb2YgZXJyb3JMYXlvdXQgPT09ICdmdW5jdGlvbicgPyBlcnJvckxheW91dC5jYWxsKE51eHRFcnJvciwgYXBwLmNvbnRleHQpIDogZXJyb3JMYXlvdXQpOwoKICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgIGxheW91dCA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDIyOwogICAgICAgICAgICByZXR1cm4gY2FsbE1pZGRsZXdhcmUuY2FsbCh0aGlzLCBDb21wb25lbnRzLCBhcHAuY29udGV4dCwgbGF5b3V0KTsKCiAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICBpZiAoIW5leHRDYWxsZWQpIHsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI0OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgLy8gU2hvdyBlcnJvciBwYWdlCiAgICAgICAgICAgIGFwcC5jb250ZXh0LmVycm9yKHsKICAgICAgICAgICAgICBzdGF0dXNDb2RlOiA0MDQsCiAgICAgICAgICAgICAgbWVzc2FnZTogJ1RoaXMgcGFnZSBjb3VsZCBub3QgYmUgZm91bmQnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgbmV4dCgpKTsKCiAgICAgICAgICBjYXNlIDI2OgogICAgICAgICAgICAvLyBVcGRhdGUgLl9kYXRhIGFuZCBvdGhlciBwcm9wZXJ0aWVzIGlmIGhvdCByZWxvYWRlZAogICAgICAgICAgICBDb21wb25lbnRzLmZvckVhY2goZnVuY3Rpb24gKENvbXBvbmVudCkgewogICAgICAgICAgICAgIGlmIChDb21wb25lbnQuX0N0b3IgJiYgQ29tcG9uZW50Ll9DdG9yLm9wdGlvbnMpIHsKICAgICAgICAgICAgICAgIENvbXBvbmVudC5vcHRpb25zLmFzeW5jRGF0YSA9IENvbXBvbmVudC5fQ3Rvci5vcHRpb25zLmFzeW5jRGF0YTsKICAgICAgICAgICAgICAgIENvbXBvbmVudC5vcHRpb25zLmZldGNoID0gQ29tcG9uZW50Ll9DdG9yLm9wdGlvbnMuZmV0Y2g7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsgLy8gQXBwbHkgdHJhbnNpdGlvbnMKCiAgICAgICAgICAgIHRoaXMuc2V0VHJhbnNpdGlvbnMobWFwVHJhbnNpdGlvbnMoQ29tcG9uZW50cywgdG8sIGZyb20pKTsKICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAyODsKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzMTsKICAgICAgICAgICAgcmV0dXJuIGNhbGxNaWRkbGV3YXJlLmNhbGwodGhpcywgQ29tcG9uZW50cywgYXBwLmNvbnRleHQpOwoKICAgICAgICAgIGNhc2UgMzE6CiAgICAgICAgICAgIGlmICghbmV4dENhbGxlZCkgewogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzM7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICBjYXNlIDMzOgogICAgICAgICAgICBpZiAoIWFwcC5jb250ZXh0Ll9lcnJvcmVkKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzNTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIG5leHQoKSk7CgogICAgICAgICAgY2FzZSAzNToKICAgICAgICAgICAgLy8gU2V0IGxheW91dAogICAgICAgICAgICBfbGF5b3V0ID0gQ29tcG9uZW50c1swXS5vcHRpb25zLmxheW91dDsKCiAgICAgICAgICAgIGlmICh0eXBlb2YgX2xheW91dCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgIF9sYXlvdXQgPSBfbGF5b3V0KGFwcC5jb250ZXh0KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzOTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9hZExheW91dChfbGF5b3V0KTsKCiAgICAgICAgICBjYXNlIDM5OgogICAgICAgICAgICBfbGF5b3V0ID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNDI7CiAgICAgICAgICAgIHJldHVybiBjYWxsTWlkZGxld2FyZS5jYWxsKHRoaXMsIENvbXBvbmVudHMsIGFwcC5jb250ZXh0LCBfbGF5b3V0KTsKCiAgICAgICAgICBjYXNlIDQyOgogICAgICAgICAgICBpZiAoIW5leHRDYWxsZWQpIHsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ0OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSA0NDoKICAgICAgICAgICAgaWYgKCFhcHAuY29udGV4dC5fZXJyb3JlZCkgewogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNDY7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBuZXh0KCkpOwoKICAgICAgICAgIGNhc2UgNDY6CiAgICAgICAgICAgIC8vIENhbGwgLnZhbGlkYXRlKCkKICAgICAgICAgICAgaXNWYWxpZCA9IHRydWU7CiAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gNDc7CiAgICAgICAgICAgIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlOwogICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlOwogICAgICAgICAgICBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSA1MTsKICAgICAgICAgICAgX2l0ZXJhdG9yID0gQ29tcG9uZW50c1tTeW1ib2wuaXRlcmF0b3JdKCk7CgogICAgICAgICAgY2FzZSA1MzoKICAgICAgICAgICAgaWYgKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA2NTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgQ29tcG9uZW50ID0gX3N0ZXAudmFsdWU7CgogICAgICAgICAgICBpZiAoISh0eXBlb2YgQ29tcG9uZW50Lm9wdGlvbnMudmFsaWRhdGUgIT09ICdmdW5jdGlvbicpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA1NzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoImNvbnRpbnVlIiwgNjIpOwoKICAgICAgICAgIGNhc2UgNTc6CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNTk7CiAgICAgICAgICAgIHJldHVybiBDb21wb25lbnQub3B0aW9ucy52YWxpZGF0ZShhcHAuY29udGV4dCk7CgogICAgICAgICAgY2FzZSA1OToKICAgICAgICAgICAgaXNWYWxpZCA9IF9jb250ZXh0My5zZW50OwoKICAgICAgICAgICAgaWYgKGlzVmFsaWQpIHsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDYyOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgiYnJlYWsiLCA2NSk7CgogICAgICAgICAgY2FzZSA2MjoKICAgICAgICAgICAgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNTM7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgNjU6CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNzE7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgNjc6CiAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gNjc7CiAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0M1siY2F0Y2giXSg1MSk7CiAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTsKICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBfY29udGV4dDMudDA7CgogICAgICAgICAgY2FzZSA3MToKICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSA3MTsKICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSA3MjsKCiAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuICE9IG51bGwpIHsKICAgICAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICBjYXNlIDc0OgogICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDc0OwoKICAgICAgICAgICAgaWYgKCFfZGlkSXRlcmF0b3JFcnJvcikgewogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNzc7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yOwoKICAgICAgICAgIGNhc2UgNzc6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuZmluaXNoKDc0KTsKCiAgICAgICAgICBjYXNlIDc4OgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmZpbmlzaCg3MSk7CgogICAgICAgICAgY2FzZSA3OToKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA4NTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSA4MToKICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSA4MTsKICAgICAgICAgICAgX2NvbnRleHQzLnQxID0gX2NvbnRleHQzWyJjYXRjaCJdKDQ3KTsKICAgICAgICAgICAgLy8gLi4uSWYgLnZhbGlkYXRlKCkgdGhyZXcgYW4gZXJyb3IKICAgICAgICAgICAgdGhpcy5lcnJvcih7CiAgICAgICAgICAgICAgc3RhdHVzQ29kZTogX2NvbnRleHQzLnQxLnN0YXR1c0NvZGUgfHwgJzUwMCcsCiAgICAgICAgICAgICAgbWVzc2FnZTogX2NvbnRleHQzLnQxLm1lc3NhZ2UKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBuZXh0KCkpOwoKICAgICAgICAgIGNhc2UgODU6CiAgICAgICAgICAgIGlmIChpc1ZhbGlkKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA4ODsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5lcnJvcih7CiAgICAgICAgICAgICAgc3RhdHVzQ29kZTogNDA0LAogICAgICAgICAgICAgIG1lc3NhZ2U6ICdUaGlzIHBhZ2UgY291bGQgbm90IGJlIGZvdW5kJwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIG5leHQoKSk7CgogICAgICAgICAgY2FzZSA4ODoKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA5MDsKICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKENvbXBvbmVudHMubWFwKGZ1bmN0aW9uIChDb21wb25lbnQsIGkpIHsKICAgICAgICAgICAgICAvLyBDaGVjayBpZiBvbmx5IGNoaWxkcmVuIHJvdXRlIGNoYW5nZWQKICAgICAgICAgICAgICBDb21wb25lbnQuX3BhdGggPSBjb21waWxlKHRvLm1hdGNoZWRbbWF0Y2hlc1tpXV0ucGF0aCkodG8ucGFyYW1zKTsKICAgICAgICAgICAgICBDb21wb25lbnQuX2RhdGFSZWZyZXNoID0gZmFsc2U7IC8vIENoZWNrIGlmIENvbXBvbmVudCBuZWVkIHRvIGJlIHJlZnJlc2hlZCAoY2FsbCBhc3luY0RhdGEgJiBmZXRjaCkKICAgICAgICAgICAgICAvLyBPbmx5IGlmIGl0cyBzbHVnIGhhcyBjaGFuZ2VkIG9yIGlzIHdhdGNoIHF1ZXJ5IGNoYW5nZXMKCiAgICAgICAgICAgICAgaWYgKF90aGlzNC5fcGF0aENoYW5nZWQgJiYgX3RoaXM0Ll9xdWVyeUNoYW5nZWQgfHwgQ29tcG9uZW50Ll9wYXRoICE9PSBfbGFzdFBhdGhzW2ldKSB7CiAgICAgICAgICAgICAgICBDb21wb25lbnQuX2RhdGFSZWZyZXNoID0gdHJ1ZTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFfdGhpczQuX3BhdGhDaGFuZ2VkICYmIF90aGlzNC5fcXVlcnlDaGFuZ2VkKSB7CiAgICAgICAgICAgICAgICB2YXIgd2F0Y2hRdWVyeSA9IENvbXBvbmVudC5vcHRpb25zLndhdGNoUXVlcnk7CgogICAgICAgICAgICAgICAgaWYgKHdhdGNoUXVlcnkgPT09IHRydWUpIHsKICAgICAgICAgICAgICAgICAgQ29tcG9uZW50Ll9kYXRhUmVmcmVzaCA9IHRydWU7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkod2F0Y2hRdWVyeSkpIHsKICAgICAgICAgICAgICAgICAgQ29tcG9uZW50Ll9kYXRhUmVmcmVzaCA9IHdhdGNoUXVlcnkuc29tZShmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNC5fZGlmZlF1ZXJ5W2tleV07CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygd2F0Y2hRdWVyeSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgICBpZiAoIWluc3RhbmNlcykgewogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlcyA9IGdldE1hdGNoZWRDb21wb25lbnRzSW5zdGFuY2VzKHRvKTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgQ29tcG9uZW50Ll9kYXRhUmVmcmVzaCA9IHdhdGNoUXVlcnkuYXBwbHkoaW5zdGFuY2VzW2ldLCBbdG8ucXVlcnksIGZyb20ucXVlcnldKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmICghX3RoaXM0Ll9oYWRFcnJvciAmJiBfdGhpczQuX2lzTW91bnRlZCAmJiAhQ29tcG9uZW50Ll9kYXRhUmVmcmVzaCkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdmFyIHByb21pc2VzID0gW107CiAgICAgICAgICAgICAgdmFyIGhhc0FzeW5jRGF0YSA9IENvbXBvbmVudC5vcHRpb25zLmFzeW5jRGF0YSAmJiB0eXBlb2YgQ29tcG9uZW50Lm9wdGlvbnMuYXN5bmNEYXRhID09PSAnZnVuY3Rpb24nOwogICAgICAgICAgICAgIHZhciBoYXNGZXRjaCA9IEJvb2xlYW4oQ29tcG9uZW50Lm9wdGlvbnMuZmV0Y2gpOwogICAgICAgICAgICAgIHZhciBsb2FkaW5nSW5jcmVhc2UgPSBoYXNBc3luY0RhdGEgJiYgaGFzRmV0Y2ggPyAzMCA6IDQ1OyAvLyBDYWxsIGFzeW5jRGF0YShjb250ZXh0KQoKICAgICAgICAgICAgICBpZiAoaGFzQXN5bmNEYXRhKSB7CiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHByb21pc2lmeShDb21wb25lbnQub3B0aW9ucy5hc3luY0RhdGEsIGFwcC5jb250ZXh0KS50aGVuKGZ1bmN0aW9uIChhc3luY0RhdGFSZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgYXBwbHlBc3luY0RhdGEoQ29tcG9uZW50LCBhc3luY0RhdGFSZXN1bHQpOwoKICAgICAgICAgICAgICAgICAgaWYgKF90aGlzNC4kbG9hZGluZy5pbmNyZWFzZSkgewogICAgICAgICAgICAgICAgICAgIF90aGlzNC4kbG9hZGluZy5pbmNyZWFzZShsb2FkaW5nSW5jcmVhc2UpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2gocHJvbWlzZSk7CiAgICAgICAgICAgICAgfSAvLyBDaGVjayBkaXNhYmxlZCBwYWdlIGxvYWRpbmcKCgogICAgICAgICAgICAgIF90aGlzNC4kbG9hZGluZy5tYW51YWwgPSBDb21wb25lbnQub3B0aW9ucy5sb2FkaW5nID09PSBmYWxzZTsgLy8gQ2FsbCBmZXRjaChjb250ZXh0KQoKICAgICAgICAgICAgICBpZiAoaGFzRmV0Y2gpIHsKICAgICAgICAgICAgICAgIHZhciBwID0gQ29tcG9uZW50Lm9wdGlvbnMuZmV0Y2goYXBwLmNvbnRleHQpOwoKICAgICAgICAgICAgICAgIGlmICghcCB8fCAhKHAgaW5zdGFuY2VvZiBQcm9taXNlKSAmJiB0eXBlb2YgcC50aGVuICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgIHAgPSBQcm9taXNlLnJlc29sdmUocCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcC50aGVuKGZ1bmN0aW9uIChmZXRjaFJlc3VsdCkgewogICAgICAgICAgICAgICAgICBpZiAoX3RoaXM0LiRsb2FkaW5nLmluY3JlYXNlKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXM0LiRsb2FkaW5nLmluY3JlYXNlKGxvYWRpbmdJbmNyZWFzZSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChwKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDkwOgogICAgICAgICAgICAvLyBJZiBub3QgcmVkaXJlY3RlZAogICAgICAgICAgICBpZiAoIW5leHRDYWxsZWQpIHsKICAgICAgICAgICAgICBpZiAodGhpcy4kbG9hZGluZy5maW5pc2ggJiYgIXRoaXMuJGxvYWRpbmcubWFudWFsKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRsb2FkaW5nLmZpbmlzaCgpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEwNzsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSA5MzoKICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSA5MzsKICAgICAgICAgICAgX2NvbnRleHQzLnQyID0gX2NvbnRleHQzWyJjYXRjaCJdKDI4KTsKICAgICAgICAgICAgZXJyb3IgPSBfY29udGV4dDMudDIgfHwge307CgogICAgICAgICAgICBpZiAoIShlcnJvci5tZXNzYWdlID09PSAnRVJSX1JFRElSRUNUJykpIHsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDk4OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgdGhpcy4kbnV4dC4kZW1pdCgncm91dGVDaGFuZ2VkJywgdG8sIGZyb20sIGVycm9yKSk7CgogICAgICAgICAgY2FzZSA5ODoKICAgICAgICAgICAgX2xhc3RQYXRocyA9IFtdOwogICAgICAgICAgICBnbG9iYWxIYW5kbGVFcnJvcihlcnJvcik7IC8vIExvYWQgZXJyb3IgbGF5b3V0CgogICAgICAgICAgICBfbGF5b3V0MiA9IChOdXh0RXJyb3Iub3B0aW9ucyB8fCBOdXh0RXJyb3IpLmxheW91dDsKCiAgICAgICAgICAgIGlmICh0eXBlb2YgX2xheW91dDIgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICBfbGF5b3V0MiA9IF9sYXlvdXQyKGFwcC5jb250ZXh0KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMDQ7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRMYXlvdXQoX2xheW91dDIpOwoKICAgICAgICAgIGNhc2UgMTA0OgogICAgICAgICAgICB0aGlzLmVycm9yKGVycm9yKTsKICAgICAgICAgICAgdGhpcy4kbnV4dC4kZW1pdCgncm91dGVDaGFuZ2VkJywgdG8sIGZyb20sIGVycm9yKTsKICAgICAgICAgICAgbmV4dCgpOwoKICAgICAgICAgIGNhc2UgMTA3OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMywgdGhpcywgW1syOCwgOTNdLCBbNDcsIDgxXSwgWzUxLCA2NywgNzEsIDc5XSwgWzcyLCwgNzQsIDc4XV0pOwogIH0pKTsKICByZXR1cm4gX3JlbmRlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBub3JtYWxpemVDb21wb25lbnRzKHRvLCBfX18pIHsKICBmbGF0TWFwQ29tcG9uZW50cyh0bywgZnVuY3Rpb24gKENvbXBvbmVudCwgXywgbWF0Y2gsIGtleSkgewogICAgaWYgKF90eXBlb2YoQ29tcG9uZW50KSA9PT0gJ29iamVjdCcgJiYgIUNvbXBvbmVudC5vcHRpb25zKSB7CiAgICAgIC8vIFVwZGF0ZWQgdmlhIHZ1ZS1yb3V0ZXIgcmVzb2x2ZUFzeW5jQ29tcG9uZW50cygpCiAgICAgIENvbXBvbmVudCA9IFZ1ZS5leHRlbmQoQ29tcG9uZW50KTsKICAgICAgQ29tcG9uZW50Ll9DdG9yID0gQ29tcG9uZW50OwogICAgICBtYXRjaC5jb21wb25lbnRzW2tleV0gPSBDb21wb25lbnQ7CiAgICB9CgogICAgcmV0dXJuIENvbXBvbmVudDsKICB9KTsKfQoKZnVuY3Rpb24gc2hvd05leHRQYWdlKHRvKSB7CiAgLy8gSGlkZSBlcnJvciBjb21wb25lbnQgaWYgbm8gZXJyb3IKICBpZiAodGhpcy5faGFkRXJyb3IgJiYgdGhpcy5fZGF0ZUxhc3RFcnJvciA9PT0gdGhpcy4kb3B0aW9ucy5udXh0LmRhdGVFcnIpIHsKICAgIHRoaXMuZXJyb3IoKTsKICB9IC8vIFNldCBsYXlvdXQKCgogIHZhciBsYXlvdXQgPSB0aGlzLiRvcHRpb25zLm51eHQuZXJyID8gKE51eHRFcnJvci5vcHRpb25zIHx8IE51eHRFcnJvcikubGF5b3V0IDogdG8ubWF0Y2hlZFswXS5jb21wb25lbnRzLmRlZmF1bHQub3B0aW9ucy5sYXlvdXQ7CgogIGlmICh0eXBlb2YgbGF5b3V0ID09PSAnZnVuY3Rpb24nKSB7CiAgICBsYXlvdXQgPSBsYXlvdXQoYXBwLmNvbnRleHQpOwogIH0KCiAgdGhpcy5zZXRMYXlvdXQobGF5b3V0KTsKfSAvLyBXaGVuIG5hdmlnYXRpbmcgb24gYSBkaWZmZXJlbnQgcm91dGUgYnV0IHRoZSBzYW1lIGNvbXBvbmVudCBpcyB1c2VkLCBWdWUuanMKLy8gV2lsbCBub3QgdXBkYXRlIHRoZSBpbnN0YW5jZSBkYXRhLCBzbyB3ZSBoYXZlIHRvIHVwZGF0ZSAkZGF0YSBvdXJzZWx2ZXMKCgpmdW5jdGlvbiBmaXhQcmVwYXRjaCh0bywgX19fKSB7CiAgdmFyIF90aGlzMiA9IHRoaXM7CgogIGlmICh0aGlzLl9wYXRoQ2hhbmdlZCA9PT0gZmFsc2UgJiYgdGhpcy5fcXVlcnlDaGFuZ2VkID09PSBmYWxzZSkgewogICAgcmV0dXJuOwogIH0KCiAgdmFyIGluc3RhbmNlcyA9IGdldE1hdGNoZWRDb21wb25lbnRzSW5zdGFuY2VzKHRvKTsKICB2YXIgQ29tcG9uZW50cyA9IGdldE1hdGNoZWRDb21wb25lbnRzKHRvKTsKICBWdWUubmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgaW5zdGFuY2VzLmZvckVhY2goZnVuY3Rpb24gKGluc3RhbmNlLCBpKSB7CiAgICAgIGlmICghaW5zdGFuY2UgfHwgaW5zdGFuY2UuX2lzRGVzdHJveWVkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoaW5zdGFuY2UuY29uc3RydWN0b3IuX2RhdGFSZWZyZXNoICYmIENvbXBvbmVudHNbaV0gPT09IGluc3RhbmNlLmNvbnN0cnVjdG9yICYmIGluc3RhbmNlLiR2bm9kZS5kYXRhLmtlZXBBbGl2ZSAhPT0gdHJ1ZSAmJiB0eXBlb2YgaW5zdGFuY2UuY29uc3RydWN0b3Iub3B0aW9ucy5kYXRhID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgdmFyIG5ld0RhdGEgPSBpbnN0YW5jZS5jb25zdHJ1Y3Rvci5vcHRpb25zLmRhdGEuY2FsbChpbnN0YW5jZSk7CgogICAgICAgIGZvciAodmFyIGtleSBpbiBuZXdEYXRhKSB7CiAgICAgICAgICBWdWUuc2V0KGluc3RhbmNlLiRkYXRhLCBrZXksIG5ld0RhdGFba2V5XSk7CiAgICAgICAgfSAvLyBFbnN1cmUgdG8gdHJpZ2dlciBzY3JvbGwgZXZlbnQgYWZ0ZXIgY2FsbGluZyBzY3JvbGxCZWhhdmlvcgoKCiAgICAgICAgd2luZG93LiRudXh0LiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICB3aW5kb3cuJG51eHQuJGVtaXQoJ3RyaWdnZXJTY3JvbGwnKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgICBzaG93TmV4dFBhZ2UuY2FsbChfdGhpczIsIHRvKTsKICB9KTsKfQoKZnVuY3Rpb24gbnV4dFJlYWR5KF9hcHApIHsKICB3aW5kb3cub25OdXh0UmVhZHlDYnMuZm9yRWFjaChmdW5jdGlvbiAoY2IpIHsKICAgIGlmICh0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicpIHsKICAgICAgY2IoX2FwcCk7CiAgICB9CiAgfSk7IC8vIFNwZWNpYWwgSlNET00KCiAgaWYgKHR5cGVvZiB3aW5kb3cuX29uTnV4dExvYWRlZCA9PT0gJ2Z1bmN0aW9uJykgewogICAgd2luZG93Ll9vbk51eHRMb2FkZWQoX2FwcCk7CiAgfSAvLyBBZGQgcm91dGVyIGhvb2tzCgoKICByb3V0ZXIuYWZ0ZXJFYWNoKGZ1bmN0aW9uICh0bywgZnJvbSkgewogICAgLy8gV2FpdCBmb3IgZml4UHJlcGF0Y2ggKyAkZGF0YSB1cGRhdGVzCiAgICBWdWUubmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gX2FwcC4kbnV4dC4kZW1pdCgncm91dGVDaGFuZ2VkJywgdG8sIGZyb20pOwogICAgfSk7CiAgfSk7Cn0KCmZ1bmN0aW9uIG1vdW50QXBwKF94MTIpIHsKICByZXR1cm4gX21vdW50QXBwLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9tb3VudEFwcCgpIHsKICBfbW91bnRBcHAgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoX19hcHApIHsKICAgIHZhciBfYXBwLCBsYXlvdXQsIG1vdW50LCBDb21wb25lbnRzLCBjbGllbnRGaXJzdE1vdW50OwoKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIC8vIFNldCBnbG9iYWwgdmFyaWFibGVzCiAgICAgICAgICAgIGFwcCA9IF9fYXBwLmFwcDsKICAgICAgICAgICAgcm91dGVyID0gX19hcHAucm91dGVyOwogICAgICAgICAgICBzdG9yZSA9IF9fYXBwLnN0b3JlOyAvLyBDcmVhdGUgVnVlIGluc3RhbmNlCgogICAgICAgICAgICBfYXBwID0gbmV3IFZ1ZShhcHApOyAvLyBMb2FkIGxheW91dAoKICAgICAgICAgICAgbGF5b3V0ID0gTlVYVC5sYXlvdXQgfHwgJ2RlZmF1bHQnOwogICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDc7CiAgICAgICAgICAgIHJldHVybiBfYXBwLmxvYWRMYXlvdXQobGF5b3V0KTsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIF9hcHAuc2V0TGF5b3V0KGxheW91dCk7IC8vIE1vdW50cyBWdWUgYXBwIHRvIERPTSBlbGVtZW50CgoKICAgICAgICAgICAgbW91bnQgPSBmdW5jdGlvbiBtb3VudCgpIHsKICAgICAgICAgICAgICBfYXBwLiRtb3VudCgnI19fbnV4dCcpOyAvLyBBZGQgYWZ0ZXJFYWNoIHJvdXRlciBob29rcwoKCiAgICAgICAgICAgICAgcm91dGVyLmFmdGVyRWFjaChub3JtYWxpemVDb21wb25lbnRzKTsKICAgICAgICAgICAgICByb3V0ZXIuYWZ0ZXJFYWNoKGZpeFByZXBhdGNoLmJpbmQoX2FwcCkpOyAvLyBMaXN0ZW4gZm9yIGZpcnN0IFZ1ZSB1cGRhdGUKCiAgICAgICAgICAgICAgVnVlLm5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIC8vIENhbGwgd2luZG93Lnt7Z2xvYmFscy5yZWFkeUNhbGxiYWNrfX0gY2FsbGJhY2tzCiAgICAgICAgICAgICAgICBudXh0UmVhZHkoX2FwcCk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH07IC8vIFJlc29sdmUgcm91dGUgY29tcG9uZW50cwoKCiAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTE7CiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChyZXNvbHZlQ29tcG9uZW50cyhyb3V0ZXIpKTsKCiAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICBDb21wb25lbnRzID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgIC8vIEVuYWJsZSB0cmFuc2l0aW9ucwogICAgICAgICAgICBfYXBwLnNldFRyYW5zaXRpb25zID0gX2FwcC4kb3B0aW9ucy5udXh0LnNldFRyYW5zaXRpb25zLmJpbmQoX2FwcCk7CgogICAgICAgICAgICBpZiAoQ29tcG9uZW50cy5sZW5ndGgpIHsKICAgICAgICAgICAgICBfYXBwLnNldFRyYW5zaXRpb25zKG1hcFRyYW5zaXRpb25zKENvbXBvbmVudHMsIHJvdXRlci5jdXJyZW50Um91dGUpKTsKCiAgICAgICAgICAgICAgX2xhc3RQYXRocyA9IHJvdXRlci5jdXJyZW50Um91dGUubWF0Y2hlZC5tYXAoZnVuY3Rpb24gKHJvdXRlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gY29tcGlsZShyb3V0ZS5wYXRoKShyb3V0ZXIuY3VycmVudFJvdXRlLnBhcmFtcyk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gLy8gSW5pdGlhbGl6ZSBlcnJvciBoYW5kbGVyCgoKICAgICAgICAgICAgX2FwcC4kbG9hZGluZyA9IHt9OyAvLyBUbyBhdm9pZCBlcnJvciB3aGlsZSBfYXBwLiRudXh0IGRvZXMgbm90IGV4aXN0CgogICAgICAgICAgICBpZiAoTlVYVC5lcnJvcikgewogICAgICAgICAgICAgIF9hcHAuZXJyb3IoTlVYVC5lcnJvcik7CiAgICAgICAgICAgIH0gLy8gQWRkIGJlZm9yZUVhY2ggcm91dGVyIGhvb2tzCgoKICAgICAgICAgICAgcm91dGVyLmJlZm9yZUVhY2gobG9hZEFzeW5jQ29tcG9uZW50cy5iaW5kKF9hcHApKTsKICAgICAgICAgICAgcm91dGVyLmJlZm9yZUVhY2gocmVuZGVyLmJpbmQoX2FwcCkpOyAvLyBJZiBwYWdlIGFscmVhZHkgaXMgc2VydmVyIHJlbmRlcmVkCgogICAgICAgICAgICBpZiAoIU5VWFQuc2VydmVyUmVuZGVyZWQpIHsKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDIxOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBtb3VudCgpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgLy8gRmlyc3QgcmVuZGVyIG9uIGNsaWVudC1zaWRlCiAgICAgICAgICAgIGNsaWVudEZpcnN0TW91bnQgPSBmdW5jdGlvbiBjbGllbnRGaXJzdE1vdW50KCkgewogICAgICAgICAgICAgIG5vcm1hbGl6ZUNvbXBvbmVudHMocm91dGVyLmN1cnJlbnRSb3V0ZSwgcm91dGVyLmN1cnJlbnRSb3V0ZSk7CiAgICAgICAgICAgICAgc2hvd05leHRQYWdlLmNhbGwoX2FwcCwgcm91dGVyLmN1cnJlbnRSb3V0ZSk7IC8vIERvbid0IGNhbGwgZml4UHJlcGF0Y2guY2FsbChfYXBwLCByb3V0ZXIuY3VycmVudFJvdXRlLCByb3V0ZXIuY3VycmVudFJvdXRlKSBzaW5jZSBpdCdzIGZpcnN0IHJlbmRlcgoKICAgICAgICAgICAgICBtb3VudCgpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgcmVuZGVyLmNhbGwoX2FwcCwgcm91dGVyLmN1cnJlbnRSb3V0ZSwgcm91dGVyLmN1cnJlbnRSb3V0ZSwgZnVuY3Rpb24gKHBhdGgpIHsKICAgICAgICAgICAgICAvLyBJZiBub3QgcmVkaXJlY3RlZAogICAgICAgICAgICAgIGlmICghcGF0aCkgewogICAgICAgICAgICAgICAgY2xpZW50Rmlyc3RNb3VudCgpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIH0gLy8gQWRkIGEgb25lLXRpbWUgYWZ0ZXJFYWNoIGhvb2sgdG8KICAgICAgICAgICAgICAvLyBtb3VudCB0aGUgYXBwIHdhaXQgZm9yIHJlZGlyZWN0IGFuZCByb3V0ZSBnZXRzIHJlc29sdmVkCgoKICAgICAgICAgICAgICB2YXIgdW5yZWdpc3Rlckhvb2sgPSByb3V0ZXIuYWZ0ZXJFYWNoKGZ1bmN0aW9uICh0bywgZnJvbSkgewogICAgICAgICAgICAgICAgdW5yZWdpc3Rlckhvb2soKTsKICAgICAgICAgICAgICAgIGNsaWVudEZpcnN0TW91bnQoKTsKICAgICAgICAgICAgICB9KTsgLy8gUHVzaCB0aGUgcGF0aCBhbmQgbGV0IHJvdXRlIHRvIGJlIHJlc29sdmVkCgogICAgICAgICAgICAgIHJvdXRlci5wdXNoKHBhdGgsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICAgICAgICBlcnJvckhhbmRsZXIoZXJyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTQpOwogIH0pKTsKICByZXR1cm4gX21vdW50QXBwLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0="},null]}