{"remainingRequest":"/Users/pro/Documents/WebWork/GitHub/Callanna-iBlog/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/pro/Documents/WebWork/GitHub/Callanna-iBlog/.nuxt/utils.js","dependencies":[{"path":"/Users/pro/Documents/WebWork/GitHub/Callanna-iBlog/.nuxt/utils.js","mtime":1598665742795},{"path":"/Users/pro/Documents/WebWork/GitHub/Callanna-iBlog/node_modules/cache-loader/dist/cjs.js","mtime":1583743859870},{"path":"/Users/pro/Documents/WebWork/GitHub/Callanna-iBlog/node_modules/babel-loader/lib/index.js","mtime":1578715241550}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM3Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LnN5bWJvbCI7CmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LnJlZ2V4cC5zcGxpdCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5zdHJpbmcuc3RhcnRzLXdpdGgiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLnJlcGVhdCI7CmltcG9ydCBfdHlwZW9mIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5yZWdleHAudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LmRhdGUudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LnJlZ2V4cC5jb25zdHJ1Y3RvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5yZWdleHAuc2VhcmNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LnJlZ2V4cC5yZXBsYWNlIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYub2JqZWN0LmtleXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOyAvLyB3aW5kb3cue3tnbG9iYWxzLmxvYWRlZENhbGxiYWNrfX0gaG9vawovLyBVc2VmdWwgZm9yIGpzZG9tIHRlc3Rpbmcgb3IgcGx1Z2lucyAoaHR0cHM6Ly9naXRodWIuY29tL3RtcHZhci9qc2RvbSNkZWFsaW5nLXdpdGgtYXN5bmNocm9ub3VzLXNjcmlwdC1sb2FkaW5nKQoKaWYgKHByb2Nlc3MuY2xpZW50KSB7CiAgd2luZG93Lm9uTnV4dFJlYWR5Q2JzID0gW107CgogIHdpbmRvdy5vbk51eHRSZWFkeSA9IGZ1bmN0aW9uIChjYikgewogICAgd2luZG93Lm9uTnV4dFJlYWR5Q2JzLnB1c2goY2IpOwogIH07Cn0KCmV4cG9ydCBmdW5jdGlvbiBlbXB0eSgpIHt9CmV4cG9ydCBmdW5jdGlvbiBnbG9iYWxIYW5kbGVFcnJvcihlcnJvcikgewogIGlmIChWdWUuY29uZmlnLmVycm9ySGFuZGxlcikgewogICAgVnVlLmNvbmZpZy5lcnJvckhhbmRsZXIoZXJyb3IpOwogIH0KfQpleHBvcnQgZnVuY3Rpb24gaW50ZXJvcERlZmF1bHQocHJvbWlzZSkgewogIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKG0pIHsKICAgIHJldHVybiBtLmRlZmF1bHQgfHwgbTsKICB9KTsKfQpleHBvcnQgZnVuY3Rpb24gYXBwbHlBc3luY0RhdGEoQ29tcG9uZW50LCBhc3luY0RhdGEpIHsKICBpZiAoIC8vIEZvciBTU1IsIHdlIG9uY2UgYWxsIHRoaXMgZnVuY3Rpb24gd2l0aG91dCBzZWNvbmQgcGFyYW0gdG8ganVzdCBhcHBseSBhc3luY0RhdGEKICAvLyBQcmV2ZW50IGRvaW5nIHRoaXMgZm9yIGVhY2ggU1NSIHJlcXVlc3QKICAhYXN5bmNEYXRhICYmIENvbXBvbmVudC5vcHRpb25zLl9faGFzTnV4dERhdGEpIHsKICAgIHJldHVybjsKICB9CgogIHZhciBDb21wb25lbnREYXRhID0gQ29tcG9uZW50Lm9wdGlvbnMuX29yaWdpbkRhdGFGbiB8fCBDb21wb25lbnQub3B0aW9ucy5kYXRhIHx8IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7fTsKICB9OwoKICBDb21wb25lbnQub3B0aW9ucy5fb3JpZ2luRGF0YUZuID0gQ29tcG9uZW50RGF0YTsKCiAgQ29tcG9uZW50Lm9wdGlvbnMuZGF0YSA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBkYXRhID0gQ29tcG9uZW50RGF0YS5jYWxsKHRoaXMsIHRoaXMpOwoKICAgIGlmICh0aGlzLiRzc3JDb250ZXh0KSB7CiAgICAgIGFzeW5jRGF0YSA9IHRoaXMuJHNzckNvbnRleHQuYXN5bmNEYXRhW0NvbXBvbmVudC5jaWRdOwogICAgfQoKICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBkYXRhLCB7fSwgYXN5bmNEYXRhKTsKICB9OwoKICBDb21wb25lbnQub3B0aW9ucy5fX2hhc051eHREYXRhID0gdHJ1ZTsKCiAgaWYgKENvbXBvbmVudC5fQ3RvciAmJiBDb21wb25lbnQuX0N0b3Iub3B0aW9ucykgewogICAgQ29tcG9uZW50Ll9DdG9yLm9wdGlvbnMuZGF0YSA9IENvbXBvbmVudC5vcHRpb25zLmRhdGE7CiAgfQp9CmV4cG9ydCBmdW5jdGlvbiBzYW5pdGl6ZUNvbXBvbmVudChDb21wb25lbnQpIHsKICAvLyBJZiBDb21wb25lbnQgYWxyZWFkeSBzYW5pdGl6ZWQKICBpZiAoQ29tcG9uZW50Lm9wdGlvbnMgJiYgQ29tcG9uZW50Ll9DdG9yID09PSBDb21wb25lbnQpIHsKICAgIHJldHVybiBDb21wb25lbnQ7CiAgfQoKICBpZiAoIUNvbXBvbmVudC5vcHRpb25zKSB7CiAgICBDb21wb25lbnQgPSBWdWUuZXh0ZW5kKENvbXBvbmVudCk7IC8vIGZpeCBpc3N1ZSAjNgoKICAgIENvbXBvbmVudC5fQ3RvciA9IENvbXBvbmVudDsKICB9IGVsc2UgewogICAgQ29tcG9uZW50Ll9DdG9yID0gQ29tcG9uZW50OwogICAgQ29tcG9uZW50LmV4dGVuZE9wdGlvbnMgPSBDb21wb25lbnQub3B0aW9uczsKICB9IC8vIEZvciBkZWJ1Z2dpbmcgcHVycG9zZQoKCiAgaWYgKCFDb21wb25lbnQub3B0aW9ucy5uYW1lICYmIENvbXBvbmVudC5vcHRpb25zLl9fZmlsZSkgewogICAgQ29tcG9uZW50Lm9wdGlvbnMubmFtZSA9IENvbXBvbmVudC5vcHRpb25zLl9fZmlsZTsKICB9CgogIHJldHVybiBDb21wb25lbnQ7Cn0KZXhwb3J0IGZ1bmN0aW9uIGdldE1hdGNoZWRDb21wb25lbnRzKHJvdXRlKSB7CiAgdmFyIG1hdGNoZXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlOwogIHZhciBwcm9wID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAnY29tcG9uZW50cyc7CiAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sIHJvdXRlLm1hdGNoZWQubWFwKGZ1bmN0aW9uIChtLCBpbmRleCkgewogICAgcmV0dXJuIE9iamVjdC5rZXlzKG1bcHJvcF0pLm1hcChmdW5jdGlvbiAoa2V5KSB7CiAgICAgIG1hdGNoZXMgJiYgbWF0Y2hlcy5wdXNoKGluZGV4KTsKICAgICAgcmV0dXJuIG1bcHJvcF1ba2V5XTsKICAgIH0pOwogIH0pKTsKfQpleHBvcnQgZnVuY3Rpb24gZ2V0TWF0Y2hlZENvbXBvbmVudHNJbnN0YW5jZXMocm91dGUpIHsKICB2YXIgbWF0Y2hlcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CiAgcmV0dXJuIGdldE1hdGNoZWRDb21wb25lbnRzKHJvdXRlLCBtYXRjaGVzLCAnaW5zdGFuY2VzJyk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGZsYXRNYXBDb21wb25lbnRzKHJvdXRlLCBmbikgewogIHJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCByb3V0ZS5tYXRjaGVkLm1hcChmdW5jdGlvbiAobSwgaW5kZXgpIHsKICAgIHJldHVybiBPYmplY3Qua2V5cyhtLmNvbXBvbmVudHMpLnJlZHVjZShmdW5jdGlvbiAocHJvbWlzZXMsIGtleSkgewogICAgICBpZiAobS5jb21wb25lbnRzW2tleV0pIHsKICAgICAgICBwcm9taXNlcy5wdXNoKGZuKG0uY29tcG9uZW50c1trZXldLCBtLmluc3RhbmNlc1trZXldLCBtLCBrZXksIGluZGV4KSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZGVsZXRlIG0uY29tcG9uZW50c1trZXldOwogICAgICB9CgogICAgICByZXR1cm4gcHJvbWlzZXM7CiAgICB9LCBbXSk7CiAgfSkpOwp9CmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlUm91dGVDb21wb25lbnRzKHJvdXRlLCBmbikgewogIHJldHVybiBQcm9taXNlLmFsbChmbGF0TWFwQ29tcG9uZW50cyhyb3V0ZSwKICAvKiNfX1BVUkVfXyovCiAgZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgIC8qI19fUFVSRV9fKi8KICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoQ29tcG9uZW50LCBpbnN0YW5jZSwgbWF0Y2gsIGtleSkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaWYgKCEodHlwZW9mIENvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJyAmJiAhQ29tcG9uZW50Lm9wdGlvbnMpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIENvbXBvbmVudCgpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIENvbXBvbmVudCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgbWF0Y2guY29tcG9uZW50c1trZXldID0gQ29tcG9uZW50ID0gc2FuaXRpemVDb21wb25lbnQoQ29tcG9uZW50KTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCB0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicgPyBmbihDb21wb25lbnQsIGluc3RhbmNlLCBtYXRjaCwga2V5KSA6IENvbXBvbmVudCk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpOwoKICAgIHJldHVybiBmdW5jdGlvbiAoX3gsIF94MiwgX3gzLCBfeDQpIHsKICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpKSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGdldFJvdXRlRGF0YShfeDUpIHsKICByZXR1cm4gX2dldFJvdXRlRGF0YS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfZ2V0Um91dGVEYXRhKCkgewogIF9nZXRSb3V0ZURhdGEgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIocm91dGUpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGlmIChyb3V0ZSkgewogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICByZXR1cm4gcmVzb2x2ZVJvdXRlQ29tcG9uZW50cyhyb3V0ZSk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgX29iamVjdFNwcmVhZCh7fSwgcm91dGUsIHsKICAgICAgICAgICAgICBtZXRhOiBnZXRNYXRjaGVkQ29tcG9uZW50cyhyb3V0ZSkubWFwKGZ1bmN0aW9uIChDb21wb25lbnQsIGluZGV4KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgQ29tcG9uZW50Lm9wdGlvbnMubWV0YSwge30sIChyb3V0ZS5tYXRjaGVkW2luZGV4XSB8fCB7fSkubWV0YSk7CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTIpOwogIH0pKTsKICByZXR1cm4gX2dldFJvdXRlRGF0YS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpleHBvcnQgZnVuY3Rpb24gc2V0Q29udGV4dChfeDYsIF94NykgewogIHJldHVybiBfc2V0Q29udGV4dC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfc2V0Q29udGV4dCgpIHsKICBfc2V0Q29udGV4dCA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMyhhcHAsIGNvbnRleHQpIHsKICAgIHZhciBfcmVmMiwgX3JlZjMsIGN1cnJlbnRSb3V0ZURhdGEsIGZyb21Sb3V0ZURhdGE7CgogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgLy8gSWYgY29udGV4dCBub3QgZGVmaW5lZCwgY3JlYXRlIGl0CiAgICAgICAgICAgIGlmICghYXBwLmNvbnRleHQpIHsKICAgICAgICAgICAgICBhcHAuY29udGV4dCA9IHsKICAgICAgICAgICAgICAgIGlzU3RhdGljOiBwcm9jZXNzLnN0YXRpYywKICAgICAgICAgICAgICAgIGlzRGV2OiBmYWxzZSwKICAgICAgICAgICAgICAgIGlzSE1SOiBmYWxzZSwKICAgICAgICAgICAgICAgIGFwcDogYXBwLAogICAgICAgICAgICAgICAgc3RvcmU6IGFwcC5zdG9yZSwKICAgICAgICAgICAgICAgIHBheWxvYWQ6IGNvbnRleHQucGF5bG9hZCwKICAgICAgICAgICAgICAgIGVycm9yOiBjb250ZXh0LmVycm9yLAogICAgICAgICAgICAgICAgYmFzZTogJy8nLAogICAgICAgICAgICAgICAgZW52OiB7fQogICAgICAgICAgICAgIH07IC8vIE9ubHkgc2V0IG9uY2UKCiAgICAgICAgICAgICAgaWYgKGNvbnRleHQucmVxKSB7CiAgICAgICAgICAgICAgICBhcHAuY29udGV4dC5yZXEgPSBjb250ZXh0LnJlcTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChjb250ZXh0LnJlcykgewogICAgICAgICAgICAgICAgYXBwLmNvbnRleHQucmVzID0gY29udGV4dC5yZXM7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAoY29udGV4dC5zc3JDb250ZXh0KSB7CiAgICAgICAgICAgICAgICBhcHAuY29udGV4dC5zc3JDb250ZXh0ID0gY29udGV4dC5zc3JDb250ZXh0OwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgYXBwLmNvbnRleHQucmVkaXJlY3QgPSBmdW5jdGlvbiAoc3RhdHVzLCBwYXRoLCBxdWVyeSkgewogICAgICAgICAgICAgICAgaWYgKCFzdGF0dXMpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGFwcC5jb250ZXh0Ll9yZWRpcmVjdGVkID0gdHJ1ZTsgLy8gaWYgb25seSAxIG9yIDIgYXJndW1lbnRzOiByZWRpcmVjdCgnLycpIG9yIHJlZGlyZWN0KCcvJywgeyBmb286ICdiYXInIH0pCgogICAgICAgICAgICAgICAgdmFyIHBhdGhUeXBlID0gX3R5cGVvZihwYXRoKTsKCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHN0YXR1cyAhPT0gJ251bWJlcicgJiYgKHBhdGhUeXBlID09PSAndW5kZWZpbmVkJyB8fCBwYXRoVHlwZSA9PT0gJ29iamVjdCcpKSB7CiAgICAgICAgICAgICAgICAgIHF1ZXJ5ID0gcGF0aCB8fCB7fTsKICAgICAgICAgICAgICAgICAgcGF0aCA9IHN0YXR1czsKICAgICAgICAgICAgICAgICAgcGF0aFR5cGUgPSBfdHlwZW9mKHBhdGgpOwogICAgICAgICAgICAgICAgICBzdGF0dXMgPSAzMDI7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHBhdGhUeXBlID09PSAnb2JqZWN0JykgewogICAgICAgICAgICAgICAgICBwYXRoID0gYXBwLnJvdXRlci5yZXNvbHZlKHBhdGgpLnJvdXRlLmZ1bGxQYXRoOwogICAgICAgICAgICAgICAgfSAvLyAiL2Fic29sdXRlL3JvdXRlIiwgIi4vcmVsYXRpdmUvcm91dGUiIG9yICIuLi9yZWxhdGl2ZS9yb3V0ZSIKCgogICAgICAgICAgICAgICAgaWYgKC8oXlsuXXsxLDJ9XC8pfCheXC8oPyFcLykpLy50ZXN0KHBhdGgpKSB7CiAgICAgICAgICAgICAgICAgIGFwcC5jb250ZXh0Lm5leHQoewogICAgICAgICAgICAgICAgICAgIHBhdGg6IHBhdGgsCiAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5LAogICAgICAgICAgICAgICAgICAgIHN0YXR1czogc3RhdHVzCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgcGF0aCA9IGZvcm1hdFVybChwYXRoLCBxdWVyeSk7CgogICAgICAgICAgICAgICAgICBpZiAocHJvY2Vzcy5zZXJ2ZXIpIHsKICAgICAgICAgICAgICAgICAgICBhcHAuY29udGV4dC5uZXh0KHsKICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IHBhdGgsCiAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHN0YXR1cwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBpZiAocHJvY2Vzcy5jbGllbnQpIHsKICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvTG9jYXRpb24vcmVwbGFjZQogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHBhdGgpOyAvLyBUaHJvdyBhIHJlZGlyZWN0IGVycm9yCgogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRVJSX1JFRElSRUNUJyk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICBpZiAocHJvY2Vzcy5zZXJ2ZXIpIHsKICAgICAgICAgICAgICAgIGFwcC5jb250ZXh0LmJlZm9yZU51eHRSZW5kZXIgPSBmdW5jdGlvbiAoZm4pIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuYmVmb3JlUmVuZGVyRm5zLnB1c2goZm4pOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChwcm9jZXNzLmNsaWVudCkgewogICAgICAgICAgICAgICAgYXBwLmNvbnRleHQubnV4dFN0YXRlID0gd2luZG93Ll9fTlVYVF9fOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSAvLyBEeW5hbWljIGtleXMKCgogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbZ2V0Um91dGVEYXRhKGNvbnRleHQucm91dGUpLCBnZXRSb3V0ZURhdGEoY29udGV4dC5mcm9tKV0pOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgX3JlZjIgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgX3JlZjMgPSBfc2xpY2VkVG9BcnJheShfcmVmMiwgMik7CiAgICAgICAgICAgIGN1cnJlbnRSb3V0ZURhdGEgPSBfcmVmM1swXTsKICAgICAgICAgICAgZnJvbVJvdXRlRGF0YSA9IF9yZWYzWzFdOwoKICAgICAgICAgICAgaWYgKGNvbnRleHQucm91dGUpIHsKICAgICAgICAgICAgICBhcHAuY29udGV4dC5yb3V0ZSA9IGN1cnJlbnRSb3V0ZURhdGE7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChjb250ZXh0LmZyb20pIHsKICAgICAgICAgICAgICBhcHAuY29udGV4dC5mcm9tID0gZnJvbVJvdXRlRGF0YTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYXBwLmNvbnRleHQubmV4dCA9IGNvbnRleHQubmV4dDsKICAgICAgICAgICAgYXBwLmNvbnRleHQuX3JlZGlyZWN0ZWQgPSBmYWxzZTsKICAgICAgICAgICAgYXBwLmNvbnRleHQuX2Vycm9yZWQgPSBmYWxzZTsKICAgICAgICAgICAgYXBwLmNvbnRleHQuaXNITVIgPSBmYWxzZTsKICAgICAgICAgICAgYXBwLmNvbnRleHQucGFyYW1zID0gYXBwLmNvbnRleHQucm91dGUucGFyYW1zIHx8IHt9OwogICAgICAgICAgICBhcHAuY29udGV4dC5xdWVyeSA9IGFwcC5jb250ZXh0LnJvdXRlLnF1ZXJ5IHx8IHt9OwoKICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUzKTsKICB9KSk7CiAgcmV0dXJuIF9zZXRDb250ZXh0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBtaWRkbGV3YXJlU2VyaWVzKHByb21pc2VzLCBhcHBDb250ZXh0KSB7CiAgaWYgKCFwcm9taXNlcy5sZW5ndGggfHwgYXBwQ29udGV4dC5fcmVkaXJlY3RlZCB8fCBhcHBDb250ZXh0Ll9lcnJvcmVkKSB7CiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgfQoKICByZXR1cm4gcHJvbWlzaWZ5KHByb21pc2VzWzBdLCBhcHBDb250ZXh0KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBtaWRkbGV3YXJlU2VyaWVzKHByb21pc2VzLnNsaWNlKDEpLCBhcHBDb250ZXh0KTsKICB9KTsKfQpleHBvcnQgZnVuY3Rpb24gcHJvbWlzaWZ5KGZuLCBjb250ZXh0KSB7CiAgdmFyIHByb21pc2U7CgogIGlmIChmbi5sZW5ndGggPT09IDIpIHsKICAgIC8vIGZuKGNvbnRleHQsIGNhbGxiYWNrKQogICAgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgIGZuKGNvbnRleHQsIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHsKICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICBjb250ZXh0LmVycm9yKGVycik7CiAgICAgICAgfQoKICAgICAgICBkYXRhID0gZGF0YSB8fCB7fTsKICAgICAgICByZXNvbHZlKGRhdGEpOwogICAgICB9KTsKICAgIH0pOwogIH0gZWxzZSB7CiAgICBwcm9taXNlID0gZm4oY29udGV4dCk7CiAgfQoKICBpZiAocHJvbWlzZSAmJiBwcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSAmJiB0eXBlb2YgcHJvbWlzZS50aGVuID09PSAnZnVuY3Rpb24nKSB7CiAgICByZXR1cm4gcHJvbWlzZTsKICB9CgogIHJldHVybiBQcm9taXNlLnJlc29sdmUocHJvbWlzZSk7Cn0gLy8gSW1wb3J0ZWQgZnJvbSB2dWUtcm91dGVyCgpleHBvcnQgZnVuY3Rpb24gZ2V0TG9jYXRpb24oYmFzZSwgbW9kZSkgewogIHZhciBwYXRoID0gZGVjb2RlVVJJKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSk7CgogIGlmIChtb2RlID09PSAnaGFzaCcpIHsKICAgIHJldHVybiB3aW5kb3cubG9jYXRpb24uaGFzaC5yZXBsYWNlKC9eI1wvLywgJycpOwogIH0KCiAgaWYgKGJhc2UgJiYgcGF0aC5pbmRleE9mKGJhc2UpID09PSAwKSB7CiAgICBwYXRoID0gcGF0aC5zbGljZShiYXNlLmxlbmd0aCk7CiAgfQoKICByZXR1cm4gKHBhdGggfHwgJy8nKSArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggKyB3aW5kb3cubG9jYXRpb24uaGFzaDsKfSAvLyBJbXBvcnRlZCBmcm9tIHBhdGgtdG8tcmVnZXhwCgovKioKICogQ29tcGlsZSBhIHN0cmluZyB0byBhIHRlbXBsYXRlIGZ1bmN0aW9uIGZvciB0aGUgcGF0aC4KICoKICogQHBhcmFtICB7c3RyaW5nfSAgICAgICAgICAgICBzdHIKICogQHBhcmFtICB7T2JqZWN0PX0gICAgICAgICAgICBvcHRpb25zCiAqIEByZXR1cm4geyFmdW5jdGlvbihPYmplY3Q9LCBPYmplY3Q9KX0KICovCgpleHBvcnQgZnVuY3Rpb24gY29tcGlsZShzdHIsIG9wdGlvbnMpIHsKICByZXR1cm4gdG9rZW5zVG9GdW5jdGlvbihwYXJzZShzdHIsIG9wdGlvbnMpLCBvcHRpb25zKTsKfQpleHBvcnQgZnVuY3Rpb24gZ2V0UXVlcnlEaWZmKHRvUXVlcnksIGZyb21RdWVyeSkgewogIHZhciBkaWZmID0ge307CgogIHZhciBxdWVyaWVzID0gX29iamVjdFNwcmVhZCh7fSwgdG9RdWVyeSwge30sIGZyb21RdWVyeSk7CgogIGZvciAodmFyIGsgaW4gcXVlcmllcykgewogICAgaWYgKFN0cmluZyh0b1F1ZXJ5W2tdKSAhPT0gU3RyaW5nKGZyb21RdWVyeVtrXSkpIHsKICAgICAgZGlmZltrXSA9IHRydWU7CiAgICB9CiAgfQoKICByZXR1cm4gZGlmZjsKfQpleHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplRXJyb3IoZXJyKSB7CiAgdmFyIG1lc3NhZ2U7CgogIGlmICghKGVyci5tZXNzYWdlIHx8IHR5cGVvZiBlcnIgPT09ICdzdHJpbmcnKSkgewogICAgdHJ5IHsKICAgICAgbWVzc2FnZSA9IEpTT04uc3RyaW5naWZ5KGVyciwgbnVsbCwgMik7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIG1lc3NhZ2UgPSAiWyIuY29uY2F0KGVyci5jb25zdHJ1Y3Rvci5uYW1lLCAiXSIpOwogICAgfQogIH0gZWxzZSB7CiAgICBtZXNzYWdlID0gZXJyLm1lc3NhZ2UgfHwgZXJyOwogIH0KCiAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIGVyciwgewogICAgbWVzc2FnZTogbWVzc2FnZSwKICAgIHN0YXR1c0NvZGU6IGVyci5zdGF0dXNDb2RlIHx8IGVyci5zdGF0dXMgfHwgZXJyLnJlc3BvbnNlICYmIGVyci5yZXNwb25zZS5zdGF0dXMgfHwgNTAwCiAgfSk7Cn0KLyoqCiAqIFRoZSBtYWluIHBhdGggbWF0Y2hpbmcgcmVnZXhwIHV0aWxpdHkuCiAqCiAqIEB0eXBlIHtSZWdFeHB9CiAqLwoKdmFyIFBBVEhfUkVHRVhQID0gbmV3IFJlZ0V4cChbLy8gTWF0Y2ggZXNjYXBlZCBjaGFyYWN0ZXJzIHRoYXQgd291bGQgb3RoZXJ3aXNlIGFwcGVhciBpbiBmdXR1cmUgbWF0Y2hlcy4KLy8gVGhpcyBhbGxvd3MgdGhlIHVzZXIgdG8gZXNjYXBlIHNwZWNpYWwgY2hhcmFjdGVycyB0aGF0IHdvbid0IHRyYW5zZm9ybS4KJyhcXFxcLiknLCAvLyBNYXRjaCBFeHByZXNzLXN0eWxlIHBhcmFtZXRlcnMgYW5kIHVuLW5hbWVkIHBhcmFtZXRlcnMgd2l0aCBhIHByZWZpeAovLyBhbmQgb3B0aW9uYWwgc3VmZml4ZXMuIE1hdGNoZXMgYXBwZWFyIGFzOgovLwovLyAiLzp0ZXN0KFxcZCspPyIgPT4gWyIvIiwgInRlc3QiLCAiXGQrIiwgdW5kZWZpbmVkLCAiPyIsIHVuZGVmaW5lZF0KLy8gIi9yb3V0ZShcXGQrKSIgID0+IFt1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCAiXGQrIiwgdW5kZWZpbmVkLCB1bmRlZmluZWRdCi8vICIvKiIgICAgICAgICAgICA9PiBbIi8iLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsICIqIl0KJyhbXFwvLl0pPyg/Oig/OlxcOihcXHcrKSg/OlxcKCgoPzpcXFxcLnxbXlxcXFwoKV0pKylcXCkpP3xcXCgoKD86XFxcXC58W15cXFxcKCldKSspXFwpKShbKyo/XSk/fChcXCopKSddLmpvaW4oJ3wnKSwgJ2cnKTsKLyoqCiAqIFBhcnNlIGEgc3RyaW5nIGZvciB0aGUgcmF3IHRva2Vucy4KICoKICogQHBhcmFtICB7c3RyaW5nfSAgc3RyCiAqIEBwYXJhbSAge09iamVjdD19IG9wdGlvbnMKICogQHJldHVybiB7IUFycmF5fQogKi8KCmZ1bmN0aW9uIHBhcnNlKHN0ciwgb3B0aW9ucykgewogIHZhciB0b2tlbnMgPSBbXTsKICB2YXIga2V5ID0gMDsKICB2YXIgaW5kZXggPSAwOwogIHZhciBwYXRoID0gJyc7CiAgdmFyIGRlZmF1bHREZWxpbWl0ZXIgPSBvcHRpb25zICYmIG9wdGlvbnMuZGVsaW1pdGVyIHx8ICcvJzsKICB2YXIgcmVzOwoKICB3aGlsZSAoKHJlcyA9IFBBVEhfUkVHRVhQLmV4ZWMoc3RyKSkgIT0gbnVsbCkgewogICAgdmFyIG0gPSByZXNbMF07CiAgICB2YXIgZXNjYXBlZCA9IHJlc1sxXTsKICAgIHZhciBvZmZzZXQgPSByZXMuaW5kZXg7CiAgICBwYXRoICs9IHN0ci5zbGljZShpbmRleCwgb2Zmc2V0KTsKICAgIGluZGV4ID0gb2Zmc2V0ICsgbS5sZW5ndGg7IC8vIElnbm9yZSBhbHJlYWR5IGVzY2FwZWQgc2VxdWVuY2VzLgoKICAgIGlmIChlc2NhcGVkKSB7CiAgICAgIHBhdGggKz0gZXNjYXBlZFsxXTsKICAgICAgY29udGludWU7CiAgICB9CgogICAgdmFyIG5leHQgPSBzdHJbaW5kZXhdOwogICAgdmFyIHByZWZpeCA9IHJlc1syXTsKICAgIHZhciBuYW1lID0gcmVzWzNdOwogICAgdmFyIGNhcHR1cmUgPSByZXNbNF07CiAgICB2YXIgZ3JvdXAgPSByZXNbNV07CiAgICB2YXIgbW9kaWZpZXIgPSByZXNbNl07CiAgICB2YXIgYXN0ZXJpc2sgPSByZXNbN107IC8vIFB1c2ggdGhlIGN1cnJlbnQgcGF0aCBvbnRvIHRoZSB0b2tlbnMuCgogICAgaWYgKHBhdGgpIHsKICAgICAgdG9rZW5zLnB1c2gocGF0aCk7CiAgICAgIHBhdGggPSAnJzsKICAgIH0KCiAgICB2YXIgcGFydGlhbCA9IHByZWZpeCAhPSBudWxsICYmIG5leHQgIT0gbnVsbCAmJiBuZXh0ICE9PSBwcmVmaXg7CiAgICB2YXIgcmVwZWF0ID0gbW9kaWZpZXIgPT09ICcrJyB8fCBtb2RpZmllciA9PT0gJyonOwogICAgdmFyIG9wdGlvbmFsID0gbW9kaWZpZXIgPT09ICc/JyB8fCBtb2RpZmllciA9PT0gJyonOwogICAgdmFyIGRlbGltaXRlciA9IHJlc1syXSB8fCBkZWZhdWx0RGVsaW1pdGVyOwogICAgdmFyIHBhdHRlcm4gPSBjYXB0dXJlIHx8IGdyb3VwOwogICAgdG9rZW5zLnB1c2goewogICAgICBuYW1lOiBuYW1lIHx8IGtleSsrLAogICAgICBwcmVmaXg6IHByZWZpeCB8fCAnJywKICAgICAgZGVsaW1pdGVyOiBkZWxpbWl0ZXIsCiAgICAgIG9wdGlvbmFsOiBvcHRpb25hbCwKICAgICAgcmVwZWF0OiByZXBlYXQsCiAgICAgIHBhcnRpYWw6IHBhcnRpYWwsCiAgICAgIGFzdGVyaXNrOiBCb29sZWFuKGFzdGVyaXNrKSwKICAgICAgcGF0dGVybjogcGF0dGVybiA/IGVzY2FwZUdyb3VwKHBhdHRlcm4pIDogYXN0ZXJpc2sgPyAnLionIDogJ1teJyArIGVzY2FwZVN0cmluZyhkZWxpbWl0ZXIpICsgJ10rPycKICAgIH0pOwogIH0gLy8gTWF0Y2ggYW55IGNoYXJhY3RlcnMgc3RpbGwgcmVtYWluaW5nLgoKCiAgaWYgKGluZGV4IDwgc3RyLmxlbmd0aCkgewogICAgcGF0aCArPSBzdHIuc3Vic3RyKGluZGV4KTsKICB9IC8vIElmIHRoZSBwYXRoIGV4aXN0cywgcHVzaCBpdCBvbnRvIHRoZSBlbmQuCgoKICBpZiAocGF0aCkgewogICAgdG9rZW5zLnB1c2gocGF0aCk7CiAgfQoKICByZXR1cm4gdG9rZW5zOwp9Ci8qKgogKiBQcmV0dGllciBlbmNvZGluZyBvZiBVUkkgcGF0aCBzZWdtZW50cy4KICoKICogQHBhcmFtICB7c3RyaW5nfQogKiBAcmV0dXJuIHtzdHJpbmd9CiAqLwoKCmZ1bmN0aW9uIGVuY29kZVVSSUNvbXBvbmVudFByZXR0eShzdHIsIHNsYXNoQWxsb3dlZCkgewogIHZhciByZSA9IHNsYXNoQWxsb3dlZCA/IC9bPyNdL2cgOiAvWy8/I10vZzsKICByZXR1cm4gZW5jb2RlVVJJKHN0cikucmVwbGFjZShyZSwgZnVuY3Rpb24gKGMpIHsKICAgIHJldHVybiAnJScgKyBjLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7CiAgfSk7Cn0KLyoqCiAqIEVuY29kZSB0aGUgYXN0ZXJpc2sgcGFyYW1ldGVyLiBTaW1pbGFyIHRvIGBwcmV0dHlgLCBidXQgYWxsb3dzIHNsYXNoZXMuCiAqCiAqIEBwYXJhbSAge3N0cmluZ30KICogQHJldHVybiB7c3RyaW5nfQogKi8KCgpmdW5jdGlvbiBlbmNvZGVBc3RlcmlzayhzdHIpIHsKICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50UHJldHR5KHN0ciwgdHJ1ZSk7Cn0KLyoqCiAqIEVzY2FwZSBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBzdHJpbmcuCiAqCiAqIEBwYXJhbSAge3N0cmluZ30gc3RyCiAqIEByZXR1cm4ge3N0cmluZ30KICovCgoKZnVuY3Rpb24gZXNjYXBlU3RyaW5nKHN0cikgewogIHJldHVybiBzdHIucmVwbGFjZSgvKFsuKyo/PV4hOiR7fSgpW1xdfC9cXF0pL2csICdcXCQxJyk7Cn0KLyoqCiAqIEVzY2FwZSB0aGUgY2FwdHVyaW5nIGdyb3VwIGJ5IGVzY2FwaW5nIHNwZWNpYWwgY2hhcmFjdGVycyBhbmQgbWVhbmluZy4KICoKICogQHBhcmFtICB7c3RyaW5nfSBncm91cAogKiBAcmV0dXJuIHtzdHJpbmd9CiAqLwoKCmZ1bmN0aW9uIGVzY2FwZUdyb3VwKGdyb3VwKSB7CiAgcmV0dXJuIGdyb3VwLnJlcGxhY2UoLyhbPSE6JC8oKV0pL2csICdcXCQxJyk7Cn0KLyoqCiAqIEV4cG9zZSBhIG1ldGhvZCBmb3IgdHJhbnNmb3JtaW5nIHRva2VucyBpbnRvIHRoZSBwYXRoIGZ1bmN0aW9uLgogKi8KCgpmdW5jdGlvbiB0b2tlbnNUb0Z1bmN0aW9uKHRva2Vucywgb3B0aW9ucykgewogIC8vIENvbXBpbGUgYWxsIHRoZSB0b2tlbnMgaW50byByZWdleHBzLgogIHZhciBtYXRjaGVzID0gbmV3IEFycmF5KHRva2Vucy5sZW5ndGgpOyAvLyBDb21waWxlIGFsbCB0aGUgcGF0dGVybnMgYmVmb3JlIGNvbXBpbGF0aW9uLgoKICBmb3IgKHZhciBpID0gMDsgaSA8IHRva2Vucy5sZW5ndGg7IGkrKykgewogICAgaWYgKF90eXBlb2YodG9rZW5zW2ldKSA9PT0gJ29iamVjdCcpIHsKICAgICAgbWF0Y2hlc1tpXSA9IG5ldyBSZWdFeHAoJ14oPzonICsgdG9rZW5zW2ldLnBhdHRlcm4gKyAnKSQnLCBmbGFncyhvcHRpb25zKSk7CiAgICB9CiAgfQoKICByZXR1cm4gZnVuY3Rpb24gKG9iaiwgb3B0cykgewogICAgdmFyIHBhdGggPSAnJzsKICAgIHZhciBkYXRhID0gb2JqIHx8IHt9OwogICAgdmFyIG9wdGlvbnMgPSBvcHRzIHx8IHt9OwogICAgdmFyIGVuY29kZSA9IG9wdGlvbnMucHJldHR5ID8gZW5jb2RlVVJJQ29tcG9uZW50UHJldHR5IDogZW5jb2RlVVJJQ29tcG9uZW50OwoKICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCB0b2tlbnMubGVuZ3RoOyBfaSsrKSB7CiAgICAgIHZhciB0b2tlbiA9IHRva2Vuc1tfaV07CgogICAgICBpZiAodHlwZW9mIHRva2VuID09PSAnc3RyaW5nJykgewogICAgICAgIHBhdGggKz0gdG9rZW47CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIHZhciB2YWx1ZSA9IGRhdGFbdG9rZW4ubmFtZSB8fCAncGF0aE1hdGNoJ107CiAgICAgIHZhciBzZWdtZW50ID0gdm9pZCAwOwoKICAgICAgaWYgKHZhbHVlID09IG51bGwpIHsKICAgICAgICBpZiAodG9rZW4ub3B0aW9uYWwpIHsKICAgICAgICAgIC8vIFByZXBlbmQgcGFydGlhbCBzZWdtZW50IHByZWZpeGVzLgogICAgICAgICAgaWYgKHRva2VuLnBhcnRpYWwpIHsKICAgICAgICAgICAgcGF0aCArPSB0b2tlbi5wcmVmaXg7CiAgICAgICAgICB9CgogICAgICAgICAgY29udGludWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkICInICsgdG9rZW4ubmFtZSArICciIHRvIGJlIGRlZmluZWQnKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgewogICAgICAgIGlmICghdG9rZW4ucmVwZWF0KSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCAiJyArIHRva2VuLm5hbWUgKyAnIiB0byBub3QgcmVwZWF0LCBidXQgcmVjZWl2ZWQgYCcgKyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkgKyAnYCcpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgaWYgKHRva2VuLm9wdGlvbmFsKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgIicgKyB0b2tlbi5uYW1lICsgJyIgdG8gbm90IGJlIGVtcHR5Jyk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHZhbHVlLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBzZWdtZW50ID0gZW5jb2RlKHZhbHVlW2pdKTsKCiAgICAgICAgICBpZiAoIW1hdGNoZXNbX2ldLnRlc3Qoc2VnbWVudCkpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgYWxsICInICsgdG9rZW4ubmFtZSArICciIHRvIG1hdGNoICInICsgdG9rZW4ucGF0dGVybiArICciLCBidXQgcmVjZWl2ZWQgYCcgKyBKU09OLnN0cmluZ2lmeShzZWdtZW50KSArICdgJyk7CiAgICAgICAgICB9CgogICAgICAgICAgcGF0aCArPSAoaiA9PT0gMCA/IHRva2VuLnByZWZpeCA6IHRva2VuLmRlbGltaXRlcikgKyBzZWdtZW50OwogICAgICAgIH0KCiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIHNlZ21lbnQgPSB0b2tlbi5hc3RlcmlzayA/IGVuY29kZUFzdGVyaXNrKHZhbHVlKSA6IGVuY29kZSh2YWx1ZSk7CgogICAgICBpZiAoIW1hdGNoZXNbX2ldLnRlc3Qoc2VnbWVudCkpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCAiJyArIHRva2VuLm5hbWUgKyAnIiB0byBtYXRjaCAiJyArIHRva2VuLnBhdHRlcm4gKyAnIiwgYnV0IHJlY2VpdmVkICInICsgc2VnbWVudCArICciJyk7CiAgICAgIH0KCiAgICAgIHBhdGggKz0gdG9rZW4ucHJlZml4ICsgc2VnbWVudDsKICAgIH0KCiAgICByZXR1cm4gcGF0aDsKICB9Owp9Ci8qKgogKiBHZXQgdGhlIGZsYWdzIGZvciBhIHJlZ2V4cCBmcm9tIHRoZSBvcHRpb25zLgogKgogKiBAcGFyYW0gIHtPYmplY3R9IG9wdGlvbnMKICogQHJldHVybiB7c3RyaW5nfQogKi8KCgpmdW5jdGlvbiBmbGFncyhvcHRpb25zKSB7CiAgcmV0dXJuIG9wdGlvbnMgJiYgb3B0aW9ucy5zZW5zaXRpdmUgPyAnJyA6ICdpJzsKfQovKioKICogRm9ybWF0IGdpdmVuIHVybCwgYXBwZW5kIHF1ZXJ5IHRvIHVybCBxdWVyeSBzdHJpbmcKICoKICogQHBhcmFtICB7c3RyaW5nfSB1cmwKICogQHBhcmFtICB7c3RyaW5nfSBxdWVyeQogKiBAcmV0dXJuIHtzdHJpbmd9CiAqLwoKCmZ1bmN0aW9uIGZvcm1hdFVybCh1cmwsIHF1ZXJ5KSB7CiAgdmFyIHByb3RvY29sOwogIHZhciBpbmRleCA9IHVybC5pbmRleE9mKCc6Ly8nKTsKCiAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgcHJvdG9jb2wgPSB1cmwuc3Vic3RyaW5nKDAsIGluZGV4KTsKICAgIHVybCA9IHVybC5zdWJzdHJpbmcoaW5kZXggKyAzKTsKICB9IGVsc2UgaWYgKHVybC5zdGFydHNXaXRoKCcvLycpKSB7CiAgICB1cmwgPSB1cmwuc3Vic3RyaW5nKDIpOwogIH0KCiAgdmFyIHBhcnRzID0gdXJsLnNwbGl0KCcvJyk7CiAgdmFyIHJlc3VsdCA9IChwcm90b2NvbCA/IHByb3RvY29sICsgJzovLycgOiAnLy8nKSArIHBhcnRzLnNoaWZ0KCk7CiAgdmFyIHBhdGggPSBwYXJ0cy5maWx0ZXIoQm9vbGVhbikuam9pbignLycpOwogIHZhciBoYXNoOwogIHBhcnRzID0gcGF0aC5zcGxpdCgnIycpOwoKICBpZiAocGFydHMubGVuZ3RoID09PSAyKSB7CiAgICB2YXIgX3BhcnRzID0gcGFydHM7CgogICAgdmFyIF9wYXJ0czIgPSBfc2xpY2VkVG9BcnJheShfcGFydHMsIDIpOwoKICAgIHBhdGggPSBfcGFydHMyWzBdOwogICAgaGFzaCA9IF9wYXJ0czJbMV07CiAgfQoKICByZXN1bHQgKz0gcGF0aCA/ICcvJyArIHBhdGggOiAnJzsKCiAgaWYgKHF1ZXJ5ICYmIEpTT04uc3RyaW5naWZ5KHF1ZXJ5KSAhPT0gJ3t9JykgewogICAgcmVzdWx0ICs9ICh1cmwuc3BsaXQoJz8nKS5sZW5ndGggPT09IDIgPyAnJicgOiAnPycpICsgZm9ybWF0UXVlcnkocXVlcnkpOwogIH0KCiAgcmVzdWx0ICs9IGhhc2ggPyAnIycgKyBoYXNoIDogJyc7CiAgcmV0dXJuIHJlc3VsdDsKfQovKioKICogVHJhbnNmb3JtIGRhdGEgb2JqZWN0IHRvIHF1ZXJ5IHN0cmluZwogKgogKiBAcGFyYW0gIHtvYmplY3R9IHF1ZXJ5CiAqIEByZXR1cm4ge3N0cmluZ30KICovCgoKZnVuY3Rpb24gZm9ybWF0UXVlcnkocXVlcnkpIHsKICByZXR1cm4gT2JqZWN0LmtleXMocXVlcnkpLnNvcnQoKS5tYXAoZnVuY3Rpb24gKGtleSkgewogICAgdmFyIHZhbCA9IHF1ZXJ5W2tleV07CgogICAgaWYgKHZhbCA9PSBudWxsKSB7CiAgICAgIHJldHVybiAnJzsKICAgIH0KCiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7CiAgICAgIHJldHVybiB2YWwuc2xpY2UoKS5tYXAoZnVuY3Rpb24gKHZhbDIpIHsKICAgICAgICByZXR1cm4gW2tleSwgJz0nLCB2YWwyXS5qb2luKCcnKTsKICAgICAgfSkuam9pbignJicpOwogICAgfQoKICAgIHJldHVybiBrZXkgKyAnPScgKyB2YWw7CiAgfSkuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJyYnKTsKfQ=="},null]}